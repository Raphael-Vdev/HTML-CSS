!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="c12d510e-eb78-4d9a-a34c-50dc81584973",e._sentryDebugIdIdentifier="sentry-dbid-c12d510e-eb78-4d9a-a34c-50dc81584973")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"4edc5f77"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6430,1410],{72338:function(e,n,t){t.d(n,{Q:function(){return i},h:function(){return o}});var r=t(87708),i=r.Py.define(),o=r.Py.define()},14260:function(e,n,t){t.d(n,{Z:function(){return E}});var r=t(74985),i=(t(50959),t(89131)),o=t(21769),u=t(6191),a=t(74768),l=t(48960),c=Array.prototype.concat,s=function(e){return{recursive:!!e.recursive,bail:e.bail&&e.bail>0?e.bail:1e3}},f=function(e){return"file"===e.kind},d=function(e){return"function"===typeof e.getAsEntry?e.getAsEntry():e.webkitGetAsEntry?e.webkitGetAsEntry():null},p=function(e){return c.apply([],e)},h=function(e,n,t,r){var i;return i=e.isDirectory?n.recursive?v(e,n,t+1,(0,l.join)(r,e.name)):Promise.resolve([]):function(e){return new Promise((function(n,t){e.file?e.file(n,t):n(null)})).catch((function(){return null}))}(e).then((function(e){return e&&(e.dirPath=(0,l.join)(r,e.name)),e?[e]:[]})),i},v=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.name;return e&&t<n.bail&&e.isDirectory&&e.createReader?new Promise((function(i){e.createReader().readEntries((function(e){return Promise.all(e.map((function(e){return h(e,n,t,r)}))).then((function(e){return i(p(e))}))}),(function(){return i([])}))})):Promise.resolve([])},g=v,y=function(e,n){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g(d(e),s(n))}(e,n).then((function(n){if(!n.length){var t=e.getAsFile();n=t?[t]:n}return n}))};var m={dragDropManager:(0,i.i)((function(e){var n=(0,o.PD)(e),t=n.handleTopDropCapture;return n.handleTopDropCapture=function(e){var r,i=n.monitor.getItemType();i===u.HTML||i===u.TEXT?(n.dropTargetIds=[],null===(r=n.currentNativeSource)||void 0===r||r.loadDataTransfer(e.dataTransfer),n.enterLeaveCounter.reset()):t.call(n,e);n.currentNativeSource&&(n.currentNativeSource.item.dirContent=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=s(n),new Promise((function(t){var r,i;(null===e||void 0===e||null===(r=e.dataTransfer)||void 0===r?void 0:r.items)?Promise.all(p(e.dataTransfer.items).filter((function(e){return f(e)})).map((function(e){return y(e,n)}))).then((function(e){return t(p(e))})):(null===e||void 0===e||null===(i=e.dataTransfer)||void 0===i?void 0:i.files)?t(p(e.dataTransfer.files)):t([])}))}(e,{recursive:!0}))},n}))};function E(e){return(0,r.tZ)(a.L.Provider,{value:m,children:e.children})}},49944:function(e,n,t){t.d(n,{x:function(){return s}});var r=t(74985),i=t(43312),o=t(39541),u=t(85368);function a(e,n){var t=0,r=[];return n.forEach((function(n){var i=n.from,o=n.to,u=e.slice(t,i);u&&r.push({text:u,match:!1});var a=e.slice(i,o);a&&r.push({text:a,match:!0}),t=o})),t<e.length&&r.push({text:e.slice(t),match:!1}),r}var l=(0,i.iv)([o.l0.flex.shrink(1),o.l0.truncate]),c={normal:{matched:o.TV.foregroundDefault,unmatched:o.TV.foregroundDimmer},dimmed:{matched:o.TV.foregroundDimmer,unmatched:o.TV.foregroundDimmest}};function s(e){var n,t=null===(n=e.highlight)||void 0===n?void 0:n.filter((function(e){return e.to>0})),i=e.dimmed?c.dimmed:c.normal;return(null===t||void 0===t?void 0:t.length)?(0,r.tZ)(u.G,{className:e.className,css:l,children:a(e.text,t).map((function(e,n){return(0,r.tZ)("span",{style:{fontWeight:e.match?o.TV.fontWeightBold:o.TV.fontWeightRegular,color:e.match?i.matched:i.unmatched},children:e.text},e.text+n)}))}):(0,r.tZ)(u.G,{className:e.className,style:{color:i.matched},css:l,children:e.text})}},94236:function(e,n,t){var r=t(74985),i=(t(50959),t(45447)),o=t(2041),u=t(23262);n.Z=function(e){var n=e.isOpen,t=e.setOpen,a=e.feature;return(0,r.tZ)(r.HY,{children:(0,r.tZ)(i.b5,{children:(0,r.tZ)(o.u,{isOpen:n,onRequestClose:function(){t(!1)},children:(0,r.tZ)(u.Z,{setFeedbackFormOpen:t,feature:a})})})})}},89025:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(2272),i=t(74985),o=t(50959),u=t(45510),a=t(39137),l=t(85368),c=t(61284),s=t(39541);function f(e){var n=e.prompt,t=e.desc,f=e.type,d=e.placeholder,p=e.confirmText,h=e.loading,v=e.errorMessage,g=e.onCancel,y=e.onConfirm,m=e.isDanger,E=e.buttonIcon,T=(0,r.Z)(o.useState(),2),w=T[0],b=T[1];return(0,i.BX)(l.G,{css:[s.l0.colWithGap(24)],children:[(0,i.tZ)(c.h4,{variant:"headerDefault",level:2,children:n}),(0,i.tZ)(c.xv,{children:t}),(0,i.tZ)(a.II,{type:f,value:w,placeholder:d,autoFocus:!0,onChange:function(e){return b(e.target.value)}}),v?(0,i.tZ)(c.xv,{css:[s.l0.color.accentNegativeStronger],multiline:!1,children:v}):null,(0,i.BX)(l.G,{css:[s.l0.rowWithGap(12),s.l0.justify.end],children:[(0,i.tZ)(u.zx,{disabled:h,onClick:g,text:"Cancel"}),(0,i.tZ)(u.zx,{colorway:m?"negative":"primary",disabled:h,onClick:function(){return w&&y(w)},text:p||"Ok",iconLeft:E,dataCy:"prompt-confirm-button"})]})]})}},29203:function(e,n,t){t.d(n,{$X:function(){return p},Dm:function(){return f},S2:function(){return h},Uu:function(){return c},c1:function(){return d},wM:function(){return s}});var r=t(74985),i=t(92683),o=t(82325),u=t(91398),a=t(50959),l=(0,a.createContext)(void 0);function c(){var e=(0,a.useContext)(l);if(!e)throw new Error("Expected store in ghostwriter chat context");return e}function s(e){return(0,i.KO)(e,{store:c()})}function f(e){return(0,o.lV)((0,a.useCallback)((function(n){return n(e)}),[e]),{store:c()})}function d(e){return(0,i.Dv)(e,{store:c()})}function p(e){return(0,i.b9)(e,{store:c()})}function h(e){var n=e.children,t=(0,a.useRef)();return t.current||(t.current=(0,u.MT)()),(0,r.tZ)(l.Provider,{value:t.current,children:n})}},19522:function(e,n,t){t.d(n,{K:function(){return o}});var r=t(50959),i=t(98314);function o(e){(0,r.useEffect)((function(){e((0,i.r)(),{captureDraggingState:!0})}),[e])}},13525:function(e,n,t){t.d(n,{b:function(){return i},c:function(){return o}});var r=t(18171);function i(e,n){return(0,r.Z)((function(){return o(n,e)}),[n,e])}function o(e,n){return{get current(){return e.get(n)},subscribe:function(t){return e.sub(n,(function(){return t(e.get(n))}))}}}},27562:function(e,n,t){t.d(n,{T:function(){return u},Z:function(){return o}});var r=t(50959),i=t(48506);function o(){var e=r.useContext(i.Z);if(!e)throw new Error("Expected Repl info to be in context");return e.language}function u(){return o().startsWith("html")}},10628:function(e,n,t){t.d(n,{UV:function(){return u},fN:function(){return o}});var r=t(9970),i=1e4;function o(e,n){for(var t=0;t<n.length;t+=i){var o;(o=e).push.apply(o,(0,r.Z)(n.slice(t,t+i)))}}function u(e){return(0,r.Z)(new Array(e))}},55215:function(e,n,t){t.d(n,{V:function(){return v},Q:function(){return w}});var r=t(81962),i=t(72006),o=t(67642),u=t(66091),a=.5*(Math.sqrt(3)-1),l=(3-Math.sqrt(3))/6,c=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),s=function(){"use strict";function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random;(0,u.Z)(this,e);var t="function"===typeof n?n:d(n);this.p=f(t),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var r=0;r<512;r++)this.perm[r]=this.p[255&r],this.permMod12[r]=this.perm[r]%12}return e.prototype.noise2D=function(e,n){var t,r,i=this.permMod12,o=this.perm,u=0,s=0,f=0,d=(e+n)*a,p=Math.floor(e+d),h=Math.floor(n+d),v=(p+h)*l,g=e-(p-v),y=n-(h-v);g>y?(t=1,r=0):(t=0,r=1);var m=g-t+l,E=y-r+l,T=g-1+2*l,w=y-1+2*l,b=255&p,S=255&h,x=.5-g*g-y*y;if(x>=0){var R=3*i[b+o[S]];u=(x*=x)*x*(c[R]*g+c[R+1]*y)}var Z=.5-m*m-E*E;if(Z>=0){var C=3*i[b+t+o[S+r]];s=(Z*=Z)*Z*(c[C]*m+c[C+1]*E)}var k=.5-T*T-w*w;if(k>=0){var I=3*i[b+1+o[S+1]];f=(k*=k)*k*(c[I]*T+c[I+1]*w)}return 70*(u+s+f)},e}();function f(e){for(var n=new Uint8Array(256),t=0;t<256;t++)n[t]=t;for(var r=0;r<255;r++){var i=r+~~(e()*(256-r)),o=n[r];n[r]=n[i],n[i]=o}return n}function d(e){var n=0,t=0,r=0,i=1,o=function(){var e=4022871197;return function(n){n=n.toString();for(var t=0;t<n.length;t++){var r=.02519603282416938*(e+=n.charCodeAt(t));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();return n=o(" "),t=o(" "),r=o(" "),(n-=o(e))<0&&(n+=1),(t-=o(e))<0&&(t+=1),(r-=o(e))<0&&(r+=1),function(){var e=2091639*n+2.3283064365386963e-10*i;return n=t,t=r,r=e-(i=0|e)}}var p=new s;var h=t(49500);function v(e){var n=!1,t=0,r=0,i=null,o=function(a){if(n){var l=a-t;r+=l,t=a,i=window.requestAnimationFrame(o),e({elapsedTime:r,deltaTime:l,stop:u})}},u=function(){n&&(n=!1,i&&window.cancelAnimationFrame(i))};return{start:function(){n||(r=0,t=performance.now(),n=!0,i=window.requestAnimationFrame(o))},stop:u}}var g=function(){return(0,o.hd)(600,1200)},y=function(){return(0,o.hd)(1,3)},m=function(){return{width:(0,o.hd)(5,20),height:(0,o.hd)(5,20)}},E=function(){return(0,o.vF)()};function T(e){return Array.isArray(e)?(0,o.DQ)(e):(0,r.Z)(e,Function)?e():e}function w(){var e=!1,n=null,t=null,r=[],u=null,a={},l=function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=function(){var e=i.value;if(a[e])return"continue";var n=new Image;n.src=e,n.onerror=function(){h.error('Failed to load particle image "'.concat(e,'"'))},a[e]=n},u=e[Symbol.iterator]();!(n=(i=u.next()).done);n=!0)o()}catch(l){t=!0,r=l}finally{try{n||null==u.return||u.return()}finally{if(t)throw r}}};return{getIsInstalled:function(){return e},addParticles:function(e){for(var n=e.x,t=e.y,c=e.numParticles,s=void 0===c?150:c,f=e.spread,d=void 0===f?60:f,p=e.heading,h=void 0===p?90:p,v=e.airDrag,w=void 0===v?.9:v,b=e.color,S=void 0===b?E:b,x=e.gravity,R=void 0===x?800:x,Z=e.velocity,C=void 0===Z?g:Z,k=e.size,I=void 0===k?m:k,D=e.lifetime,A=void 0===D?y:D,O=e.flip,N=void 0===O||O,_=e.image,P=void 0===_?void 0:_,L=T(d),U=T(h),G=(0,o.Id)(L),B=(0,o.Id)(-U),F=T(s),q=0;q<F;q++){var M=B+(0,o.hd)(-G/2,G/2),z=T(C),H=T(I),W=H.width,j=H.height,X=T(A),K=T(S),V=T(w),Q=T(n),Y=T(t),$=T(P);"string"===typeof $&&(a[$]||l([$]),$=a[$]),r.push((0,i.Z)({seed:(0,o.hd)(0,1e5),x:Q,y:Y,gravity:R,airDrag:V,scaleX:1,scaleY:1,rotation:(0,o.hd)(0,(0,o.Id)(360)),velocityX:Math.cos(M)*z,velocityY:Math.sin(M)*z,angularVelocity:(0,o.hd)((0,o.Id)(-400),(0,o.Id)(400)),color:K,alpha:1,width:W,height:j,flip:N,lifetime:X,lifetimeRemaining:X},$?{image:$,type:"image"}:{type:(0,o.DQ)(["rectangle","ellipse"])}))}null===u||void 0===u||u.start()},clearParticles:function(){r=[]},uninstall:function(){var r;e&&(n&&(null===(r=document.body)||void 0===r?void 0:r.contains(n))&&document.body.removeChild(n),u&&u.stop(),n=null,t=null,e=!1,a={})},install:function(){e||document&&document.body&&(n=function(){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex="999999",e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight,e.id="replit-particles-simulation",e.setAttribute("role","image"),e.ariaHidden="true",e}(),(t=n.getContext("2d"))&&(document.body.appendChild(n),u=v((function(e){var i=e.deltaTime,u=e.stop;if(n&&t){var a=t,l=window.scrollX,c=window.scrollY;n.width!==document.documentElement.clientWidth&&(n.width=document.documentElement.clientWidth),n.height!==document.documentElement.clientHeight&&(n.height=document.documentElement.clientHeight),t.clearRect(0,0,n.width,n.height),r.map((function(e){return function(e){var n=e.particle,t=e.deltaTime;n.velocityY+=n.gravity*t/1e3,n.x+=n.velocityX*t/1e3,n.y+=n.velocityY*t/1e3,n.rotation+=n.angularVelocity*t/1e3,n.velocityX*=n.airDrag,n.velocityY*=n.airDrag,n.flip&&(n.scaleY=2*(0,o.WE)(n.lifetimeRemaining,.5));var r=(0,o.NC)(n.velocityX,n.velocityY),i=(0,o.$G)(n.velocityX,n.velocityY),u=r+.05*p.noise2D(n.seed,n.lifetimeRemaining);n.velocityX=Math.cos(u)*i,n.velocityY=Math.sin(u)*i,n.lifetimeRemaining-=t/1e3,n.lifetimeRemaining<=0?n.alpha=0:n.alpha=1-(n.lifetime-n.lifetimeRemaining)/n.lifetime}({particle:e,deltaTime:i})})),r.map((function(e){return function(e){var n=e.particle,t=e.ctx,r=e.scrollX,i=e.scrollY,o=n.width*n.scaleX,u=n.height*n.scaleY,a=n.x-r,l=n.y-i;t.save(),t.translate(a,l),t.rotate(n.rotation),t.globalAlpha=n.alpha,"image"===n.type?t.drawImage(n.image,-o/2,-u/2,o,u):"rectangle"===n.type?(t.fillStyle=n.color,t.fillRect(-o/2,-u/2,o,u)):"ellipse"===n.type&&(t.fillStyle=n.color,t.beginPath(),t.ellipse(0,0,o/2,u/2,0,0,2*Math.PI),t.fill()),t.restore()}({particle:e,ctx:a,scrollX:l,scrollY:c})})),0===(r=r.filter((function(e){return e.lifetimeRemaining>0}))).length&&u()}})),e=!0))},preloadImages:l,unloadImages:function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value;delete a[u]}}catch(l){t=!0,r=l}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}}}},31410:function(e,n,t){t.d(n,{$0:function(){return r.$},hd:function(){return i.hd},su:function(){return r.s}});var r=t(25220),i=t(67642)},25220:function(e,n,t){t.d(n,{$:function(){return f},s:function(){return r}});var r,i=t(72006),o=t(77637),u=t(50959),a=t(67642),l=t(55215),c=t(92355),s=(0,l.Q)();function f(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preloadImages,n=(0,c.T)();u.useEffect((function(){return s.install(),function(){s.uninstall()}}),[]),u.useEffect((function(){e&&s.preloadImages(e)}),[e]);var t=function(e){n||s.addParticles(e)},r=function(e){var r=e.element,u=(0,o.Z)(e,["element"]);if(!n){var l=(0,a.tj)(r),c=l.x,s=l.y;t((0,i.Z)({x:c,y:s},u))}},l=function(e){n||s.addParticles((0,i.Z)({numParticles:125,spread:360,velocity:function(){return(0,a.hd)(400,900)},size:function(){return{width:(0,a.hd)(5,15),height:(0,a.hd)(5,25)}}},e))},f=function(e){var t=e.element,r=(0,o.Z)(e,["element"]);if(!n){var u=(0,a.tj)(t),c=u.x,s=u.y;l((0,i.Z)({x:c,y:s},r))}},d=function(e){var t=e.direction,r=(0,o.Z)(e,["direction"]);n||s.addParticles((0,i.Z)({heading:t},r))},p=function(e){var t=e.element,r=e.direction,u=(0,o.Z)(e,["element","direction"]);if(!n){var l=(0,a.tj)(t),c=l.x,f=l.y;s.addParticles((0,i.Z)({x:c,y:f,numParticles:100,velocity:function(){return(0,a.hd)(400,1500)},spread:60,size:function(){return{width:(0,a.hd)(5,15),height:(0,a.hd)(5,25)}},heading:r},u))}};return{fireBurst:t,fireBurstFrom:r,fireCircularBurst:l,fireCircularBurstFrom:f,fireDirectionalBurst:d,fireDirectionalBurstFrom:p}}!function(e){e[e.East=0]="East",e[e.NorthEast=45]="NorthEast",e[e.North=90]="North",e[e.NorthWest=135]="NorthWest",e[e.West=180]="West",e[e.SouthWest=225]="SouthWest",e[e.South=270]="South"}(r||(r={}))},67642:function(e,n,t){t.d(n,{$G:function(){return d},DQ:function(){return a},Id:function(){return s},NC:function(){return f},WE:function(){return h},hd:function(){return l},tj:function(){return o},vF:function(){return c}});var r=t(92039),i=t.n(r);function o(e){var n=function(e){var n=e.getBoundingClientRect();return{x:n.left+n.width/2,y:n.top+n.height/2}}(e);return{x:n.x+window.scrollX,y:n.y+window.scrollY}}function u(e,n){return i()(e,n,!1)}function a(e){return e[u(0,e.length-1)]}function l(e,n){return i()(e,n,!0)}function c(){return"hsl(".concat(u(0,360),", 100%, 70%)")}function s(e){return e*Math.PI/180}function f(e,n){return Math.atan2(n,e)}function d(e,n){return Math.sqrt(Math.pow(e,2)+Math.pow(n,2))}function p(e,n){return(e%n+n)%n}function h(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return n-Math.abs(p(e,2*n)-n)}},5894:function(e,n,t){t.d(n,{Fp:function(){return r},Fv:function(){return u},HH:function(){return o},hI:function(){return i}});var r="gpt-3.5-turbo-0613",i=["package.json","package-lock.json","yarn.lock","poetry.lock","package.json","package-lock.json",".replit","replit.nix","pyproject.toml",".breakpoints"],o=[".md",".yml",".yaml",".json",".toml",".out",".pkl",".bin",".txt",".csv",".log"],u=["node_modules",".config","venv",".next",".git"]},20841:function(e,n){n.Z={sandbox:"allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox allow-modals allow-downloads allow-downloads-without-user-activation allow-presentation allow-orientation-lock allow-scripts",allow:"accelerometer; ambient-light-sensor; autoplay; battery; camera; display-capture; encrypted-media; execution-while-not-rendered; execution-while-out-of-viewport; fullscreen; gamepad; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; navigation-override; oversized-images; payment; picture-in-picture; publickey-credentials; speaker-selection; sync-xhr; unoptimized-images; unsized-media; usb; screen-wake-lock; web-share; xr-spatial-tracking; clipboard-read; clipboard-write",allowFullScreen:!0,allowtransparency:"true",allowpaymentrequest:"true"}},78973:function(e,n,t){function r(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.root,i=t.rootMargin,o=t.threshold,u=void 0===o?1:o;if("undefined"===typeof IntersectionObserver)return function(){};var a=new WeakMap,l=function(e){e.forEach((function(e){var t=a.get(e.target);if(e.isIntersecting!==Boolean(t))if(e.isIntersecting){var r=n(e);"function"===typeof r?a.set(e.target,r):c.unobserve(e.target)}else t&&(t(e),a.delete(e.target))}))},c=new IntersectionObserver(l,{root:r,rootMargin:i,threshold:u});return c.observe(e),function(){return c.disconnect()}}t.d(n,{j:function(){return r}})},42174:function(e,n,t){t.d(n,{j:function(){return u}});var r=t(50959),i=t(12808),o=t(94716);function u(e,n,t){var u=(0,o.Z)(t);(0,r.useLayoutEffect)((function(){var t=function(n){var t=u.current?u.current(n):n;null!==t&&(0,i.A)(e,t)};return t(n.current),(0,i.p)(e),n.subscribe(t)}),[e,n,u])}},12808:function(e,n,t){t.d(n,{A:function(){return a},p:function(){return l}});var r=t(66091),i=t(2272),o=new(function(){"use strict";function e(){(0,r.Z)(this,e),this.map=new Map}var n=e.prototype;return n.getOrInit=function(e){var n=this.map.get(e);return n||(n=new Map,this.map.set(e,n)),n},n.add=function(e,n,t){this.getOrInit(e).set(n,t)},n.flush=function(){var e=!0,n=!1,t=void 0;try{for(var r,o=this.map[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var u=(0,i.Z)(r.value,2),a=u[0],l=u[1];if(a&&"current"in a&&(a=a.current),a){var c=!0,s=!1,f=void 0;try{for(var d,p=l[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var h=(0,i.Z)(d.value,2),v=h[0],g=h[1];a.style.setProperty(v,g)}}catch(y){s=!0,f=y}finally{try{c||null==p.return||p.return()}finally{if(s)throw f}}}}}catch(y){n=!0,t=y}finally{try{e||null==o.return||o.return()}finally{if(n)throw t}}this.map.clear()},n.flushNode=function(e){if(e){var n=e,t=this.map.get(n);if(t&&(e&&"current"in e&&(e=e.current),e)){var r=!0,o=!1,u=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=(0,i.Z)(a.value,2),s=c[0],f=c[1];e.style.setProperty(s,f)}}catch(d){o=!0,u=d}finally{try{r||null==l.return||l.return()}finally{if(o)throw u}}this.map.delete(n)}}},e}()),u=!1;function a(e,n,t){if(null!==e){if("string"===typeof n){if(void 0===t)throw new Error("value is undefined when prop is string");o.add(e,n,t)}else for(var r in n)o.add(e,r,n[r]);u||(u=!0,requestAnimationFrame((function(){o.flush(),u=!1})))}}function l(e){o.flushNode(e)}},13474:function(e,n,t){var r;t.d(n,{y:function(){return r}}),function(e){e.Welcome="Welcome",e.Editor="Editor",e.Examples="Examples",e.Run="Run",e.Output="Output",e.Sidepane="Sidepane",e.Share="Share"}(r||(r={}))},12171:function(e,n,t){t.d(n,{I6:function(){return s},bG:function(){return d},fp:function(){return a},gN:function(){return l},gU:function(){return h},g_:function(){return c},pl:function(){return p},x6:function(){return f}});var r=t(92674),i=t.n(r),o=t(88161);function u(e){var n=e.data;if(!(0,o.CF)(n)||n.messageDirection!==o.s1.FROM_NATIVE)return null;if(n.protocolVersion!==o.Wj)throw new Error("Invalid protocolVersion: ".concat(n.protocolVersion," != ").concat(o.Wj));return n}function a(e,n){var t=u(e);if(null!=t){var r=t.payload.messageType;switch(r){case o.cF.TEXT_EDITOR_STATE_REQUEST:case o.cF.REQUEST_SET_SELECTION:case o.cF.REQUEST_REPLACE_SELECTION:case o.cF.REQUEST_SET_TEXT:case o.cF.REQUEST_INSERT_TEXT:case o.cF.REQUEST_PASTE_TEXT:case o.cF.TEXT_EDITOR_REQUEST_ACTION:n({type:r,bridgeMessage:t})}}}function l(e,n){var t=u(e);if(null!=t){var r=t.payload.messageType;switch(r){case o.cF.SHELL_INSERT_INPUT:n({type:r,id:t.messageId,input:t.payload.input});break;case o.cF.SHELL_COMMAND:n({type:r,id:t.messageId,command:t.payload.command});break;case o.cF.SHELL_PASTE_TEXT:n({type:r,id:t.messageId,text:t.payload.text})}}}function c(e,n){var t=u(e);if(null!=t){var r=t.payload.messageType;if(r===o.cF.GIT_REFRESH_GITHUB_CONNECTION)n({type:r,bridgeMessage:t})}}function s(e,n){var t=u(e);if(null!=t){var r=t.payload.messageType;switch(r){case o.cF.GHOSTWRITER_CHAT_SEND:n({type:r,id:t.messageId,chatMessage:t.payload.message});break;case o.cF.GHOSTWRITER_CHAT_ABORT_RESPONSE:n({type:r,id:t.messageId})}}}function f(e,n){var t=u(e);if(null!=t){var r=t.payload.messageType;switch(r){case o.cF.SET_KEYBOARD_STATE:n({type:r,keyboardState:{isShown:t.payload.isShown,height:t.payload.height}});break;case o.cF.WORKSPACE_REQUEST_ACTION:n({type:r,action:t.payload.action});break;case o.cF.WORKSPACE_REQUEST_OPEN_PANE:n({type:r,id:t.messageId,paneType:t.payload.paneType})}}}function d(e,n){var t={protocolVersion:o.Wj,messageDirection:o.s1.TO_NATIVE,messageId:n,payload:e};"ReactNativeWebView"in window&&null!=window.ReactNativeWebView&&window.ReactNativeWebView.postMessage?window.ReactNativeWebView.postMessage(JSON.stringify(t)):window.postMessage(t,window.origin)}function p(e){var n=null!==e&&void 0!==e?e:i()();d({messageType:o.cF.ERROR},n)}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i()(),n={messageType:o.cF.ACK};d(n,e)}},88161:function(e,n,t){t.d(n,{CF:function(){return V},H7:function(){return E},Of:function(){return o},Se:function(){return x},T$:function(){return D},Wj:function(){return c},aB:function(){return O},ac:function(){return k},b9:function(){return u},cF:function(){return r},fz:function(){return b},m7:function(){return Z},s1:function(){return i}});var r,i,o,u,a=t(17403),l=t(52783);!function(e){e.ERROR="ERROR",e.ACK="ACK",e.RESET="RESET",e.DEBUG="DEBUG",e.TEXT_EDITOR_CLOSED="TEXT_EDITOR_CLOSED",e.TEXT_EDITOR_STATE="WORKSPACE_STATE",e.TEXT_EDITOR_STATE_REQUEST="WORKSPACE_STATE_REQUEST",e.WORKSPACE_STATE="WORKSPACE_STATE1",e.WORKSPACE_STATE_REQUEST="WORKSPACE_STATE_REQUEST1",e.REQUEST_SET_SELECTION="REQUEST_SET_SELECTION",e.REQUEST_REPLACE_SELECTION="REQUEST_REPLACE_SELECTION",e.REQUEST_SET_TEXT="REQUEST_SET_TEXT",e.REQUEST_INSERT_TEXT="REQUEST_INSERT_TEXT",e.REQUEST_PASTE_TEXT="REQUEST_PASTE_TEXT",e.TEXT_EDITOR_REQUEST_ACTION="TEXT_EDITOR_REQUEST_ACTION",e.WORKSPACE_REQUEST_ACTION="WORKSPACE_REQUEST_ACTION",e.SET_KEYBOARD_STATE="SET_KEYBOARD_STATE",e.WORKSPACE_REQUEST_OPEN_PANE="WORKSPACE_REQUEST_OPEN_PANE",e.SHELL_INSERT_INPUT="SHELL_INSERT_INPUT",e.SHELL_COMMAND="SHELL_COMMAND",e.SHELL_PASTE_TEXT="SHELL_PASTE_TEXT",e.GIT_REFRESH_GITHUB_CONNECTION="GIT_REFRESH_GITHUB_CONNECTION",e.GHOSTWRITER_CHAT_SEND="GHOSTWRITER_CHAT_SEND",e.GHOSTWRITER_CHAT_ABORT_RESPONSE="GHOSTWRITER_CHAT_ABORT_RESPONSE",e.GHOSTWRITER_CHAT_FOCUS_INPUT="GHOSTWRITER_CHAT_FOCUS_INPUT",e.GHOSTWRITER_CHAT_STATE="GHOSTWRITER_CHAT_STATE",e.UPSELL_REQUEST_OPEN="UPSELL_REQUEST_OPEN"}(r||(r={})),function(e){e.FROM_NATIVE="FROM_NATIVE",e.TO_NATIVE="TO_NATIVE"}(i||(i={})),function(e){e.OPEN_FILETREE="OPEN_FILETREE",e.OPEN_NEW_PANE="OPEN_NEW_PANE",e.TOGGLE_DRAWER="TOGGLE_DRAWER",e.TOGGLE_ALLPANES="TOGGLE_ALLPANES",e.TOGGLE_RUN_STATE="TOGGLE_RUN_STATE"}(o||(o={})),function(e){e.REQUEST_UNDO="REQUEST_UNDO",e.REQUEST_REDO="REQUEST_REDO",e.REQUEST_BLUR="REQUEST_BLUR",e.REQUEST_FOCUS="REQUEST_FOCUS",e.REQUEST_INDENT_SELECTION="REQUEST_INDENT_SELECTION",e.REQUEST_DEDENT_SELECTION="REQUEST_DEDENT_SELECTION",e.REQUEST_TOGGLE_COMMENT="REQUEST_TOGGLE_COMMENT",e.REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION="REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION"}(u||(u={}));var c="1";var s=a.Type.Object({location:a.Type.Number(),length:a.Type.Number()});var f=a.Type.Object({messageType:a.Type.Literal(r.ERROR)}),d=a.Type.Object({messageType:a.Type.Literal(r.ACK)}),p=a.Type.Object({messageType:a.Type.Literal(r.RESET)}),h=a.Type.Object({messageType:a.Type.Literal(r.TEXT_EDITOR_CLOSED),filePath:a.Type.String()});var v=a.Type.Object({messageType:a.Type.Literal(r.TEXT_EDITOR_STATE),filePath:a.Type.String(),text:a.Type.String(),selections:a.Type.Array(s),hasFocus:a.Type.Boolean(),revisionId:a.Type.String(),hasGhostwriterSuggestion:a.Type.Boolean()}),g=a.Type.Object({messageType:a.Type.Literal(r.TEXT_EDITOR_STATE_REQUEST),filePath:a.Type.String()}),y=a.Type.Union([a.Type.Literal("OFFLINE"),a.Type.Literal("IDLE"),a.Type.Literal("RUNNING"),a.Type.Literal("STOPPING"),a.Type.Literal("BEFORE_RUN")]),m=a.Type.Object({messageType:a.Type.Literal(r.WORKSPACE_STATE),isDrawerOpen:a.Type.Boolean(),isShowingAllPanes:a.Type.Boolean(),isSaving:a.Type.Boolean(),isOffline:a.Type.Boolean(),runState:y,activePaneType:a.Type.Union([a.Type.Null(),a.Type.String()]),activePaneFilePath:a.Type.Union([a.Type.Null(),a.Type.String()])});function E(e){return l.B4.Check(m,e)}var T=a.Type.Object({messageType:a.Type.Literal(r.WORKSPACE_STATE_REQUEST)}),w=a.Type.Object({messageType:a.Type.Literal(r.REQUEST_REPLACE_SELECTION),filePath:a.Type.String(),text:a.Type.String(),revisionId:a.Type.String()});function b(e){return l.B4.Check(w,e)}var S=a.Type.Object({messageType:a.Type.Literal(r.REQUEST_SET_SELECTION),filePath:a.Type.String(),selections:a.Type.Array(s),revisionId:a.Type.String()});function x(e){return l.B4.Check(S,e)}var R=a.Type.Object({messageType:a.Type.Literal(r.REQUEST_SET_TEXT),filePath:a.Type.String(),text:a.Type.String(),selections:a.Type.Array(s),revisionId:a.Type.String()});function Z(e){return l.B4.Check(R,e)}var C=a.Type.Object({messageType:a.Type.Literal(r.REQUEST_INSERT_TEXT),filePath:a.Type.String(),text:a.Type.String(),insertionRange:s,selections:a.Type.Array(s),revisionId:a.Type.String()});function k(e){return l.B4.Check(C,e)}var I=a.Type.Object({messageType:a.Type.Literal(r.REQUEST_PASTE_TEXT),text:a.Type.String(),filePath:a.Type.String(),revisionId:a.Type.String()});function D(e){return l.B4.Check(I,e)}var A=a.Type.Object({messageType:a.Type.Literal(r.TEXT_EDITOR_REQUEST_ACTION),action:a.Type.Enum(u),revisionId:a.Type.String(),filePath:a.Type.String()});function O(e){return l.B4.Check(A,e)}var N=a.Type.Object({messageType:a.Type.Literal(r.WORKSPACE_REQUEST_ACTION),action:a.Type.Enum(o)});var _=a.Type.Object({messageType:a.Type.Literal(r.SET_KEYBOARD_STATE),isShown:a.Type.Boolean(),height:a.Type.Number()});var P=a.Type.Object({messageType:a.Type.Literal(r.WORKSPACE_REQUEST_OPEN_PANE),paneType:a.Type.Literal("ghostwriterChat")});var L=a.Type.Object({messageType:a.Type.Literal(r.SHELL_INSERT_INPUT),input:a.Type.String()});var U=a.Type.Literal("unknown"),G=a.Type.Object({messageType:a.Type.Literal(r.SHELL_COMMAND),command:U});var B=a.Type.Object({messageType:a.Type.Literal(r.SHELL_PASTE_TEXT),text:a.Type.String()});var F=a.Type.Object({messageType:a.Type.Literal(r.GIT_REFRESH_GITHUB_CONNECTION)});var q=a.Type.Object({messageType:a.Type.Literal(r.GHOSTWRITER_CHAT_SEND),message:a.Type.String()});var M=a.Type.Object({messageType:a.Type.Literal(r.GHOSTWRITER_CHAT_ABORT_RESPONSE)}),z=a.Type.Object({messageType:a.Type.Literal(r.GHOSTWRITER_CHAT_FOCUS_INPUT)}),H=a.Type.Object({messageType:a.Type.Literal(r.GHOSTWRITER_CHAT_STATE),chatInputText:a.Type.Optional(a.Type.String()),showStopGenerating:a.Type.Boolean(),isSending:a.Type.Boolean(),characterLimit:a.Type.Number()});var W=a.Type.Object({messageType:a.Type.Literal(r.UPSELL_REQUEST_OPEN),showcasedFeature:a.Type.Optional(a.Type.Union([a.Type.Literal("ghostwriter")]))});var j=a.Type.Object({messageType:a.Type.Literal(r.DEBUG),debugMessage:a.Type.String()});var X=a.Type.Union([f,d,p,j,h,v,g,m,T,S,w,R,C,I,A,N,_,L,G,B,F,q,M,H,z,P,W]);var K=a.Type.Object({protocolVersion:a.Type.String(),messageDirection:a.Type.Enum(i),messageId:a.Type.String(),payload:X});function V(e){return l.B4.Check(K,e)}},89448:function(e,n,t){t.d(n,{D:function(){return r},V:function(){return o}});var r,i=t(87978);function o(e){return(0,i.gK)(e)?r.Markdown:(0,i.sL)(e)?r.Draw:(0,i.IQ)(e)?r.Pedit:(0,i.T3)(e)?r.Media:r.Code}!function(e){e.Media="Media",e.Code="Code",e.Markdown="Markdown",e.Draw="Draw",e.Pedit="Pedit"}(r||(r={}))},60141:function(e,n,t){t.d(n,{Z:function(){return y}});var r=t(57389),i=t(72006),o=t(4405),u=t(74985),a=t(90349),l=t(85368),c=t(39541),s=t(66539),f=t(82568),d=(0,t(68973).$)(["size","fontSize","listGap","iconTextGap","avatarOverlap","tooltipFontSize"]),p=d.styleTokens,h=d.cssVars,v=(0,f.X)({avatarsRow:[c.l0.flex.row,{"& > *":{marginLeft:"calc(-0.4 * ".concat(p.size,")")},"& > *:first-child":{marginLeft:0}}],countCirlce:[c.l0.center,c.l0.overflow("hidden"),c.l0.backgroundColor.backgroundDefault,c.l0.color.foregroundDimmer,c.l0.px(2),{borderRadius:"50%",minWidth:p.size,height:p.size,fontSize:p.fontSize}],tooltop:[{gap:p.listGap,gridTemplateColumns:"repeat(auto-fill, 200px)"}],tooltipRow:[c.l0.rowWithGap(c.TV.space2),c.l0.align.center],tooltipText:[c.l0.flex.growAndShrink(1),c.l0.truncate,c.l0.color.foregroundDimmer,{paddingLeft:p.iconTextGap,fontSize:p.tooltipFontSize}],stackItem:[]}),g={12:{fontSize:8,listGap:2,iconTextGap:2,tooltipAvatarSize:12,tooltipFontSize:8},16:{fontSize:10,listGap:2,iconTextGap:2,tooltipAvatarSize:16,tooltipFontSize:10},24:{fontSize:12,listGap:4,iconTextGap:4,tooltipAvatarSize:16,tooltipFontSize:12},32:{fontSize:14,listGap:4,iconTextGap:4,tooltipAvatarSize:16,tooltipFontSize:14},40:{fontSize:16,listGap:8,iconTextGap:4,tooltipAvatarSize:24,tooltipFontSize:14},48:{fontSize:24,listGap:8,iconTextGap:4,tooltipAvatarSize:24,tooltipFontSize:14}};function y(e){var n,t,c,f,d,p,y,m,E,T=e.activeUsers,w=e.visibleNumOfUsers,b=void 0===w?3:w,S=e.size,x=void 0===S?24:S,R=T.length,Z=(E={},(0,r.Z)(E,h.size,x+"px"),(0,r.Z)(E,h.fontSize,(null!==(d=null===(n=g[x])||void 0===n?void 0:n.fontSize)&&void 0!==d?d:x)+"px"),(0,r.Z)(E,h.listGap,(null!==(p=null===(t=g[x])||void 0===t?void 0:t.listGap)&&void 0!==p?p:8)+"px"),(0,r.Z)(E,h.iconTextGap,(null!==(y=null===(c=g[x])||void 0===c?void 0:c.iconTextGap)&&void 0!==y?y:8)+"px"),(0,r.Z)(E,h.tooltipFontSize,(null!==(m=null===(f=g[x])||void 0===f?void 0:f.tooltipFontSize)&&void 0!==m?m:14)+"px"),E),C=R>b,k=T.slice(0,C?b-1:b);return(0,u.tZ)(s.u,{tooltip:(0,u.tZ)(l.G,{css:v.tooltop,style:Z,children:T.map((function(e){var n;return(0,u.BX)(l.G,{css:v.tooltipRow,children:[(0,u.tZ)(a.q,{size:(null===(n=g[x])||void 0===n?void 0:n.tooltipAvatarSize)||x,src:e.image||null,ringColor:e.color,username:e.username},e.id),(0,u.tZ)(l.G,{css:v.tooltipText,children:e.username})]},e.username)}))}),children:function(e,n){return(0,u.BX)(l.G,(0,o.Z)((0,i.Z)({},e),{tag:"ul",innerRef:n,css:v.avatarsRow,style:Z,children:[k.map((function(e,n){return(0,u.tZ)(l.G,{tag:"li",style:{zIndex:n+1},css:v.stackItem,children:(0,u.tZ)(a.q,{size:x,src:e.image||null,ringColor:e.color,username:e.username})},e.id)})),C?(0,u.tZ)(l.G,{tag:"li",css:v.stackItem,style:{zIndex:k.length},children:(0,u.tZ)(l.G,{css:v.countCirlce,children:(0,u.BX)(l.G,{children:["+",R-b+1]})})}):null]}))}})}},45827:function(e,n,t){var r=(0,t(50959).createContext)(null);n.Z=r},69921:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(2272),i=t(50959),o={isConnecting:!0,channel:null,context:null};function u(e){var n=e.container,t=e.service,u=e.name,a=e.skip,l=void 0!==a&&a,c=(0,r.Z)(i.useState(o),2),s=c[0],f=c[1];return i.useEffect((function(){f(o);var e=!1,r=n.openChannel({service:t,name:u,skip:function(){return l}},(function(n){if(!e)return f({context:n.context,channel:n.channel,isConnecting:!1}),function(n){e||f({isConnecting:n.willReconnect,channel:null,context:null})}}));return function(){e=!0,r()}}),[n,t,u,l]),s}},81203:function(e,n,t){t.d(n,{P:function(){return E},n:function(){return m}});var r=t(2272),i=t(17403),o=t(52783),u=t(50959),a=t(88688),l=t(68710),c=t(63064),s=t(18171),f=t(48330),d=t(11969),p=t(88541),h=i.Type.Array(i.Type.String()),v=function(e){return"repl:hiddenFiles:"+e},g=function(e){var n=d.Z.get(v(e));return o.B4.Check(h,n)?n:null},y=function(e,n){d.Z.set(v(e),n)},m=function(e){var n=(0,p.P5)({controlName:"flag-filetree-local-cache",logFlagToAnalytics:!1}),t=(0,f.Z)(),i=(0,c.Z)(),o=(0,r.Z)(u.useState((function(){return n?g(t):null})),2),l=o[0],s=o[1];return u.useEffect((function(){return e.watch((function(e){var r=function(e){n&&y(t,e),s(e)};i.current&&(e.error?e.error===a.Yt.NotFound&&r([]):e.config.hidden?r(e.config.hidden):r([]))}))}),[e,t,i,n]),l},E=function(e){var n=m(e);return(0,s.Z)((function(){return null===n?null:n.map((function(e){return(0,l.Z)(e)||e}))}),[n])}},73299:function(e,n,t){t.d(n,{C:function(){return a},Gw:function(){return u},Tg:function(){return l},so:function(){return i},ss:function(){return c},tc:function(){return o}});var r=t(55749);function i(e,n){for(var t=[],r=e.split(n),i=0;i<r.length;i++){var o=r[i].trim();""!==o&&t.push(o)}return t}function o(e){return e.replace(/^<|>$/g,"")}function u(e){return"'".concat(e.replace(/'/g,"'\\''"),"'")}function a(e){return e.replace(/^refs\/(?:heads|remotes)\//,"")}function l(e){if(-1===e.indexOf("/"))return[null,null];if(e.startsWith("refs/heads/"))return[null,null];if(e.startsWith("refs/remotes/")){var n=(0,r.Z)(e.split("/"));return[n[2],n.slice(3).join("/")]}var t=(0,r.Z)(e.split("/"));return[t[0],t.slice(1).join("/")]}function c(e){return e.replace(/^refs\/remotes\//,"")}},49760:function(e,n,t){t.d(n,{Z:function(){return m},h:function(){return i}});var r,i,o=t(57135),u=t(2272),a=t(96583),l=t(73299),c="# branch.oid ",s="# branch.head ",f="# branch.upstream ",d="# branch.ab ",p="# stash ",h=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/,v=/^([RC])([0-9]+) (.+?)\t(.+)$/,g=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/,y=/([RC][0-9]+ .+?)\0(.+?(?:\0|$))/g;function m(e){return E.apply(this,arguments)}function E(){return(E=(0,o.Z)((function(e){var n,t,r,i,o,h,v,g,m,E,w,b,S,x,R,Z,C,k,I,D,A;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n=null,t=null,r=null,i=0,o=[],[4,e("git status ".concat(["-z","--porcelain=v2","--branch","--show-stash","--untracked-files=all"].join(" ")))];case 1:if((h=a.sent()).error)return[2,h];v=h.output.replaceAll(y,"$1\t$2"),g=(0,l.so)(v,"\0"),m=!0,E=!1,w=void 0;try{for(b=g[Symbol.iterator]();!(m=(S=b.next()).done);m=!0)(x=S.value).startsWith("#")?x.startsWith(c)?"(initial)"!==(R=x.substring(c.length))&&(n=R):x.startsWith(s)?"(detached)"!==(Z=x.substring(s.length))&&(t=Z):x.startsWith(f)?"(not queried)"!==(C=x.substring(f.length))&&(r={branch:C,ahead:0,behind:0}):x.startsWith(d)?r&&(k=(0,u.Z)(x.substring(d.length).split(" ").map((function(e){return Math.abs(parseInt(e,10))})),2),I=k[0],D=k[1],r.ahead=I,r.behind=D):x.startsWith(p)&&(i=parseInt(x.substring(p.length),10)):null!==(A=T(x))&&o.push(A)}catch(O){E=!0,w=O}finally{try{m||null==b.return||b.return()}finally{if(E)throw w}}return[2,{commit:n,branch:t,upstream:r,stashes:i,changes:o,error:null}]}}))}))).apply(this,arguments)}function T(e){var n=e[0];switch(e=e.substring(2),n){case r.IGNORED:return null;case r.UNTRACKED:return{type:{index:i.UNTRACKED,worktree:i.UNTRACKED},path:e,staged:!1,unmerged:!1};case r.UNMERGED:var t=e.match(g);if(!t)return null;var o=(0,u.Z)(t,12),a=o[1],l=o[2],c=o[11],s=w(a);return{type:{index:s,worktree:w(l)},path:c,staged:s!==i.UNMODIFIED,unmerged:!0};case r.ORDINARY:case r.RENAMED_OR_COPIED:var f=e.match(h);if(!f)return null;var d=(0,u.Z)(f,10),p=d[1],y=d[2],m=d[9],E=w(p),T=w(y),S=E!==i.UNMODIFIED;if(n===r.ORDINARY)return{type:{index:E,worktree:T},path:m,staged:S,unmerged:!1};if(n===r.RENAMED_OR_COPIED){var x=m.match(v);if(!x)return null;var R=(0,u.Z)(x,5),Z=R[1],C=R[2],k=R[3],I=R[4];return{type:{index:E,worktree:T},path:k,staged:S,unmerged:!1,source:{type:b(Z),score:parseInt(C,10),path:I}}}return null;default:return null}}function w(e){switch(e){case".":default:return i.UNMODIFIED;case"M":return i.MODIFIED;case"T":return i.TYPE_CHANGED;case"A":return i.ADDED;case"D":return i.DELETED;case"R":return i.RENAMED;case"C":return i.COPIED;case"U":return i.UNMERGED}}function b(e){switch(e){case"R":default:return i.RENAMED;case"C":return i.COPIED}}!function(e){e.ORDINARY="1",e.RENAMED_OR_COPIED="2",e.UNMERGED="u",e.UNTRACKED="?",e.IGNORED="!"}(r||(r={})),function(e){e.UNTRACKED="UNTRACKED",e.UNMODIFIED="UNMODIFIED",e.MODIFIED="MODIFIED",e.TYPE_CHANGED="TYPE_CHANGED",e.ADDED="ADDED",e.DELETED="DELETED",e.RENAMED="RENAMED",e.COPIED="COPIED",e.UNMERGED="UNMERGED"}(i||(i={}))},52619:function(e,n,t){t.d(n,{Z:function(){return C}});var r=t(57135),i=t(96583),o=t(91926),u=t(13630),a=t(10841),l=t(27327),c=t(29457),s=t(25528);function f(e){var n=e.container,t=e.toolchain,f=e.beforeRun,d=function(){var e=function(e){v!==e&&(v=e,p.emit(a.zW.STATE_CHANGE,v))};e(h?y?a.Ah.STOPPING:"none"===g?a.Ah.IDLE:a.Ah.RUNNING:a.Ah.OFFLINE)},p=(0,l.ZP)(),h=null,v=a.Ah.OFFLINE,g="none",y=!1,m=Math.random();function E(){return(E=(0,r.Z)((function(e){var r,o,u,l,y,E,T,w;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(v!==a.Ah.IDLE&&v!==a.Ah.STOPPING)throw new Error("Cannot run while state is not IDLE or STOPPING, got state: "+v);return o=Math.random(),m=o,p.emit(a.zW.LOCAL_RUN),g="before-run",d(),e||(l=(0,s.Z)(t.configs.current,[],null,(null===(u=t.configs.current)||void 0===u?void 0:u.entrypoint)||null)).length>0&&(e=l[0]),y=c.kg.timeStart({runnerId:null===e||void 0===e?void 0:e.runner.id,filePath:null===e||void 0===e?void 0:e.filePath,isInterpreter:null===e||void 0===e?void 0:e.runner.interpreter,replLanguage:null===(r=n.getContext())||void 0===r?void 0:r.repl.language}),[4,f(y,{runId:o.toString(),channelId:null===h||void 0===h?void 0:h.id,type:"shellrunner",runConfig:e})];case 1:if(i.sent(),m!==o)return[2];if("none"===g)return[2];if("server"===g)return[2];if(!h)throw new Error("State is RUNNING but shellrunner is null?");return"open"!==h.status||(g="optimistic",E={},e&&(E.runnerId=e.runner.id,E.filePath=e.filePath),T=performance.now(),h.send({runMain:E}),w=h.onCommand((function(e){if("state"===e.body){w();var n=performance.now()-T;y("run finished",{timeToRunningMs:n})}}))),[2]}}))}))).apply(this,arguments)}function T(){return(T=(0,r.Z)((function(e){return(0,i.__generator)(this,(function(n){if(v!==a.Ah.IDLE&&v!==a.Ah.RUNNING)throw new Error("Can only send input when running or idle");if(!h)throw new Error("State is not OFFLINE but shellrunner is null?");return h.send({input:e}),[2]}))}))).apply(this,arguments)}return n.openChannel({name:"shellrunner",service:"shellrun2",skip:function(e){var n,t=e.repl;return!("nix"===(n=t.language)||!0===o.ZP.usesInterpreter(n)||!1!==o.ZP.usesRunProject(n))}},(function(e){var n=e.channel;return h=n,d(),n.onCommand((function(e){if(null!=e.state){var n=e.state===u.api.State.Stopped;y&&n&&(y=!1),n?"server"===g&&(g="none"):g="server",d()}else null!=e.output?p.emit(a.zW.OUTPUT,e.output):e.hint&&p.emit(a.zW.OUTPUT,"\r\n\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n"))})),function(){g="none",y=!1,h=null,d()}})),{mode:"shellrunner",run:function(e){return E.apply(this,arguments)},stopRun:function(){if(v!==a.Ah.RUNNING)throw new Error("stopRun must be called when running but got ".concat(v));if(!h)throw new Error("State is RUNNING but shellrunner is null?");if("before-run"===g)return g="none",void d();g="none",y=!0,d(),h.send({clear:{}})},sendInput:function(e){return T.apply(this,arguments)},resizeTerminal:function(e){if(!h)throw new Error("resizeTerminal must be called when online");h.send({resizeTerm:e})},onOutput:function(e){return p.on(a.zW.OUTPUT,e),function(){p.removeListener(a.zW.OUTPUT,e)}},onLocalRun:function(e){return p.on(a.zW.LOCAL_RUN,e),function(){p.removeListener(a.zW.LOCAL_RUN,e)}},onStateChanged:function(e){return p.on(a.zW.STATE_CHANGE,e),function(){p.removeListener(a.zW.STATE_CHANGE,e)}},getRunState:function(){return v}}}var d=t(87861);var p,h=t(72006),v=t(92674),g=t.n(v),y=t(92153),m=t(66091);!function(e){e.MESSAGE="MESSAGE"}(p||(p={}));var E=function(){"use strict";function e(n){(0,m.Z)(this,e),this.buffer=new Array(n).fill(null),this.start=0,this.end=0,this.isFull=!1}var n=e.prototype;return n.write=function(e){this.buffer[this.end]=e,this.end=(this.end+1)%this.buffer.length,this.isFull&&(this.start=(this.start+1)%this.buffer.length),this.end===this.start&&(this.isFull=!0)},n.readAll=function(){return this.start!==this.end||this.isFull?this.start<this.end?this.buffer.slice(this.start,this.end).join(""):this.buffer.slice(this.start).concat(this.buffer.slice(0,this.end)).join(""):""},e}();function T(e){var n=e.maxHistorySize,t=new E(n),r=(0,l.ZP)();return{emitMessage:function(e){t.write(e),r.emit(p.MESSAGE,e)},onMessage:function(e){return r.on(p.MESSAGE,e),Promise.resolve().then((function(){return e(t.readAll())})),function(){return r.removeListener(p.MESSAGE,e)}}}}var w=t(625);function b(e){return 1e3*e.seconds+e.nanos/1e6}var S,x=4e3,R="\x1b[?25l";function Z(e){var n=e.container,t=e.toolchain,o=e.beforeRun,f=e.packager,d=e.debuggest,p=function(e){O=(0,y.ZP)(O,e)},v=function(e){var n=O.outputBlocks.find((function(n){return n.id===e}));if(!n)throw new Error("can't find block for id: ".concat(e));D.emit(a.zW.BLOCK_CHANGED,n)},m=function(){D.emit(a.zW.ALL_BLOCKS_CHANGED,O.outputBlocks)},E=function(e){O.runState!==e&&(p((function(n){n.runState=e})),D.emit(a.zW.STATE_CHANGE,e))},Z=function(){A?O.runningStage!==S.BEFORE_RUN?O.runningStage!==S.STOPPING?O.runningStage===S.NONE?E(a.Ah.IDLE):E(a.Ah.RUNNING):E(a.Ah.STOPPING):E(a.Ah.BEFORE_RUN):E(a.Ah.OFFLINE)},C=function(e,n){var t=(null!==n&&void 0!==n?n:O).outputBlocks.filter((function(n){return n.type===e})),r=t[t.length-1];if(r)return r},k=function(e,n){var t;p((function(r){var i=C(e,r);i&&(t=i.id,n(i))})),t&&v(t)},I=function(){var e=d.mainClient.current,n=null===e||void 0===e?void 0:e.state.current;return{client:e,state:n,sendInput:function(n){return null===e||void 0===e?void 0:e.sendInput(n)},stop:function(){return null===e||void 0===e?void 0:e.stop()},isRunning:"running"===n,isStopped:void 0===n||null===n||"terminated"===n}},D=(0,l.ZP)(),A=null,O={runId:g()(),runState:a.Ah.OFFLINE,runningStage:S.NONE,outputBlocks:[]},N=function(e){var n=e.packager,t=e.updateState,r=e.getRunningBlockOfType,i=e.updateRunningBlockOfType,o=e.emitBlockUpdate,u=[];return u.push(n.onOutput((function(e){var n=r(a.kH.PACKAGER);null===n||void 0===n||n.emitMessage(e.replace(/\n/g,"\n\r"))}))),u.push(n.onError((function(e){i(a.kH.PACKAGER,(function(n){n.error?n.error+="\n"+e:n.error=e}))}))),u.push(n.onStateChanged((function(e){if(e){var n=g()();t((function(e){e.outputBlocks.push((0,h.Z)({id:n,localStartTime:Date.now(),isDone:!1,type:a.kH.PACKAGER},T({maxHistorySize:x}))),e.outputBlocks.length>20&&e.outputBlocks.shift()})),o(n)}else i(a.kH.PACKAGER,(function(e){e.emitMessage(R),e.localEndTime=Date.now(),e.isDone=!0}))}))),u}({packager:f,updateState:p,getRunningBlockOfType:C,updateRunningBlockOfType:k,emitBlockUpdate:v}),_=function(e){var n,t,r=e.debuggest,i=e.updateState,o=e.updateRunningBlockOfType,u=e.getRunningBlockOfType,l=e.emitBlockUpdate,c=e.emitRunState,s=e.stopCurrentRun,f=r.mainClient.subscribe((function(e){e&&(null===t||void 0===t||t(),null===n||void 0===n||n(),t=e.state.subscribe((function(e){if("initializing"===e){s();var n=g()();i((function(e){e.outputBlocks.push((0,h.Z)({id:n,localStartTime:Date.now(),isDone:!1,type:a.kH.DEBUGGER,debugState:"paused"},T({maxHistorySize:x})))})),l(n),c(a.Ah.RUNNING)}"paused"===e&&o(a.kH.DEBUGGER,(function(e){e.debugState="paused"})),"running"===e&&o(a.kH.DEBUGGER,(function(e){e.debugState="running"})),"stopping"===e&&c(a.Ah.STOPPING),"terminated"===e&&(o(a.kH.DEBUGGER,(function(e){e.localEndTime=Date.now(),e.emitMessage(R),e.isDone=!0})),c(a.Ah.IDLE))})),n=e.onOutput((function(e){var n=u(a.kH.DEBUGGER);null===n||void 0===n||n.emitMessage(e)})))}));return[n,t,f]}({debuggest:d,updateState:p,updateRunningBlockOfType:k,getRunningBlockOfType:C,emitRunState:E,emitBlockUpdate:v,stopCurrentRun:function(){p((function(e){e.runningStage=S.BEFORE_RUN})),null===A||void 0===A||A.send({clear:{}})}}),P=n.openChannel({name:"output",service:"output"},(function(e){var t=e.channel;return A=t,Z(),t.onCommand((function(e){if(null!=e.state){var t=e.state===u.api.State.Stopped;return O.runningStage===S.STOPPING&&t&&p((function(e){e.runningStage=S.NONE})),t?O.runningStage===S.SERVER&&p((function(e){e.runningStage=S.NONE})):p((function(e){e.runningStage=S.SERVER})),void Z()}if(null!=e.outputBlockStartEvent&&null!=e.outputBlockStartEvent.measureStartTime){if(void 0!==O.outputBlocks.find((function(e){return e.type===a.kH.EXECUTION&&!e.isDone})))return;var r=e.outputBlockStartEvent.executionMode===u.api.OutputBlockStartEvent.ExecutionMode.Run?"run":"interpret",i=b(e.outputBlockStartEvent.measureStartTime),o=g()();p((function(e){e.outputBlocks.push((0,h.Z)({id:o,localStartTime:Date.now(),startTime:i,isDone:!1,type:a.kH.EXECUTION,executionMode:r},T({maxHistorySize:x}))),e.outputBlocks.length>20&&e.outputBlocks.shift()})),v(o)}if(null!=e.output){var l=C(a.kH.EXECUTION);null===l||void 0===l||l.emitMessage(e.output)}if(null!=e.stderr&&k(a.kH.EXECUTION,(function(n){n.stderr=(n.stderr||"")+e.stderr})),null!=e.error){var c=e.error;k(a.kH.EXECUTION,(function(e){e.error?e.error+="\n"+c:e.error=c}))}if(null!=e.outputBlockEndEvent&&null!=e.outputBlockEndEvent.measureEndTime){var s,f=e.outputBlockEndEvent.exitCode;(0,w.j)(w.U3.WS_CONSOLE_OUTPUT_RAN,{exitCode:f,replId:null===(s=n.getContext())||void 0===s?void 0:s.repl.id,runId:O.runId});var d=b(e.outputBlockEndEvent.measureEndTime);k(a.kH.EXECUTION,(function(e){e.emitMessage(R),e.exitCode=f,e.localEndTime=Date.now(),e.endTime=d,e.isDone=!0}))}})),function(){A=null,p((function(e){e.runId=g()(),e.runState=a.Ah.OFFLINE,e.runningStage=S.NONE,e.outputBlocks.forEach((function(e){if(!e.isDone){e.emitMessage(R),e.localEndTime=Date.now(),e.isDone=!0;var n="Connection was lost";e.error?e.error+="\n"+n:e.error=n}}))})),Z(),m()}}));function L(){return(L=(0,r.Z)((function(e){var r,u,l,f,d,v,y,m,E,T;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(O.runState!==a.Ah.IDLE&&O.runState!==a.Ah.STOPPING)throw new Error("Cannot run while state is not IDLE or STOPPING, got state: "+O.runState);return l=O.outputBlocks.length>1&&O.outputBlocks[O.outputBlocks.length-1],(0,w.j)(w.U3.WS_CONSOLE_OUTPUT_STARTED,{replId:null===(r=n.getContext())||void 0===r?void 0:r.repl.id,runId:O.runId,lastBlock:l?(0,h.Z)({type:l.type,isDone:l.isDone,endTime:l.endTime,startTime:l.startTime},l.type===a.kH.EXECUTION?{executionMode:l.executionMode,exitCode:l.exitCode,stderr:l.stderr}:{},l.type===a.kH.DEBUGGER?{debugState:l.debugState}:{}):void 0,previousBlockNumber:O.outputBlocks.length,previousBlocksAvgTimeMs:O.outputBlocks.length>1?Math.floor(O.outputBlocks.reduce((function(e,n){return n.endTime&&n.startTime?e+(n.endTime-n.startTime):e}),0)):void 0}),f=g()(),p((function(e){e.runId=f,e.runningStage=S.BEFORE_RUN})),D.emit(a.zW.LOCAL_RUN),Z(),e||(v=(0,s.Z)(t.configs.current,[],null,(null===(d=t.configs.current)||void 0===d?void 0:d.entrypoint)||null)).length>0&&(e=v[0]),y=c.kg.timeStart({runnerId:null===e||void 0===e?void 0:e.runner.id,filePath:null===e||void 0===e?void 0:e.filePath,isInterpreter:null===e||void 0===e?void 0:e.runner.interpreter,replLanguage:null===(u=n.getContext())||void 0===u?void 0:u.repl.language}),[4,o(y,{runId:f,channelId:null===A||void 0===A?void 0:A.id,type:"outputs",runConfig:e})];case 1:if(i.sent(),O.runId!==f)return[2];if(O.runningStage===S.NONE)return[2];if(O.runningStage===S.SERVER)return[2];if(!A)throw new Error("State is RUNNING but outputs is null?");return"open"!==A.status||((m=I()).isStopped||m.stop(),E={},e&&(E.runnerId=e.runner.id,E.filePath=e.filePath),A.send({runMain:E}),T=A.onCommand((function(e){"state"===e.body&&(T(),y("run finished"))}))),[2]}}))}))).apply(this,arguments)}function U(){return(U=(0,r.Z)((function(e){var n,t;return(0,i.__generator)(this,(function(r){if(n=I(),t=O.outputBlocks[O.outputBlocks.length-1].type===a.kH.DEBUGGER,n.isRunning&&t&&n.sendInput(e),O.runState!==a.Ah.IDLE&&O.runState!==a.Ah.RUNNING)throw new Error("Can only send input when running or idle");if(!A)throw new Error("State is not OFFLINE but outputs is null?");return A.send({input:e}),[2]}))}))).apply(this,arguments)}return{mode:"outputs",run:function(e){return L.apply(this,arguments)},stopRun:function(){if(O.runState===a.Ah.RUNNING){var e=I();if(!e.isStopped)return e.stop(),p((function(e){e.runningStage=S.STOPPING})),void Z();if(O.runningStage===S.BEFORE_RUN)return p((function(e){e.runningStage=S.NONE})),void Z();p((function(e){e.runningStage=S.STOPPING})),Z(),null===A||void 0===A||A.send({clear:{}})}},sendInput:function(e){return U.apply(this,arguments)},onLocalRun:function(e){return D.on(a.zW.LOCAL_RUN,e),function(){D.removeListener(a.zW.LOCAL_RUN,e)}},onStateChanged:function(e){return D.on(a.zW.STATE_CHANGE,e),function(){return D.removeListener(a.zW.STATE_CHANGE,e)}},dispose:function(){P(),_.forEach((function(e){return null===e||void 0===e?void 0:e()})),N.forEach((function(e){return null===e||void 0===e?void 0:e()}))},getRunState:function(){return O.runState},getOutputBlocks:function(){return O.outputBlocks},clearBlockHistory:function(){p((function(e){e.outputBlocks=e.outputBlocks.filter((function(e){return!e.isDone}))})),m()},onBlockChanged:function(e){return D.on(a.zW.BLOCK_CHANGED,e),function(){return D.removeListener(a.zW.BLOCK_CHANGED,e)}},onAllBlocksChanged:function(e){return D.on(a.zW.ALL_BLOCKS_CHANGED,e),function(){return D.removeListener(a.zW.ALL_BLOCKS_CHANGED,e)}},resizeTerminalForBlock:function(e,n){if(A&&"open"===A.status){var t=O.outputBlocks.find((function(n){return n.id===e}));if(!t)throw new Error("tried to resize terminal of non-existing block");t.isDone||A.send({resizeTerm:n})}},startBlock:function(e){if(e!==a.kH.UNIT_TEST)throw new Error("this API is only allowed for Autograder/UnitTest for historical reasons");var n=g()();return p((function(e){e.outputBlocks.push((0,h.Z)({id:n,localStartTime:Date.now(),isDone:!1,type:a.kH.UNIT_TEST},T({maxHistorySize:x})))})),v(n),{id:n}},endBlock:function(e){p((function(n){var t=n.outputBlocks.find((function(n){return n.id===e}));if(!t)throw new Error("couldn't find a block");if(t.type!==a.kH.UNIT_TEST)throw new Error("this API is only allowed for Autograder/UnitTest for historical reasons");t.emitMessage(R),t.localEndTime=Date.now(),t.isDone=!0})),v(e)},writeOutputToBlock:function(e,n){var t=O.outputBlocks.find((function(n){return n.id===e}));null===t||void 0===t||t.emitMessage(n)},writeErrorToBlock:function(e,n){p((function(t){var r=t.outputBlocks.find((function(n){return n.id===e}));if(!r)throw new Error("couldn't find a block");if(r.type!==a.kH.UNIT_TEST)throw new Error("this API is only allowed for Autograder/UnitTest for historical reasons");r.error?r.error+="\n"+n:r.error=n})),v(e)}}}function C(e){var n,t=e.container,o=e.toolchain,u=e.beforeRun,s=e.packager,p=e.debuggest,h=e.mode;if("shellrunner"===h)n=f({container:t,toolchain:o,beforeRun:u});else if("outputs"===h){if(!s)throw new Error("outputs mode requires packager");if(!p)throw new Error("outputs mode requires debugger");n=Z({container:t,toolchain:o,beforeRun:u,packager:s,debuggest:p})}else"html"===h&&(n=function(e){var n=e.beforeRun,t=e.container,o=function(){(function(e){s!==e&&(s=e,u.emit(a.zW.STATE_CHANGE,s))})("none"===f?a.Ah.IDLE:a.Ah.RUNNING)},u=(0,l.ZP)(),s=a.Ah.OFFLINE,f="none",p=Math.random();function h(){return(h=(0,r.Z)((function(){var e,t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:if(s!==a.Ah.IDLE&&s!==a.Ah.STOPPING)throw new Error("Cannot run while state is not IDLE or STOPPING, got state: "+s);return e=Math.random(),p=e,u.emit(a.zW.LOCAL_RUN),f="before-run",o(),t=c.kg.timeStart({replLanguage:"html"}),[4,n(t,{runId:e.toString(),type:"html"})];case 1:return r.sent(),p!==e||"none"===f||(f="running",o(),f="none",o()),[2]}}))}))).apply(this,arguments)}return t.onConnectionStateChanged((function(e){e===d.em.CONNECTED&&(f="none",o())})),{mode:"html",run:function(){return h.apply(this,arguments)},stopRun:function(){if(s!==a.Ah.RUNNING)throw new Error("stopRun must be called when running but got ".concat(s));f="none",o()},onStateChanged:function(e){return u.on(a.zW.STATE_CHANGE,e),function(){u.removeListener(a.zW.STATE_CHANGE,e)}},onLocalRun:function(e){return u.on(a.zW.LOCAL_RUN,e),function(){u.removeListener(a.zW.LOCAL_RUN,e)}},getRunState:function(){return s}}}({beforeRun:u,container:t}));if(!n)throw new Error("mode not supported: "+h);return n}!function(e){e.BEFORE_RUN="BEFORE_RUN",e.SERVER="SERVER",e.NONE="NONE",e.STOPPING="STOPPING"}(S||(S={}))},10841:function(e,n,t){var r,i,o;t.d(n,{Ah:function(){return i},kH:function(){return o},zW:function(){return r}}),function(e){e.STATE_CHANGE="STATE_CHANGE",e.OUTPUT="OUTPUT",e.LOCAL_RUN="RUN",e.BLOCK_CHANGED="BLOCK_CHANGED",e.ALL_BLOCKS_CHANGED="ALL_BLOCKS_CHANGED"}(r||(r={})),function(e){e.OFFLINE="OFFLINE",e.IDLE="IDLE",e.BEFORE_RUN="BEFORE_RUN",e.RUNNING="RUNNING",e.STOPPING="STOPPING"}(i||(i={})),function(e){e.EXECUTION="EXECUTION",e.DEBUGGER="DEBUGGER",e.PACKAGER="PACKAGER",e.UNIT_TEST="UNIT_TEST"}(o||(o={}))},73499:function(e,n,t){t.d(n,{Z:function(){return p},w:function(){return d}});var r=t(57135),i=t(57389),o=t(72006),u=t(4405),a=t(2272),l=t(96583),c=t(34489),s=t(12583),f=t(4561),d=".env";function p(e){var n=e.fs,t={id:0,ops:[],requests:[]};function p(){return(p=(0,r.Z)((function(e){var n;return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return[4,g()];case 1:return[2,(n=t.sent()[e])?{key:e,value:n}:void 0]}}))}))).apply(this,arguments)}function h(){return v.apply(this,arguments)}function v(){return v=(0,r.Z)((function(){var e;return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return e=Object.entries,[4,g()];case 1:return[2,e.apply(Object,[n.sent()]).map((function(e){var n=(0,a.Z)(e,2);return{key:n[0],value:n[1]}}))]}}))})),v.apply(this,arguments)}function g(){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)((function(){var e;return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return[4,n.readFile(d)];case 1:if((e=t.sent()).error===f.Df.NotFound)return[2,{}];if(e.error)throw e.error;return[2,c.Z.parse(e.content.toString())]}}))}))).apply(this,arguments)}function m(){return(m=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return[4,E([e])];case 1:return n.sent(),[2]}}))}))).apply(this,arguments)}function E(e,n){return T.apply(this,arguments)}function T(){return T=(0,r.Z)((function(e,n){return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return Array.isArray(e)||(e=Object.entries(e).map((function(e){var n=(0,a.Z)(e,2);return{key:n[0],value:n[1]}}))),(null===n||void 0===n?void 0:n.removeMissing)&&t.ops.push({op:"clear"}),e.forEach((function(e){return t.ops.push({op:"upsert",secret:e})})),[4,x()];case 1:return r.sent(),[2]}}))})),T.apply(this,arguments)}function w(){return(w=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return[4,b([e])];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function b(e){return S.apply(this,arguments)}function S(){return(S=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return e.forEach((function(e){return t.ops.push({op:"remove",key:e})})),[4,x()];case 1:return n.sent(),[2]}}))}))).apply(this,arguments)}function x(){return R.apply(this,arguments)}function R(){return R=(0,r.Z)((function(){var e,a,s,f,p,v,g,y,m,E,T,w,b,S,x;return(0,l.__generator)(this,(function(R){switch(R.label){case 0:return e=t.id+=1,[4,h()];case 1:if(a=R.sent(),e!==t.id)return[2,new Promise((function(e){t.requests.push(e)}))];s=a.reduce((function(e,n){return(0,u.Z)((0,o.Z)({},e),(0,i.Z)({},n.key,n.value))}),{}),f=!0,p=!1,v=void 0;try{for(g=t.ops[Symbol.iterator]();!(f=(y=g.next()).done);f=!0)switch((m=y.value).op){case"upsert":s[m.secret.key]=m.secret.value;break;case"remove":delete s[m.key];break;case"clear":E=!0,T=!1,w=void 0;try{for(b=Object.keys(s)[Symbol.iterator]();!(E=(S=b.next()).done);E=!0)x=S.value,delete s[x]}catch(Z){T=!0,w=Z}finally{try{E||null==b.return||b.return()}finally{if(T)throw w}}}}catch(Z){p=!0,v=Z}finally{try{f||null==g.return||g.return()}finally{if(p)throw v}}return t.ops=[],[4,new Promise(function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.writeFile(d,c.Z.serialize(s)).finally((function(){t.requests.forEach((function(e){return e()})),t.requests=[]}))];case 1:return r.sent(),e(),[2]}}))}));return function(n){return e.apply(this,arguments)}}())];case 2:return[2,R.sent()]}}))})),R.apply(this,arguments)}return{readSecret:function(e){return p.apply(this,arguments)},readSecrets:h,writeSecret:function(e){return m.apply(this,arguments)},writeSecrets:E,removeSecret:function(e){return w.apply(this,arguments)},removeSecrets:b,watchSecrets:function(e){var t,r=n.watchDir(s.Ql,{onChange:function(r){var i=r.find((function(e){return e.filename===d}));i&&!t&&(t=n.watchFile(d,{onChange:function(n){e.onChange(Object.entries(c.Z.parse(n.toString())).map((function(e){var n=(0,a.Z)(e,2);return{key:n[0],value:n[1]}})))},onError:function(n){var r;t=void 0,null===(r=e.onError)||void 0===r||r.call(e,n)}})),!i&&t&&(t(),t=void 0)},onError:function(){t&&(t(),t=void 0)}});return function(){t&&(t(),t=void 0),r()}}}}},25528:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(68525),i=t(76874);function o(e,n,t,o){if(!(null===e||void 0===e?void 0:e.runs))return[];var a=[];if(n=n.slice(),t){var l=n.indexOf(t);-1!==l&&(n.splice(l,1),n.splice(0,0,t))}if(o){var c=n.indexOf(o);-1!==c&&n.splice(c,1),n.splice(0,0,o)}var s=!0,f=!1,d=void 0;try{for(var p,h=n[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var v=p.value;if(v.match(/(\.[a-z0-9]+)$/)){var g=!0,y=!1,m=void 0;try{for(var E,T=e.runs[Symbol.iterator]();!(g=(E=T.next()).done);g=!0){var w=E.value;if(w.fileParam||w.optionalFileParam){var b=(0,r.rF)(w.fileTypeAttrs);null===b&&w.language&&(b=r.$R.from(w.language)),b&&(0,i.JW)(v,b)&&a.push({runner:w,filePath:v})}}}catch(I){y=!0,m=I}finally{try{g||null==T.return||T.return()}finally{if(y)throw m}}}}}catch(I){f=!0,d=I}finally{try{s||null==h.return||h.return()}finally{if(f)throw d}}var S=!0,x=!1,R=void 0;try{for(var Z,C=e.runs[Symbol.iterator]();!(S=(Z=C.next()).done);S=!0){var k=Z.value;k.fileParam||a.push({runner:k})}}catch(I){x=!0,R=I}finally{try{S||null==C.return||C.return()}finally{if(x)throw R}}return function(e){e.sort((function(e,n){var t=u(e),r=u(n);return t!==r?t-r:e.runner.interpreter===n.runner.interpreter?0:e.runner.interpreter?-1:1}))}(a),a}function u(e){var n,t,r;return(null===(n=e.runner.id)||void 0===n?void 0:n.startsWith(".replit/"))?0:(null===(t=e.runner.id)||void 0===t?void 0:t.startsWith("module:"))?1:(null===(r=e.runner.id)||void 0===r?void 0:r.startsWith("language:"))?2:3}},45285:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(50959),i=t(45827);function o(){var e=(0,r.useContext)(i.Z);if(!e)throw new Error("Expected services in context");return e}},49514:function(e,n,t){t.d(n,{K:function(){return a}});var r=t(72006),i=t(45285),o=t(50959),u=t(88541);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,i.Z)().userEvents,t=(0,u.P5)({controlName:"flag-null-diagnostics",logFlagToAnalytics:!1});return(0,o.useCallback)((function(i,o){t&&n.emit(i,(0,r.Z)({},e,o))}),[n,e,t])}},40865:function(e,n,t){t.d(n,{X:function(){return o},z:function(){return u}});var r=t(50959),i=r.createContext(null);function o(){return r.useContext(i)}var u=i.Provider},4143:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(5858),i=function(){};function o(e){var n=(0,r.e)(e);return n?n.delegateTooltip:i}},5858:function(e,n,t){t.d(n,{e:function(){return o}});var r=t(50959),i=t(40865);function o(e){var n=(0,i.X)(),t=(0,r.useCallback)((function(t){null===n||void 0===n||n.setStepTargetElement(e,t)}),[e,null===n||void 0===n?void 0:n.setStepTargetElement]);return n&&n.steps.some((function(n){return n.id===e}))?{delegateTooltip:t,isActive:!n.isLoading&&!n.isDone&&n.activeStep.id===e,activeStep:n.activeStep,done:n.done,goto:n.goto,id:n.id,isDone:n.isDone,isLoading:n.isLoading,next:n.next,prev:n.prev,restart:n.restart,steps:n.steps}:null}},69341:function(e,n,t){t.d(n,{Z:function(){return g}});var r=t(66091),i=t(5683),o=t(72006),u=t(4405),a=t(45347),l=t(74985),c=t(43182),s=t(85368),f=t(39541),d=t(50959),p=t(13424),h=t(49500),v=function(e){"use strict";(0,i.Z)(t,e);var n=(0,a.Z)(t);function t(){var e;return(0,r.Z)(this,t),(e=n.apply(this,arguments)).state={hasErrored:!1,error:null,errorInfo:null},e}var o=t.prototype;return o.componentDidCatch=function(e,n){this.setState({hasErrored:!0,error:e,errorInfo:n}),this.props.handleError(e,n),h.error(e)},o.render=function(){var e,n,t;return this.state.hasErrored?(0,l.tZ)(s.G,{css:[f.l0.font.code,f.l0.p(16),{whiteSpace:"pre",overflow:"hidden",color:"white"},f.l0.backgroundColor.blurpleDefault,f.l0.height("100%")],children:(0,l.tZ)(s.G,{children:null!==(t=null===(e=this.state)||void 0===e||null===(n=e.error)||void 0===n?void 0:n.stack)&&void 0!==t?t:"An unknown error occurred."})}):this.props.children},t}(d.Component);function g(e){var n=e.bsod,t=void 0!==n&&n,r=e.sentry,i=void 0===r||r,a=e.handleError,s=e.children,f=e.origin,d=void 0===f?"ErrorBoundary: (no origin provided)":f,h=e.tags,g=void 0===h?{}:h,y=e.extras,m=void 0===y?{}:y,E=(0,p.uV)();return(0,l.tZ)(v,{handleError:function(e,n){t?E({error:e,extras:(0,u.Z)((0,o.Z)({},m),{errorInfo:n}),tags:(0,u.Z)((0,o.Z)({},g),{errorBoundary:!0}),origin:d}):i&&c.$e((function(t){t.setTag("errorBoundary",!0),t.setTags(g),t.setExtra("errorInfo",n),t.setExtras(m),c.Tb(e)})),a&&a(e,n)},children:s})}},55340:function(e,n,t){t.d(n,{Z:function(){return h}});var r=t(74985),i=t(43312),o=t(29457),u=t(39541),a=t(85368),l=t(12583),c=t(50959),s=t(24025),f=t(45317),d=(0,i.iv)([u.l0.justify.center,u.l0.pl(8),{overflow:"hidden",height:"100%",width:"100%","> svg":{opacity:.5,width:250,display:"flex"}}]);function p(e){var n,t=e.index,i=32*t+8;return(0,r.BX)(r.HY,{children:[(0,r.tZ)("rect",{x:0,y:i,rx:"3",ry:"3",width:16,height:16}),(0,r.tZ)("rect",{x:28,y:i,rx:"3",ry:"3",width:"".concat(100+(n=t,n%2!==0?-10*n:10*n)),height:16})]})}function h(e){var n=e.path,t=n===l.Ql,i=t?5:1;c.useEffect((function(){var e=o.kg.timeStart({isRootPath:t});return function(){e("time to load filetree folder")}}),[t,n]);var u="fileTreeLoader-"+Math.random().toString();return(0,r.tZ)(a.G,{css:d,children:(0,r.tZ)(s.Z,{speed:2,backgroundColor:f.TV.backgroundHighest,foregroundColor:f.TV.backgroundHigher,height:32*i,width:250,viewBox:"0 0 250 ".concat(32*i),uniqueKey:u,children:Array(i).fill(null).map((function(e,n){return(0,r.tZ)(p,{index:n},n)}))})})}},16068:function(e,n,t){t.d(n,{st:function(){return m}});var r,i=t(72006),o=t(4405),u=t(74985),a=t(50959),l=t(70804),c=t(21371),s=t(1734),f=t(85368),d=t(61284),p=t(39541),h=t(17807),v=t(43312),g=(t(91046),t(5889),t(88541)),y=t(63128);!function(e){e.AddFile="AddFile",e.AddFolder="AddFolder",e.UploadFile="UploadFile",e.UploadFolder="UploadFolder",e.DownloadZip="DownloadZip",e.Duplicate="Duplicate",e.ShowHiddenFiles="ShowHiddenFiles",e.HideHiddenFiles="HideHiddenFiles",e.OpenTab="OpenTab",e.OpenPane="OpenPane",e.CopyLink="CopyLink",e.CopyFilePath="CopyFilePath",e.CopyFolderPath="CopyFolderPath",e.OpenShellHere="OpenShellHere",e.Rename="Rename",e.Download="Download",e.Delete="Delete",e.OpenWith="OpenWith"}(r||(r={}));var m={AddFile:{type:r.AddFile,text:"Add file"},AddFolder:{type:r.AddFolder,text:"Add folder"},UploadFile:{type:r.UploadFile,text:"Upload file"},UploadFolder:{type:r.UploadFolder,text:"Upload folder"},DownloadZip:{type:r.DownloadZip,text:"Download as zip"},Duplicate:{type:r.Duplicate,text:"Duplicate"},ShowHiddenFiles:{type:r.ShowHiddenFiles,text:"Show hidden files"},HideHiddenFiles:{type:r.HideHiddenFiles,text:"Hide hidden files"},OpenTab:{type:r.OpenTab,text:"Open tab"},OpenPane:{type:r.OpenPane,text:"Open pane"},CopyFilePath:{type:r.CopyFilePath,text:"Copy file path"},CopyFolderPath:{type:r.CopyFolderPath,text:"Copy folder path"},CopyLink:{type:r.CopyLink,text:"Copy link"},OpenShellHere:{type:r.OpenShellHere,text:"Open shell here"},Rename:{type:r.Rename,text:"Rename"},Download:{type:r.Download,text:"Download"},Delete:{type:r.Delete,text:"Delete"}},E=(p.l0.position.relative,p.l0.width(16),p.l0.height(16),{self:[p.l0.position.relative,p.l0.width(20),p.l0.height("100%"),p.l0.justify.center,{"& span":{height:"100%"}}],self2:[p.l0.position.relative,p.l0.width(16),p.l0.height("100%"),p.l0.justify.center,p.l0.pr(1)],button:[p.l0.display.flex,p.l0.align.center,p.l0.justify.center,p.l0.py(2),p.l0.top(0),p.l0.width("100%"),p.l0.border({width:0,color:"none"}),p.l0.cursor.pointer,p.l0.color.foregroundDimmest,p.l0.borderRadius(4),h.gU.filled,p.l0.position.relative,{top:-1,right:-1,height:"calc(100% + 2px)",backgroundColor:"transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}],button2:[p.l0.display.flex,p.l0.align.center,p.l0.py(2),p.l0.width("100%"),p.l0.height("100%"),p.l0.cursor.pointer,p.l0.color.foregroundDimmest,p.l0.focusRing,p.l0.borderRadius(4),{backgroundColor:"transparent",":hover":{color:p.TV.foregroundDefault}}],list:[p.l0.flex.column,p.l0.justify.center,p.l0.borderRadius(8),p.l0.zIndex(1),p.l0.backgroundColor.backgroundDefault,{listStyle:"none"},{":focus":{outline:"none"}}],option:function(e,n){return[p.l0.color.foregroundDefault,p.l0.p(8),p.l0.fontWeight.normal,p.l0.cursor.pointer,{whiteSpace:"nowrap"},n&&[p.l0.backgroundColor.backgroundHigher],e&&[{":hover":{backgroundColor:p.TV.accentNegativeDefault},":hover .option-label":{color:p.TV.white}}]]},optionLabel:function(e){return e?[p.l0.color.accentNegativeStronger]:[]}});function T(e){var n=e.isNegative,t=e.isHighlighted,r=e.children;return(0,u.tZ)(f.G,{css:E.option(n,t),children:(0,u.tZ)(d.xv,{className:"option-label",css:E.optionLabel(n),multiline:!1,children:r})})}var w=f.K.ul,b=f.K.li,S=f.K.button,x=f.K.div,R=a.forwardRef((function(e,n){var t=e.isActive,r=e.actions,h=e.onAction,v=e.onOpenChange,R=a.useRef(!1),Z=(0,c.L7)({items:r,onSelectedItemChange:function(e){var n=e.selectedItem;n&&(R.current||h(n),N())}}),C=Z.isOpen,k=Z.getToggleButtonProps,I=Z.getMenuProps,D=Z.highlightedIndex,A=Z.getItemProps,O=Z.openMenu,N=Z.reset;a.useImperativeHandle(n,(function(){return{open:O}})),a.useEffect((function(){v&&v(C)}),[C,v]);var _=k(),P=(0,g.P5)({controlName:"flag-ws-density-filetree",logFlagToAnalytics:!1});return(0,u.tZ)(f.G,{css:P?E.self2:E.self,children:(0,u.BX)(s.Z,{elevated:!0,showArrow:!0,isOpen:C,placement:"right-start",padding:0,onClickOutside:N,children:[(0,u.tZ)(y.Tg,{background:t?"default":"root",css:[p.l0.height("100%"),{background:t?p.TV.backgroundHigher:"transparent",borderTopRightRadius:8,borderBottomRightRadius:8}],children:(0,u.tZ)(S,(0,o.Z)((0,i.Z)({},_),{css:P?E.button2:E.button,size:20,onClick:function(e){e.stopPropagation(),_.onClick(e)},children:(0,u.tZ)(l.Z,{})}))}),(0,u.tZ)(x,(0,o.Z)((0,i.Z)({},I({},{suppressRefError:!0})),{children:C?(0,u.tZ)(w,{css:E.list,children:r.map((function(e,n){return(0,u.tZ)(b,(0,o.Z)((0,i.Z)({"data-cy":"filetree-node-action-".concat(e.type)},A({item:e,index:n,onClick:function(n){R.current=!0,setTimeout((function(){R.current=!1})),h(e),n.stopPropagation()}})),{children:(0,u.tZ)(T,{isHighlighted:D===n,isNegative:e.type===m.Delete.type,children:(0,u.BX)(f.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,u.tZ)(d.xv,{multiline:!1,children:e.text}),"icon"in e?e.icon:null]})})}),e.text)}))}):null}))]})})}));R.displayName="NodeActionsMenu",n.ZP=R},65057:function(e,n,t){t.d(n,{s:function(){return Xr},p:function(){return jr}});var r=t(57389),i=t(9970),o=t(74985),u=t(50959),a=t(92683),l=t(82325),c=t(13525),s=(0,u.createContext)(null);function f(e){return(0,o.tZ)(s.Provider,{value:e.store,children:e.children})}function d(){var e=(0,u.useContext)(s);if(!e)throw new Error("Expected store in context");return e}function p(e){return(0,a.Dv)(e,{store:d()})}function h(e){return(0,c.b)(e,d())}var v=function(e){return(0,a.b9)(e,{store:d()})};function g(e){return(0,l.lV)((0,u.useCallback)((function(n){return n(e)}),[e]),{store:d()})}var y=t(2272),m=t(91398),E=t(57135),T=t(96583),w=t(4561),b=t(92153),S=t(12583),x=t(87978),R=t(26289),Z=t(10628),C="No files",k="Loading...",I=t(83344);function D(e,n){return e.y+e.height===n}function A(e,n){var t=n.fromIndex;if("next"===n.dir){for(var r=t+1;r<e.length;r++){var i=e[r];if(i&&("dir"===i.type||"file"===i.type))return i}return null}for(var o=t-1;o>=0;o--){var u=e[o];if(u&&("dir"===u.type||"file"===u.type))return u}return null}function O(e,n){return n.type===w.Tv.Directory&&e.type!==w.Tv.Directory?1:e.type===w.Tv.Directory&&n.type!==w.Tv.Directory?-1:(0,x.IV)(e.filename,n.filename)}function N(e){var n=e.row,t=e.baseDepth;return"dir"===n.type||"file"===n.type||"upload"===n.type?n.path===S.Ql?0:(0,x.U$)(n.path)-1-t:n.dir===S.Ql?0:(0,x.U$)(n.dir)-t}function _(e){var n=e.row,t=N({row:n,baseDepth:e.baseDepth});switch(n.type){case"file":case"dir":case"upload":return{text:(0,x.UO)(n.path),depth:t};case"error":return{text:n.message,depth:t};case"divider":return{text:n.label,depth:t};case"create":case"emptyDir":return{text:C,depth:t}}}var P=function(e,n){return e===S.Ql?n:e+"/"+n},L=function(e,n){return e===S.Ql&&1===(0,x.U$)(n)||(0,I.pC)(e,n)};function U(e){var n=e.root,t=void 0===n?S.Ql:n,r=e.dirInfo,o=e.filter,u=e.sort,a=e.getSection,l=e.readOnly,c=e.pendingUploads,s=e.pendingMoves,f=e.pathBeingRenamed,d=e.alwaysShowCreateRow,p=[],h=(null===c||void 0===c?void 0:c.length)?function(e){var n=new Map,t=!0,r=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(t=(o=u.next()).done);t=!0){var a=o.value,l=(0,x.Il)(a.targetPath)||S.Ql,c=n.get(l),s={filename:(0,x.UO)(a.targetPath),progress:a.progress};c?c.push(s):n.set(l,[s])}}catch(f){r=!0,i=f}finally{try{t||null==u.return||u.return()}finally{if(r)throw i}}return n}(c):null,v=new Map,g=new Map;if(null===s||void 0===s?void 0:s.length){var m=!0,E=!1,T=void 0;try{for(var b,R=s[Symbol.iterator]();!(m=(b=R.next()).done);m=!0){var C=b.value,k=C.from,I=C.to;v.set(k.path,k.type),g.set(I,k.type)}}catch(D){E=!0,T=D}finally{try{m||null==R.return||R.return()}finally{if(E)throw T}}}return function e(n){var c=r.get(n);if(c&&!v.has(n)&&c.expanded)if(n!==t||!c.loading||c.children)if(c.error)p.push({type:"error",message:c.error.message,dir:n});else{var s=c.children?(0,i.Z)(c.children):void 0;s&&v.size>0&&(s=s.filter((function(e){return!v.has(P(n,e.filename))})));var m=!0,E=!1,T=void 0;try{for(var b,R=function(){var e=(0,y.Z)(b.value,2),t=e[0],r=e[1];if(!L(n,t))return"continue";var i=(0,x.UO)(t);if(null===s||void 0===s?void 0:s.some((function(e){return e.filename===i})))return"continue";s||(s=[]),s.push({filename:i,type:r})},C=g[Symbol.iterator]();!(m=(b=C.next()).done);m=!0)R()}catch(D){E=!0,T=D}finally{try{m||null==C.return||C.return()}finally{if(E)throw T}}var k=null===h||void 0===h?void 0:h.get(n);if(k){s||(s=[]);var I=!0,A=!1,O=void 0;try{for(var N,_=k[Symbol.iterator]();!(I=(N=_.next()).done);I=!0){var U=N.value,G=U.filename,B=U.progress;s.push({filename:G,type:w.Tv.File,progress:B})}}catch(D){A=!0,O=D}finally{try{I||null==_.return||_.return()}finally{if(A)throw O}}}if(s)if(c.create||k||!s||0!==s.length){var F=function(e,n){var t=n.getSection,r=[],i=new Map,o=!0,u=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value,f=t(s),d=s.progress?{type:"upload",progress:s.progress,filename:s.filename}:{type:s.type===w.Tv.File?"file":"dir",filename:s.filename};if(f){var p=i.get(f);p?p.push(d):i.set(f,[d])}else r.push(d)}}catch(D){u=!0,a=D}finally{try{o||null==c.return||c.return()}finally{if(u)throw a}}var h=!0,v=!1,g=void 0;try{for(var m,E=i[Symbol.iterator]();!(h=(m=E.next()).done);h=!0){var T=(0,y.Z)(m.value,2),b=T[0],S=T[1];r.push({type:"divider",label:b}),(0,Z.fN)(r,S)}}catch(D){v=!0,g=D}finally{try{h||null==E.return||E.return()}finally{if(v)throw g}}return r}(s.filter(o).sort(u),{getSection:n===S.Ql?a:function(){return null}}),q=-1,M=!0,z=!1,H=void 0;try{for(var W,j=function(){var t=W.value;if("error"===t.type||"emptyDir"===t.type)throw new Error("Expected dir, file, or divider row");if("divider"===t.type)return-1===q&&(q=p.length),p.push({type:"divider",dir:n,label:t.label}),"continue";var i=P(n,t.filename);if("dir"===t.type){var o={type:"dir",path:i};if(f===i&&(o.rename=!0),g.has(i)&&(o.pending=!0),p.push(o),!r.get(i))return"continue";e(i)}else if("upload"===t.type)p.push({type:"upload",path:i,progress:t.progress});else if(!k||!k.some((function(e){return e.filename===t.filename}))){var u={type:"file",path:i};f===i&&(u.rename=!0),g.has(i)&&(u.pending=!0),p.push(u)}},X=F[Symbol.iterator]();!(M=(W=X.next()).done);M=!0)j()}catch(D){z=!0,H=D}finally{try{M||null==X.return||X.return()}finally{if(z)throw H}}if(c.create||d){var K={type:"create",dir:n,fileType:c.create?c.create:void 0};-1===q?p.push(K):p.splice(q,0,K)}}else p.push({type:l?"emptyDir":"create",dir:n})}else p.push({type:"dir",path:n})}(t),p}var G,B,F,q=t(56581),M=(0,m.cn)(new Map),z=(0,m.cn)({width:0,height:0}),H=(0,m.cn)(0),W=(0,m.cn)(null),j=(0,m.cn)(new Map),X=(0,m.cn)((function(e){return null!==(G=e(te).root)&&void 0!==G?G:S.Ql})),K=(0,m.cn)(null),V=(0,m.cn)(null),Q=(0,m.cn)(void 0),Y=(0,m.cn)(null,(function(e,n,t){e(ie)||n(V,t)})),$=(0,m.cn)((function(e){var n=e(te).root,t=void 0===n?S.Ql:n;return t===S.Ql?0:(0,x.U$)(t)})),J=(0,m.cn)((function(e){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=[],r=0,o=!0,u=!1,a=void 0;try{for(var l,c=(0,i.Z)(e.values()).sort((function(e,n){return e.index-n.index}))[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value,f={height:s.height,y:s.y,cols:[]};if(t.push(f),0!==s.depth){var d=s.depth+n;d>r&&(r=d);for(var p="divider"===s.row.type||"error"===s.row.type||"create"===s.row.type||"emptyDir"===s.row.type?s.row.dir:(0,x.Il)(s.row.path),h=p.split("/"),v=0;v<(0,x.U$)(p);v++){var g=h.slice(0,Number(v+1)).join("/");f.cols.push(g)}}}}catch(q){u=!0,a=q}finally{try{o||null==c.return||c.return()}finally{if(u)throw a}}for(var m=new Map,E=n;E<r;E++){var T=[];m.set(E,T);var w=!0,b=!1,S=void 0;try{for(var R,Z=t[Symbol.iterator]();!(w=(R=Z.next()).done);w=!0){var C=R.value,k=C.cols[E],I=C.y;if(k){var A=T[T.length-1];A&&D(A,I)?A.height+=C.height:T.push({y:I,height:C.height,dir:k,depth:E-n})}}}catch(q){b=!0,S=q}finally{try{w||null==Z.return||Z.return()}finally{if(b)throw S}}}var O=[],N=!0,_=!1,P=void 0;try{for(var L,U=m[Symbol.iterator]();!(N=(L=U.next()).done);N=!0){var G,B=(0,y.Z)(L.value,2),F=(B[0],B[1]);(G=O).push.apply(G,(0,i.Z)(F))}}catch(q){_=!0,P=q}finally{try{N||null==U.return||U.return()}finally{if(_)throw P}}return O}(e(j),e($))})),ee=(0,m.cn)(!1),ne=(0,m.cn)(null,(function(e,n,t){var r=new Map,i=e(Ee),o=e($),u=!0,a=!1,l=void 0;try{for(var c,s=t.rows[Symbol.iterator]();!(u=(c=s.next()).done);u=!0){var f=c.value,d=f.key.toString(),p=i[f.index];if(p){var h=Math.max(0,N({row:p,baseDepth:o}));r.set(f.index,{y:f.start,height:f.size,index:f.index,key:d,depth:h,row:p})}}}catch(v){a=!0,l=v}finally{try{u||null==s.return||s.return()}finally{if(a)throw l}}n(j,r),n(H,t.scrollHeight)})),te=(0,m.cn)({}),re=(0,q.kv)(te,(function(e){return null!==(B=e.onContextMenu)&&void 0!==B?B:null})),ie=(0,m.cn)((function(e){return Boolean(e(te).readOnly)||!e(ee)})),oe=(0,m.cn)((function(e){return null!==(F=e(te).fontSize)&&void 0!==F?F:14})),ue=function(e,n){if("divider"===n)switch(e){case 10:return 28;case 12:case 14:return 38;case 18:return 44;default:return 48}switch(e){case 10:return 18;case 12:return 24;case 14:return 32;case 18:return 38;default:return 40}},ae=(0,m.cn)((function(e){return ue(e(oe),"file")})),le=(0,m.cn)((function(e){return function(e){switch(e){case 10:case 12:return 12;case 14:return 16;case 18:return 20;default:return 24}}(e(oe))})),ce=(0,m.cn)((function(e){return e(oe)<14?4:8})),se=(0,m.cn)((function(e){return e(oe)<=14?4:8})),fe=(0,m.cn)((function(e){return e(oe)<16?4:8})),de=(0,m.cn)((function(e){return function(e){switch(e){case 10:return 12;case 12:return 16;case 14:return 24;case 18:return 32;default:return 40}}(e(oe))})),pe=(0,m.cn)((function(e){return function(e){switch(e){case 10:return 10;case 12:case 14:return 12;case 18:return 14;default:return 18}}(e(oe))})),he=(0,m.cn)((function(e){return function(e){switch(e){case 10:case 12:return 10;case 14:case 18:return 16;default:return 20}}(e(oe))})),ve=(0,m.cn)(new Map);function ge(e){var n=e.filename;return R.nh.includes(n)?"Config files":R.uP.includes(n)?"Packager files":null}var ye=(0,m.cn)([]),me=(0,m.cn)([]),Ee=(0,m.cn)((function(e){var n,t,r=e(te),i=r.filter,o=r.alwaysShowCreateRow,u=r.root,a=void 0===u?S.Ql:u,l=r.sort,c=void 0===l?O:l,s=r.readOnly,f=void 0!==s&&s;return U({root:a,dirInfo:e(ve),filter:i,sort:c,readOnly:f,getSection:ge,pendingUploads:e(ye),pathBeingRenamed:null!==(n=e(V))&&void 0!==n?n:void 0,pendingMoves:null!==(t=e(me))&&void 0!==t?t:void 0,alwaysShowCreateRow:o})})),Te=(0,m.cn)((function(e){var n=e(W);if(!n)return null;var t=e(Ee).findIndex((function(e){return("file"===e.type||"dir"===e.type)&&e.path===n}));return-1!==t?t:null})),we=(0,m.cn)(null,(function(e,n,t){var r,i=e(Te),o=e(W);if("INPUT"!==(null===(r=document.activeElement)||void 0===r?void 0:r.tagName)&&null!==i&&null!==o){var u=e(Ee);switch(t.key){case"ArrowDown":t.preventDefault();var a=A(u,{dir:"next",fromIndex:i});return void("dir"!==(null===a||void 0===a?void 0:a.type)&&"file"!==(null===a||void 0===a?void 0:a.type)||n(W,a.path));case"ArrowUp":t.preventDefault();var l=A(u,{dir:"previous",fromIndex:i});return void("dir"!==(null===l||void 0===l?void 0:l.type)&&"file"!==(null===l||void 0===l?void 0:l.type)||n(W,l.path));case"ArrowLeft":case"ArrowRight":t.preventDefault();var c=e(ve).get(o);if(!c)return;return void("ArrowLeft"===t.key&&c.expanded?n(xe,o):"ArrowRight"!==t.key||c.expanded||n(Ze,o));case"Enter":case" ":if("Enter"===t.key&&!e(ie))return;return e(ve).has(o)?void n(Ce,o):void e(te).onFileSelect({event:t,path:o,type:"keydown"})}}})),be=(0,m.cn)(null,(function(e,n,t){var r;t.path===(null!==(r=e(te).root)&&void 0!==r?r:S.Ql)&&n(ee,!0),n(ve,(function(e){return(0,b.ZP)(e,(function(e){var n=t.path===S.Ql?null:t.path+"/",r=!0,i=!1,o=void 0;try{for(var u,a=t.children[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l,c=u.value,s=n?n+c.filename:c.filename,f=e.get(s);if(c.type===w.Tv.Directory)f||e.set(s,{expanded:!1});else f&&(null===(l=f.disposeWatcher)||void 0===l||l.call(f),e.delete(s))}}catch(p){i=!0,o=p}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}var d=e.get(t.path);d&&(d.children=t.children,d.loading=!1,d.error=void 0)}))}))})),Se=(0,m.cn)(null,(function(e,n,t){var r;t.path===(null!==(r=e(te).root)&&void 0!==r?r:S.Ql)&&n(ee,!0),n(ve,(function(e){return(0,b.ZP)(e,(function(e){var n,r=e.get(t.path);r&&(r.loading=!1,r.error=t.error,null===(n=r.disposeWatcher)||void 0===n||n.call(r),r.disposeWatcher=null)}))}))})),xe=(0,m.cn)(null,(function(e,n,t){var r=Array.isArray(t)?t:[t];n(ve,(function(e){return(0,b.ZP)(e,(function(e){var n=!0,t=!1,i=void 0;try{for(var o,u=r[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var a=o.value,l=e.get(a);l&&(l.expanded=!1,l.loading=!1,l.disposeWatcher&&(l.disposeWatcher(),l.disposeWatcher=null))}}catch(c){t=!0,i=c}finally{try{n||null==u.return||u.return()}finally{if(t)throw i}}}))}))})),Re=(0,m.cn)(null,(function(e,n,t){n(ve,(function(e){return(0,b.ZP)(e,(function(e){var n,r=e.get(t);r&&(null===(n=r.disposeWatcher)||void 0===n||n.call(r),e.delete(t))}))}))})),Ze=(0,m.cn)(null,(function(e,n,t){var r=Array.isArray(t)?t:[t],i=e(te).fs;n(ve,(function(e){return(0,b.ZP)(e,(function(e){var t=!0,o=!1,u=void 0;try{for(var a,l=function(){var t,r=a.value,o=null!==(t=e.get(r))&&void 0!==t?t:{expanded:!0};e.has(r)?o.expanded=!0:e.set(r,o),o.disposeWatcher?o.disposeWatcher():o.loading=!0,o.disposeWatcher=i.watchDir(r,{onError:function(e){return n(Se,{path:r,error:e})},onChange:function(e){return n(be,{path:r,children:e})},onMoveOrDelete:function(){return n(Re,r)}})},c=r[Symbol.iterator]();!(t=(a=c.next()).done);t=!0)l()}catch(s){o=!0,u=s}finally{try{t||null==c.return||c.return()}finally{if(o)throw u}}}))}))})),Ce=(0,m.cn)(null,(function(e,n,t){var r=e(ve).get(t);if(!r)return n(ve,(function(e){return(0,b.ZP)(e,(function(e){e.set(t,{expanded:!1})}))})),void n(Ze,t);r.expanded?n(xe,t):n(Ze,t)})),ke=(0,m.cn)((function(e){return e(te).manageWidth?e(ee)?function(e){var n=e.rows,t=e.baseDepth,r=[],i=new Map,o=!0,u=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value,f=_({row:s,baseDepth:t}),d=f.depth,p=f.text,h=i.get(d);if(h){var v=h.get(s.type);v&&(null===v||void 0===v?void 0:v.length)>p.length||h.set(s.type,p)}else i.set(d,new Map([[s.type,p]]))}}catch(N){u=!0,a=N}finally{try{o||null==c.return||c.return()}finally{if(u)throw a}}var g=!0,m=!1,E=void 0;try{for(var T,w=i[Symbol.iterator]();!(g=(T=w.next()).done);g=!0){var b=(0,y.Z)(T.value,2),S=b[0],x=b[1],R=!0,Z=!1,C=void 0;try{for(var k,I=x[Symbol.iterator]();!(R=(k=I.next()).done);R=!0){var D=(0,y.Z)(k.value,2),A=D[0],O=D[1];r.push({depth:S,type:A,text:O})}}catch(N){Z=!0,C=N}finally{try{R||null==I.return||I.return()}finally{if(Z)throw C}}}}catch(N){m=!0,E=N}finally{try{g||null==w.return||w.return()}finally{if(m)throw E}}return r}({rows:e(Ee),baseDepth:e($)}):[{type:"dir",text:k,depth:1}]:null})),Ie=(0,m.cn)(null,(function(e,n,t){var r=e(te).onCreateStart;r?r({parentPath:t.parentPath,fileType:t.fileType}):(n(Ze,t.parentPath),n(ve,(function(e){return(0,b.ZP)(e,(function(e){var n=e.get(t.parentPath);n&&(n.create=t.fileType)}))})),n(W,null))})),De=(0,m.cn)(null,(function(e,n,t){n(ve,(function(e){return(0,b.ZP)(e,(function(e){var n=e.get(t);n&&(n.create=void 0)}))}))})),Ae=(0,m.cn)(null,(function(e,n,t){var r={path:t.path,type:t.fileType};n(W,r.path),n(Pe,{node:r}),n(ve,(function(e){return(0,b.ZP)(e,(function(e){var n=e.get(t.parentPath);n&&(n.create=void 0)}))})),r.type===w.Tv.Directory&&n(Ze,r.path)})),Oe=(0,m.cn)(new Map),Ne=(0,m.cn)(null),_e=(0,m.cn)(!0),Pe=(0,m.cn)(null,(function(e,n,t){var r=t.node,i=t.mode,o=e(Ee),u=e(Ne);n(_e,!i),n(Oe,(function(e){return(0,b.ZP)(e,(function(e){!function(e,n){var t=n.node,r=n.rows,i=n.mode,o=n.anchor;if(!i)return e.clear(),void e.set(t.path,t.type);if("multi"===i&&e.has(t.path))e.delete(t.path);else if("multi"!==i){var u=t.type===w.Tv.Directory?"dir":"file",a=r.findIndex((function(e){return e.type===u&&e.path===t.path}));if(-1!==a){var l=(null===o||void 0===o?void 0:o.type)===w.Tv.Directory?"dir":"file",c=o?r.findIndex((function(e){return e.type===l&&e.path===o.path})):-1;if(-1!==c){var s=c<a?r.slice(c,a+1):r.slice(a,c+1),f=!0,d=!1,p=void 0;try{for(var h,v=r[Symbol.iterator]();!(f=(h=v.next()).done);f=!0){var g=h.value;"file"!==g.type&&"dir"!==g.type||(s.includes(g)?e.set(g.path,"file"===g.type?w.Tv.File:w.Tv.Directory):e.delete(g.path))}}catch(y){d=!0,p=y}finally{try{f||null==v.return||v.return()}finally{if(d)throw p}}}}}else e.set(t.path,t.type)}(e,{node:r,rows:o,mode:i,anchor:u})}))}));var a=e(Oe);if(!(a.size>1)){var l=!0,c=!1,s=void 0;try{for(var f,d=a[Symbol.iterator]();!(l=(f=d.next()).done);l=!0){var p=(0,y.Z)(f.value,2),h=p[0],v=p[1];n(Ne,{path:h,type:v})}}catch(g){c=!0,s=g}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}})),Le=(0,m.cn)(null,(function(e,n){n(Oe,new Map),n(_e,!0),n(Ne,null)})),Ue=(0,m.cn)(null,function(){var e=(0,E.Z)((function(e,n,t){var r,i,o;return(0,T.__generator)(this,(function(u){switch(u.label){case 0:return r=e(te).fs,[4,Promise.all(t.map(function(){var e=(0,E.Z)((function(e){var n;return(0,T.__generator)(this,(function(t){switch(t.label){case 0:return[4,r.readDir(e)];case 1:return[2,(n=t.sent()).error?n:{path:e,children:n.children,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}()))];case 1:return i=u.sent(),(o=i.filter((function(e){return null!==e.error}))).length?[2,{errors:o}]:(n(ve,(function(e){return(0,b.ZP)(e,(function(e){var n=!0,t=!1,r=void 0;try{for(var o,u=i[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var a=o.value;if(a.error)throw new Error("Unexpected error");var l=e.get(a.path);l?(l.loading=!1,l.expanded=!0,l.children=a.children,l.error=void 0):e.set(a.path,{loading:!1,expanded:!0,children:a.children,error:void 0})}}catch(c){t=!0,r=c}finally{try{n||null==u.return||u.return()}finally{if(t)throw r}}}))})),[2,{errors:null}])}}))}));return function(n,t,r){return e.apply(this,arguments)}}());var Ge=(0,m.cn)(null,function(){var e=(0,E.Z)((function(e,n,t){var r,o,u,a,l,c,s,f,d;return(0,T.__generator)(this,(function(p){switch(p.label){case 0:r=e(ve),o=[],u=!0,a=!1,l=void 0;try{for(c=function(e){var n=e.split("/");return n.pop(),[S.Ql].concat((0,i.Z)(n.map((function(e,t){return n.slice(0,t+1).join("/")}))))}(t.path)[Symbol.iterator]();!(u=(s=c.next()).done);u=!0)f=s.value,(null===(d=r.get(f))||void 0===d?void 0:d.expanded)||o.push(f)}catch(h){a=!0,l=h}finally{try{u||null==c.return||c.return()}finally{if(a)throw l}}return o.length?[4,n(Ue,o)]:[3,2];case 1:p.sent(),p.label=2;case 2:return n(Pe,{node:t}),[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),Be=(0,m.cn)(null),Fe=(0,m.cn)(null,(function(e,n,t){var r=e(Be);if(r)for(var i=e(Ee),o=0;o<i.length;o++){var u=i[o];if(("file"===u.type||"dir"===u.type)&&u.path===t){r.scrollToIndex(o);break}}}));function qe(e,n){if(n===e.path)return!1;var t=n+"/"+(0,x.UO)(e.path);return t!==e.path&&(!(0,I.yr)(e.path,n)&&!(0,I.yr)(t,e.path))}var Me,ze=(0,m.cn)(null,function(){var e=(0,E.Z)((function(e,n,t){var r,i,o,u,a,l,c,s,f;return(0,T.__generator)(this,(function(d){switch(d.label){case 0:return r=e(ve).get(t.to),(i=null===r||void 0===r?void 0:r.children)?[3,2]:[4,e(te).fs.readDir(t.to)];case 1:if((o=d.sent()).error)return[2];i=o.children,d.label=2;case 2:if(!i)throw new Error("Expected children");return u=function(e,n,t){return e.reduce((function(e,r){var i=(0,x.UO)(r.path),o=null===t||void 0===t?void 0:t.find((function(e){return e.filename===i}));return o&&e.push({type:o.type,path:n===S.Ql?o.filename:n+"/"+o.filename}),e}),[])}(t.nodes,t.to,i),(a=function(e,n){var t=(0,x.RQ)(e);return t.every((function(e){return qe(e,n)}))?t.map((function(e){var t=(0,x.UO)(e.path);return{from:e,to:n===S.Ql?t:n+"/"+t}})):null}(t.nodes,t.to))?(l=e(te).fs,u.length?u.some((function(e){return a.some((function(n){var t=n.from;return(0,I.yr)(e.path,t.path)}))}))?[2]:t.overwrite?[4,Promise.all(u.map(function(){var e=(0,E.Z)((function(e){var n;return(0,T.__generator)(this,(function(t){switch(t.label){case 0:return[4,e.type===w.Tv.Directory?l.deleteDir(e.path):l.deleteFile(e.path)];case 1:return[2,(n=t.sent()).error?{error:n.error,node:e}:null]}}))}));return function(n){return e.apply(this,arguments)}}()))]:(null===(c=e(te).onConflicts)||void 0===c||c({type:"move",nodes:t.nodes,to:t.to,conflicts:u}),[2]):[3,4]):[2];case 3:if(s=d.sent(),s.filter(Boolean).length)return[2];d.label=4;case 4:return n(me,a),[4,Promise.all(a.map(function(){var e=(0,E.Z)((function(e){var n,t,r;return(0,T.__generator)(this,(function(i){switch(i.label){case 0:return n=e.from,t=e.to,[4,n.type===w.Tv.Directory?l.moveDir(n.path,t):l.moveFile(n.path,t)];case 1:return[2,(r=i.sent()).error?{error:r.error,from:n,to:t}:null]}}))}));return function(n){return e.apply(this,arguments)}}()))];case 5:return f=d.sent(),n(me,[]),f.filter(Boolean).length?[2]:(n(Oe,new Map(a.map((function(e){return[e.to,e.from.type]})))),[2])}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),He=t(22011),We=t(50968),je=t(91669);function Xe(e){return Ke.apply(this,arguments)}function Ke(){return Ke=(0,E.Z)((function(e){var n,t,r,o,u,a,l,c,s,f,d,p;return(0,T.__generator)(this,(function(h){switch(h.label){case 0:return n=e.parentPath,t=e.overwrite,r=e.fs,o=e.files,u=e.shouldUseFileTransferAPI,a=e.onStart,l=e.onUpload,c=e.onError,s=e.onDone,f=function(){var e=(0,E.Z)((function(e){var n,i,o,a,s,f,d;return(0,T.__generator)(this,(function(p){switch(p.label){case 0:return n=e.targetPath,i=e.file,o=e.progress,t?[3,2]:[4,r.stat(n)];case 1:if(p.sent().exists)return a={file:i,path:n,error:Me.AlreadyExists},c(a),[2,a];p.label=2;case 2:s=null,p.label=3;case 3:return p.trys.push([3,5,,6]),[4,(0,je.pV)(i)];case 4:return s=p.sent(),[3,6];case 5:return p.sent(),f={file:i,path:n,error:Me.FileRead},c(f),[2,f];case 6:return d=He.Z.from(s),u?[4,r.transferFile(n,d,(function(e,n){o.current=n/e}))]:[3,8];case 7:return p.sent(),[3,10];case 8:return[4,r.writeFile(n,d)];case 9:p.sent(),p.label=10;case 10:return l({file:i,path:n}),[2,{path:n,file:i}]}}))}));return function(n){return e.apply(this,arguments)}}(),d=o.map((function(e){var t=e.dirPath||e.webkitRelativePath||e.name;return{targetPath:n?n+"/"+t:t,progress:(0,We.u)(0),file:e}})),a(d),[4,Promise.all(d.map(f))];case 1:return p=h.sent(),s({parentPath:n,uploads:p.filter((function(e){return!("error"in e)})),errors:p.reduce((function(e,n){return"error"in n?(0,i.Z)(e).concat([n]):e}),[])}),[2]}}))})),Ke.apply(this,arguments)}!function(e){e.AlreadyExists="ALREADY_EXIST",e.FileRead="FILE_READ",e.Network="NETWORK"}(Me||(Me={}));var Ve=t(29457),Qe=(0,m.cn)(null,function(){var e=(0,E.Z)((function(e,n,t){var r,o,u,a,l,c,s,f,d,p;return(0,T.__generator)(this,(function(h){switch(h.label){case 0:return r=e(te).fs,o=t.parentPath||S.Ql,u=e(ve).get(o),(a=null===u||void 0===u?void 0:u.children)?[3,2]:[4,r.readDir(o)];case 1:if((l=h.sent()).error)return[2];a=l.children,h.label=2;case 2:if(!a)throw new Error("Expected children");return c=(0,i.Z)(new Set(t.files.map((function(e){return e.dirPath?e.dirPath.split("/")[0]:e.name})))),s=a.filter((function(e){return c.some((function(n){return n===e.filename}))})),(f=s.length?s.map((function(e){return{path:o===S.Ql?e.filename:o+"/"+e.filename,type:e.type}})):null)&&!t.overwrite?(null===(d=e(te).onConflicts)||void 0===d||d({type:"upload",files:t.files,to:o,conflicts:s.map((function(e){return{path:o===S.Ql?e.filename:o+"/"+e.filename,type:e.type}}))}),[2]):f?[4,Promise.all(f.map(function(){var e=(0,E.Z)((function(e){var n;return(0,T.__generator)(this,(function(t){switch(t.label){case 0:return[4,e.type===w.Tv.Directory?r.deleteDir(e.path):r.deleteFile(e.path)];case 1:return[2,(n=t.sent()).error?{error:n.error,node:e}:null]}}))}));return function(n){return e.apply(this,arguments)}}()))]:[3,4];case 3:if(p=h.sent(),p.filter(Boolean).length)return[2];h.label=4;case 4:return Xe({parentPath:t.parentPath,files:t.files,fs:r,shouldUseFileTransferAPI:!0,onStart:function(e){n(ye,(function(n){return(0,b.ZP)(n,(function(n){var t=!0,r=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(t=(o=u.next()).done);t=!0){var a=o.value;n.push(a)}}catch(l){r=!0,i=l}finally{try{t||null==u.return||u.return()}finally{if(r)throw i}}}))}))},onUpload:function(e){n(ye,(function(n){return(0,b.ZP)(n,(function(n){var t=n.findIndex((function(n){return n.targetPath===e.path}));-1!==t&&n.splice(t,1)}))}))},onError:function(e){n(ye,(function(n){return(0,b.ZP)(n,(function(n){var t=n.findIndex((function(n){return n.targetPath===e.path}));-1!==t&&n.splice(t,1)}))}))},onDone:function(e){var n=e.errors,t=e.parentPath;n.length||Ve.kg.info("Successfully uploaded files",{uploadSource:"filetree",parentPath:t})}}),[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),Ye=t(94716),$e=t(17403),Je=t(11969),en=t(86763),nn=t.n(en),tn=t(52783),rn=$e.Type.Enum(w.Tv),on=$e.Type.Object({filename:$e.Type.String({minLength:1}),type:rn}),un=$e.Type.Object({scrollOffset:$e.Type.Number({minimum:0}),dirInfo:$e.Type.Record($e.Type.String(),$e.Type.Object({expanded:$e.Type.Boolean(),children:$e.Type.Array(on)}))});function an(e,n){return Je.Z.set(cn(e),n)}function ln(e){return n=Je.Z.get(cn(e)),tn.B4.Check(un,n)?{dirInfo:new Map(Object.entries(n.dirInfo)),scrollOffset:n.scrollOffset}:null;var n}function cn(e){return"repl:workspace:filetree:"+e}var sn=$e.Type.Array($e.Type.String()),fn="repl:workspace:filetree:savedKeys";function dn(){var e=Je.Z.get(fn);return tn.B4.Check(sn,e)?e:null}var pn=(0,q.kv)(te,(function(e){return e.localCacheKey?cn(e.localCacheKey):null})),hn=(0,m.cn)(null,(function(e){var n,t=e(te),r=t.localCacheKey,i=t.filter;if(r){var o,u=null!==(o=null===(n=e(Be))||void 0===n?void 0:n.scrollOffset)&&void 0!==o?o:0,a=e(ve),l=!1,c=!0,s=!1,f=void 0;try{for(var d,p=a[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var h=(0,y.Z)(d.value,2)[1].children;if(l=Boolean(null===h||void 0===h?void 0:h.length))break}}catch(C){s=!0,f=C}finally{try{c||null==p.return||p.return()}finally{if(s)throw f}}if(l){var v=function(e,n){var t={dirInfo:Object.create(null),scrollOffset:e.scrollOffset},r=!0,i=!1,o=void 0;try{for(var u,a=e.dirInfo[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l=(0,y.Z)(u.value,2),c=l[0],s=l[1],f=s.expanded,d=s.children;if(d){var p=d.filter(n);p.length&&(t.dirInfo[c]={expanded:f,children:p})}}}catch(C){i=!0,o=C}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return t}({dirInfo:a,scrollOffset:u},i),g=cn(r),m=dn();if(m){var E=m.filter((function(e){return e!==g}));E.unshift(g);var T=E.splice(20),w=!0,b=!1,S=void 0;try{for(var x,R=T[Symbol.iterator]();!(w=(x=R.next()).done);w=!0){var Z=x.value;Je.Z.remove(Z)}}catch(C){b=!0,S=C}finally{try{w||null==R.return||R.return()}finally{if(b)throw S}}Je.Z.set(fn,E)}else Je.Z.set(fn,[g]);return an(r,v)}}}));var vn=(0,m.cn)(null),gn=(0,m.cn)(null,(function(e,n,t){var r=[t];if(!e(_e)){var i=!0,o=!1,u=void 0;try{for(var a,l=e(Oe)[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=(0,y.Z)(a.value,2),s=c[0],f=c[1];t.path!==s&&r.push({path:s,type:f})}}catch(d){o=!0,u=d}finally{try{i||null==l.return||l.return()}finally{if(o)throw u}}}n(vn,(0,x.RQ)(r))}));function yn(){return(yn=(0,E.Z)((function(e,n){var t;return(0,T.__generator)(this,(function(r){switch(r.label){case 0:return[4,Promise.all(n.map((function(n){return n.type===w.Tv.Directory?e.deleteDir(n.path):e.deleteFile(n.path)})))];case 1:return t=r.sent(),[2,{error:t.filter((function(e){return e.error})).length?"Something went wrong deleting files":null}]}}))}))).apply(this,arguments)}function mn(){var e=h(vn),n=g(te);(0,u.useEffect)((function(){return e.subscribe((function(e){if(e){var t=n().onDeleteNodes;t&&t({nodes:e,confirm:function(){return function(e,n){return yn.apply(this,arguments)}(n().fs,e)}})}}))}),[n,e])}function En(e){var n=(0,u.useState)((function(){var n,t=(0,m.MT)();t.set(te,e);var r,i=null!==(n=e.root)&&void 0!==n?n:S.Ql,o=e.localCacheKey?ln(e.localCacheKey):null;o&&t.set(Q,o.scrollOffset);var u=null!==(r=null===o||void 0===o?void 0:o.dirInfo)&&void 0!==r?r:new Map;return u.has(i)||u.set(i,{expanded:!0}),t.set(ve,u),e.focusedPath&&t.set(W,e.focusedPath),{store:t,create:function(e,n){if(n)t.set(Ie,{parentPath:n,fileType:e});else{var r=i,o=t.get(Ne);(null===o||void 0===o?void 0:o.type)===w.Tv.File?r=(0,x.Il)(o.path)||S.Ql:(null===o||void 0===o?void 0:o.type)===w.Tv.Directory&&(r=o.path),t.set(Ie,{parentPath:r,fileType:e})}},setPresenceState:function(e){t.set(M,e)},setFileStatus:function(e){t.set(K,e)},rename:function(e){t.set(Y,e)},move:function(e){t.set(ze,e)},upload:function(e){t.set(Qe,e)},onLoad:function(n){var t=e.fs.watchDir(i,{onChange:function(){n({error:null}),t()},onError:function(e){n({error:e}),t()}});return t},select:function(e){return null===e?t.set(Le):t.set(Ge,e)},scrollToPath:function(e){return t.set(Fe,e)},hasLocalCache:Boolean(o),getChildren:function(e){var n,r;return null!==(r=null===(n=t.get(ve).get(e))||void 0===n?void 0:n.children)&&void 0!==r?r:null},getSelectedNode:function(){return t.get(Ne)},getSelectedNodes:function(){return t.get(Oe)},deleteNodes:function(e){t.set(gn,e)},collapse:function(e){return t.set(xe,e)},getExpandedDirs:function(e){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.Ql,t=new Set,r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l=(0,y.Z)(u.value,2),c=l[0],s=l[1];if(c!==n&&s.expanded)(n===S.Ql||(0,I.yr)(n,c))&&t.add(c)}}catch(f){i=!0,o=f}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return 0===t.size?null:t}(t.get(ve),e)}}})),t=n[0];(0,u.useEffect)((function(){t.store.set(te,e)}),[t.store,e]),(0,u.useEffect)((function(){var e=!0,n=!1,r=void 0;try{for(var i,o=t.store.get(ve)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var u=(0,y.Z)(i.value,2),a=u[0];u[1].expanded&&t.store.set(Ze,a)}}catch(l){n=!0,r=l}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return function(){var e=!0,n=!1,r=void 0;try{for(var i,o=t.store.get(ve)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var u,a=(0,y.Z)(i.value,2),c=(a[0],a[1]);null===(u=c.disposeWatcher)||void 0===u||u.call(c)}}catch(l){n=!0,r=l}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}}),[t.store]);var r=(0,Ye.Z)(e.onLoad);return(0,u.useEffect)((function(){return t.onLoad((function(e){var n;return null===(n=r.current)||void 0===n?void 0:n.call(r,e)}))}),[t,r]),t}var Tn=t(39541),wn=t(82568),bn=t(85368),Sn=t(42174),xn=t(81202),Rn=t.n(xn),Zn=t(79005),Cn=t(56744),kn=t(18171),In=(0,t(68973).$)(["scrollHeight","fontSize","fontSizeSmall","iconSize","horizontalPadding","borderRadius","gutterWidth","minHeight","iconTextGap","rowWidth","rowHeight","rowLeftIndent","rowY","dropPreviewDepth","dropPreviewHeight","dropPreviewY","dropPreviewOpacity","strokeDashoffset","statusColor","statusBackgroundColor","dirStatusIconSize","nodeBackgroundColor","dragPreviewX","dragPreviewY","contextMenuButtonDisplay"]),Dn=In.cssVars,An=In.styleTokens,On={paddingLeft:An.horizontalPadding,paddingRight:An.horizontalPadding},Nn={"&& svg":{minWidth:An.iconSize,minHeight:An.iconSize,width:An.iconSize,height:An.iconSize}},_n=[Tn.l0.truncate,{fontSize:An.fontSize}],Pn=t(25362),Ln=t(42256);function Un(e){var n=e.fileName,t=e.parentPath,r=t===S.Ql?"":t+"/",i=r+n,o=i.split("/");return{pathPrefix:r,newFilePath:i,segments:o}}function Gn(e){return Bn.apply(this,arguments)}function Bn(){return Bn=(0,E.Z)((function(e){var n,t,r,i,o,u,a,l,c,s,f,d,p,h,v,g,m,E,w;return(0,T.__generator)(this,(function(T){switch(T.label){case 0:if(n=e.fileName,t=e.parentPath,r=e.fs,n.startsWith("/"))return[2,"File names cannot include forward slashes"];i=Un({fileName:n,parentPath:t}),o=i.pathPrefix,u=i.newFilePath,a=i.segments,l=!0,c=!1,s=void 0,T.label=1;case 1:T.trys.push([1,7,8,9]),f=Object.entries(a)[Symbol.iterator](),T.label=2;case 2:return(l=(d=f.next()).done)?[3,6]:(p=(0,y.Z)(d.value,2),h=p[0],v=p[1],g=Number(h),m=[],g!==a.length-1?[3,4]:[4,r.stat(u)]);case 3:T.sent().exists&&m.push((0,x.UO)(u)),T.label=4;case 4:return(E=(0,Pn.z)({fileName:v,siblingNames:m,parentPath:o+a.slice(0,g).join("/")}))?[2,E]:[3,5];case 5:return l=!0,[3,2];case 6:return[3,9];case 7:return w=T.sent(),c=!0,s=w,[3,9];case 8:try{l||null==f.return||f.return()}finally{if(c)throw s}return[7];case 9:return[2,null]}}))})),Bn.apply(this,arguments)}function Fn(e){var n=Un({fileName:e.fileName,parentPath:e.parentPath}),t=n.pathPrefix,r=n.segments,i=!0,o=!1,u=void 0;try{for(var a,l=Object.entries(r)[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=(0,y.Z)(a.value,2),s=c[0],f=c[1],d=Number(s),p=(0,Pn.z)({fileName:f,siblingNames:[],parentPath:t+r.slice(0,d).join("/")});if(p)return p}}catch(h){o=!0,u=h}finally{try{i||null==l.return||l.return()}finally{if(o)throw u}}return null}function qn(e,n){return e.shiftKey?"bulk":"altKey"===n&&e.altKey||"cmdOrCtrlKey"===n&&(0,Ln.j)(e)?"multi":void 0}var Mn=(0,m.cn)(null,(function(e,n,t){var r=t.event,i=t.path;n(W,i);var o=e(te).multiselectModifierKey;n(Pe,{node:{path:i,type:w.Tv.Directory},mode:o?qn(r,o):void 0}),n(W,i),r.shiftKey||r.altKey||(0,Ln.j)(r)||n(Ce,i)}));function zn(){return p(j)}function Hn(e){return p(function(e){return(0,kn.Z)((function(){var n;return(0,m.cn)((function(t){var r;return null!==(n=null===(r=t(j).get(e))||void 0===r?void 0:r.row)&&void 0!==n?n:null}))}),[e])}(e))}function Wn(){return{fontSize:h(oe),fontSizeSmall:h(pe),iconSize:h(le),scrollHeight:h(H),horizontalPadding:h(ce),borderRadius:h(se),gutterWidth:h(he),minHeight:h(ae),iconTextGap:h(fe)}}function jn(e){return p(function(e){return(0,kn.Z)((function(){return(0,q.kv)(ve,(function(n){var t;return Boolean(null===(t=n.get(e))||void 0===t?void 0:t.loading)}))}),[e])}(e))}function Xn(e){return p(function(e){return(0,kn.Z)((function(){return(0,q.kv)(ve,(function(n){var t;return Boolean(null===(t=n.get(e))||void 0===t?void 0:t.expanded)}))}),[e])}(e))}function Kn(e){return p((0,kn.Z)((function(){return(0,q.kv)(W,(function(n){return n===e?0:-1}))}),[e]))}function Vn(){var e,n=(0,u.useRef)(null),t=p(Ee),r=function(){var e=g(Ee),n=g(oe);return(0,kn.Z)((function(){return function(t){var r=e()[t];return r?ue(n(),r.type):0}}),[e,n])}(),o=g(te),a=h(Te),l=(0,u.useRef)(p(Q)),c=(0,Zn.MG)({count:t.length,overscan:null!==(e=o().overscan)&&void 0!==e?e:100,getScrollElement:function(){return n.current},getItemKey:function(e){var n=t[e];return n?"error"===n.type?"error:"+n.dir+n.message:"divider"===n.type?"divider:"+n.dir+n.label:"emptyDir"===n.type?"emptyDir:"+n.dir:"create"===n.type?"create:"+n.dir:n.type+":"+n.path:""},estimateSize:r,rangeExtractor:function(e){var n=(0,Cn.MK)(e);return null===a.current||n.includes(a.current)||void 0===t[a.current]?n:(0,i.Z)(n).concat([a.current])}});(0,u.useEffect)((function(){l.current&&c.scrollToOffset(l.current)}),[c,l]);var s=v(ne),f=c.getVirtualItems(),d=c.getTotalSize();(0,u.useEffect)((function(){s({rows:f,scrollHeight:d})}),[s,f,d]);var y=p(ee);(0,u.useEffect)((function(){if(y){var e=function(e){null!==e&&c.getVirtualItems()[e]&&c.scrollToIndex(e,{align:"auto",behavior:"auto"})};return setTimeout((function(){return e(a.current)})),a.subscribe(e)}}),[c,a,y]);var m=v(Be);return(0,u.useEffect)((function(){m(c)}),[m,c]),{scrollRef:n,virtualizer:c}}function Qn(e){var n=(0,kn.Z)((function(){return(0,q.kv)(j,(function(n){var t,i=n.get(e);return i?{style:(t={},(0,r.Z)(t,Dn.rowHeight,i.height+"px"),(0,r.Z)(t,Dn.rowY,i.y+"px"),(0,r.Z)(t,Dn.rowLeftIndent,"calc(".concat(i.depth," * ").concat(An.gutterWidth,")")),t),depth:i.depth}:void 0}),Rn())}),[e]);return p(n)}function Yn(e){var n=e.index,t=e.path,r=(0,u.useRef)(null),i=h(W);(0,u.useEffect)((function(){var e=function(e){var n;null===(n=r.current)||void 0===n||n.setAttribute("tabIndex",e.toString())},o=function(r){e(r?r===t?0:-1:0===n?0:-1)};return o(i.current),i.subscribe(o)}),[i,t,n]),(0,u.useEffect)((function(){var e=function(e){null!==n&&clearTimeout(n),e===t&&document.activeElement!==r.current&&(n=setTimeout((function(){var e;null===(e=r.current)||void 0===e||e.focus()}),50))},n=null;e(i.current);var o=i.subscribe(e);return function(){null!==n&&clearTimeout(n),o()}}),[i,t]);var o=v(W);return[r,o]}function $n(){return v(Y)}var Jn=t(72006),et=t(4405),nt=t(83005),tt=t(48712),rt=t(13354),it=t(32104),ot=t(60141),ut=t(76735),at=t(17807),lt=t(61284),ct=t(47518),st=t(99964),ft=t(78973),dt=t(81962),pt={name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var n=e.state;n.styles.popper.width="".concat(n.rects.reference.width,"px")},effect:function(e){var n=e.state;(0,dt.Z)(n.elements.reference,HTMLElement)&&(n.elements.popper.style.width="".concat(n.elements.reference.offsetWidth,"px"))}},ht=t(27691),vt=t(66656),gt=t(63128),yt=t(34335),mt=t(49944),Et=(0,q.kv)(te,(function(e){return e.autocomplete}));var Tt=(0,wn.X)({icon:[Nn,{marginRight:An.iconTextGap}],item:[On,Tn.l0.flex.row,Tn.l0.align.center,at.gU.listItem,{height:An.rowHeight}],text:[_n,Tn.l0.flex.growAndShrink(1)]});function wt(e){var n=e.id,t=e.items,r=e.activeIndex,i=e.onSuggestion,u=e.fileType,a=e.innerRef;return(0,o.tZ)(bn.G,{tag:"ul",id:n,"aria-label":"Suggestions",innerRef:a,children:t.map((function(e,n){var t=n===r;return(0,o.BX)(bn.G,{id:e.value,tag:"li",role:"option","aria-selected":t,style:{backgroundColor:t?at.vb.interactiveBackground:void 0,color:t?Tn.TV.foregroundDefault:Tn.TV.foregroundDimmer},onClick:function(){return i(e.value)},css:Tt.item,children:[(0,o.tZ)(bn.G,{css:Tt.icon,children:u===w.Tv.Directory?(0,o.tZ)(tt.Z,{}):(0,o.tZ)(nt.Z,{path:e.value})}),(0,o.tZ)(mt.x,{css:Tt.text,text:e.value,highlight:e.highlight,dimmed:!t})]},e.value)}))})}var bt=[An.horizontalPadding,An.iconSize,An.iconTextGap].join(" + "),St=[at.gU.filled,{height:"100%",width:"100%",paddingLeft:"calc(".concat(bt,")"),paddingRight:An.horizontalPadding,fontSize:An.fontSize}];var xt=(0,wn.X)({root:[Tn.l0.flex.row,On,{padding:An.horizontalPadding}],icon:[Nn,Tn.l0.color.accentNegativeDefault,{marginRight:An.iconTextGap}],text:[{fontSize:An.fontSize},Tn.l0.color.foregroundDimmer,Tn.l0.flex.growAndShrink(1)]});function Rt(e){return(0,o.BX)(bn.G,{css:xt.root,children:[(0,o.tZ)(bn.G,{css:xt.icon,children:(0,o.tZ)(ut.Z,{})}),(0,o.tZ)(bn.G,{css:xt.text,children:e.message})]})}var Zt=(0,wn.X)({root:[Tn.l0.position.relative,Tn.l0.flex.growAndShrink(1),{height:"100%"}],icon:[Nn,Tn.l0.position.absolute,Tn.l0.left(An.horizontalPadding),Tn.l0.top("50%"),{transform:"translateY(-50%)"}],input:St,inputLoading:[St,ht.p.backgroundPulse()],menu:[Tn.l0.overflow("hidden"),{borderRadius:An.borderRadius,border:"1px solid",borderColor:Tn.TV.outlineDefault}],label:[Tn.l0.visuallyHidden]});function Ct(e){var n=(0,u.useId)(),t=(0,u.useId)(),i=function(){var e=(0,u.useRef)(null),n=Wn();(0,Sn.j)(e,n.fontSize,(function(e){return(0,r.Z)({},Dn.fontSize,e+"px")})),(0,Sn.j)(e,n.iconTextGap,(function(e){return(0,r.Z)({},Dn.iconTextGap,e+"px")})),(0,Sn.j)(e,n.borderRadius,(function(e){return(0,r.Z)({},Dn.borderRadius,e+"px")})),(0,Sn.j)(e,n.horizontalPadding,(function(e){return(0,r.Z)({},Dn.horizontalPadding,e+"px")})),(0,Sn.j)(e,n.iconSize,(function(e){return(0,r.Z)({},Dn.iconSize,e+"px")})),(0,Sn.j)(e,n.fontSize,(function(e){return(0,r.Z)({},Dn.rowHeight,ue(e,"file")+"px")})),(0,Sn.j)(e,n.iconTextGap,(function(e){return(0,r.Z)({},Dn.iconTextGap,e+"px")}));var t=(0,u.useState)(null),i=t[0],o=t[1],a=(0,u.useState)(null),l=a[0],c=a[1],s=(0,yt.D)(i,l,{modifiers:[{name:"offset",options:{offset:[0,4]}},pt],placement:"bottom-start"}),f=s.styles,d=s.attributes;return{menuRef:(0,ct.l)(e,c),menuAnchorRef:o,styles:f.popper,attributes:d.popper}}(),a=function(e){var n=e.onSuggestion,t=e.siblings,r=e.value,i=function(){c({items:[],activeIndex:null})},o=p(Et),a=(0,u.useState)({items:[],activeIndex:null}),l=a[0],c=a[1],s=(0,Ye.Z)(t),f=(0,Ye.Z)(r),d=(0,u.useTransition)()[1],h=o?function(e){d((function(){var n=o(e);c((function(e){return(0,b.ZP)(e,(function(e){e.items=n.filter((function(e){return e.value!==f.current&&!s.current.some((function(n){return n.filename===e.value}))}))}))}))}))}:null;return{items:l.items.length?l.items:null,activeIndex:l.activeIndex,query:h,onKeyDown:function(e){if("Enter"===e.key){var t=null!==l.activeIndex?l.items[l.activeIndex]:null;if(!t)return;return e.preventDefault(),n(t.value),i(),!0}return"ArrowDown"===e.key?(e.preventDefault(),c((function(e){return(0,b.ZP)(e,(function(e){null===e.activeIndex||e.activeIndex>e.items.length-1?e.activeIndex=0:e.activeIndex++}))})),!0):"ArrowUp"===e.key?(e.preventDefault(),c((function(e){return(0,b.ZP)(e,(function(e){null!==e.activeIndex?0!==e.activeIndex?e.activeIndex--:e.activeIndex=null:e.activeIndex=e.items.length-1}))})),!0):void 0},clear:i}}({onSuggestion:e.onSuggestion,siblings:e.siblings,value:e.value}),l=g(Be),c=(0,u.useState)(!0),s=c[0],f=c[1],d=(0,u.useRef)(null);(0,u.useEffect)((function(){var e;if(d.current){var n=null===(e=l())||void 0===e?void 0:e.scrollElement;if(n)return(0,ft.j)(d.current,(function(){return f(!0),function(){return f(!1)}}),{root:n})}}),[l]);var h=s&&Boolean(e.error||a.items),v=a.items&&a.activeIndex?a.items[a.activeIndex]:void 0,y=!e.error&&a.items?a.items:null,m=(0,u.useRef)(null),E=a.clear,T=(0,st.Z)((function(e){var n;(null===(n=m.current)||void 0===n?void 0:n.contains(e.target))||E()}),[E]);return(0,o.BX)(o.HY,{children:[(0,o.tZ)("label",{css:Zt.label,htmlFor:n,children:"file name"}),(0,o.BX)(bn.G,{css:Zt.root,innerRef:(0,ct.l)(m,i.menuAnchorRef),children:[(0,o.tZ)(bn.G,{css:Zt.icon,children:e.fileType===w.Tv.Directory?(0,o.tZ)(tt.Z,{}):(0,o.tZ)(nt.Z,{path:e.value})}),(0,o.tZ)("input",{"aria-controls":a.query?t:void 0,"aria-expanded":a.items?"true":"false","aria-activedescendant":null===v||void 0===v?void 0:v.value,role:a.query?"combobox":void 0,id:n,ref:(0,ct.l)(e.inputRef,d),css:e.loading?Zt.inputLoading:Zt.input,value:e.value,onChange:e.loading?void 0:function(n){var t;e.onChange(n),null===(t=a.query)||void 0===t||t.call(a,{input:n.currentTarget.value,fileType:e.fileType,type:e.type,siblings:e.siblings})},onKeyDown:function(n){a.onKeyDown(n)||e.onKeyDown(n)},onBlur:y?void 0:e.onBlur})]}),(0,o.tZ)(vt.h,{children:(0,o.BX)(gt.Tg,(0,et.Z)((0,Jn.Z)({css:Zt.menu,elevated:!0,innerRef:i.menuRef,style:(0,et.Z)((0,Jn.Z)({},i.styles),{display:h?"block":"none"})},i.attributes),{children:[e.error?(0,o.tZ)(Rt,{message:e.error}):null,y?(0,o.tZ)(wt,{id:t,innerRef:T,items:y,activeIndex:a.activeIndex,onSuggestion:function(n){e.onSuggestion(n),E()},fileType:e.fileType}):null]}))})]})}var kt=(0,wn.X)({createFilePicker:[Tn.l0.align.center,Tn.l0.rowWithGap(4),{fontSize:An.fontSize,paddingRight:An.horizontalPadding,paddingLeft:An.horizontalPadding}],button:[Tn.l0.reset.button,Tn.l0.p(2),at.gU.filled,Tn.l0.color.foregroundDimmer,{fontSize:"inherit"}],text:[_n,Tn.l0.color.foregroundDimmest],label:[Tn.l0.visuallyHidden]});function It(e){var n=function(e){var n,t,r=v(Ie),i=v(De),o=v(Ae),a=(0,u.useState)(""),l=a[0],c=a[1],s=g(te),f=(0,u.useState)(!1),d=f[0],h=f[1],y=(0,u.useState)(null),m=y[0],b=y[1],x=(0,kn.Z)((function(){return(0,q.kv)(ve,(function(n){return n.get(e)}))}),[e]),R=(0,kn.Z)((function(){return(0,q.kv)(x,(function(e){return null!==(n=null===e||void 0===e?void 0:e.create)&&void 0!==n?n:null}))}),[x]),Z=p((0,kn.Z)((function(){return(0,q.kv)(x,(function(e){return null!==(t=null===e||void 0===e?void 0:e.children)&&void 0!==t?t:null}))}),[x])),C=p(R),k=function(){var n=(0,E.Z)((function(n){var t,r,i,u,a,l,f,d;return(0,T.__generator)(this,(function(p){switch(p.label){case 0:return C?(i=s().fs,u=null,0!==n.length?[3,1]:(u="File names cannot be empty",[3,4])):[2];case 1:return n.includes("/")?[4,Gn({fileName:n,parentPath:e,fs:i})]:[3,3];case 2:return u=p.sent(),[3,4];case 3:u=(0,Pn.z)({fileName:n,siblingNames:null!==(a=null===Z||void 0===Z?void 0:Z.map((function(e){return e.filename})))&&void 0!==a?a:[],parentPath:e}),p.label=4;case 4:return u?(b(u),[2]):(l=e===S.Ql?null:e+"/",f=l?l+n:n,h(!0),C!==w.Tv.Directory?[3,6]:[4,i.createDir(f)]);case 5:return d=p.sent(),[3,8];case 6:return[4,i.writeFile(f,new He.Z(""))];case 7:d=p.sent(),p.label=8;case 8:return d.error?(b("Something went wrong"),[2]):(h(!1),c(""),o({parentPath:e,path:f,fileType:C}),null===(r=(t=s()).onCreate)||void 0===r||r.call(t,{path:f,type:C}),[2])}}))}));return function(e){return n.apply(this,arguments)}}(),I=m;if(!I&&l.includes("/"))I=Fn({fileName:l,parentPath:e});else if(!I){var D;I=(0,Pn.z)({fileName:l,siblingNames:null!==(D=null===Z||void 0===Z?void 0:Z.map((function(e){return e.filename})))&&void 0!==D?D:[],parentPath:e})}return{value:l,setValue:c,fileType:C,create:k,creating:d,error:I,cancel:(0,kn.Z)((function(){return function(){return i(e)}}),[e,i]),start:(0,kn.Z)((function(){return function(n){return r({parentPath:e,fileType:n})}}),[e,r]),siblings:Z}}(e.dir),t=(0,u.useRef)(null);return(0,u.useEffect)((function(){var e;n.fileType&&(null===(e=t.current)||void 0===e||e.focus())}),[n.fileType]),n.fileType?(0,o.tZ)(Ct,{siblings:n.siblings||[],type:"create",inputRef:t,loading:n.creating,error:n.error,value:n.value,fileType:n.fileType,onBlur:function(){n.cancel()},onChange:function(e){n.setValue(e.currentTarget.value)},onKeyDown:function(e){"Escape"!==e.key?"Enter"===e.key&&n.create(e.currentTarget.value):n.cancel()},onSuggestion:function(e){n.setValue(e),n.create(e)}}):(0,o.tZ)(Dt,{create:n.start})}function Dt(e){return(0,o.BX)(bn.G,{css:kt.createFilePicker,children:[(0,o.tZ)(bn.G,{css:kt.text,children:"Add a"}),(0,o.tZ)(bn.G,{tag:"button",css:kt.button,onClick:function(){return e.create(w.Tv.File)},children:"file"}),(0,o.tZ)(bn.G,{css:kt.text,children:"or "}),(0,o.tZ)(bn.G,{tag:"button",css:kt.button,onClick:function(){return e.create(w.Tv.Directory)},children:"folder"})]})}var At=t(75205),Ot=t(23271),Nt=t(46995),_t=t(6191),Pt=t(30826),Lt=t.n(Pt),Ut=t(19522),Gt=t(10422),Bt=t(92355),Ft=t(33024),qt=t.n(Ft);function Mt(e,n,t){return Math.floor(Math.min(n,Math.max(e,t)))}var zt=(0,m.cn)(0),Ht=(0,m.cn)(null),Wt=(0,m.cn)((function(e){var n=e(Ht);if(null===n)return null;var t=e(j),r=-1!==n?t.get(n):null;return r&&r.depth>0||"dir"===(null===r||void 0===r?void 0:r.row.type)?function(e,n){var t=e.get(n);if(!t)return null;var r=0,i=t.height,o="dir"===t.row.type?t.depth+1:t.depth;if("dir"===t.row.type)o=t.depth+1,r=t.y;else{o=t.depth;for(var u=n-1;u>=0;u--){var a=e.get(u);if(!a)break;if("dir"===a.row.type&&("file"===t.row.type||"upload"===t.row.type?L(a.row.path,t.row.path):a.row.path===t.row.dir)){i+=a.height,r=a.y;break}a.depth>=t.depth&&(i+=a.height)}}for(var l=n+1;l<e.size;l++){var c=e.get(l);if(!c)break;if(c.depth<=("dir"===t.row.type?t.depth:t.depth-1))break;i+=c.height}return{y:r,height:i,depth:o}}(t,n):{y:e(zt),depth:1,height:e(z).height-8}})),jt="(".concat(An.dropPreviewDepth," - 1) * ").concat(An.gutterWidth),Xt=(0,wn.X)({root:[Tn.l0.position.absolute,Tn.l0.top(0),Tn.l0.left(0),Tn.l0.borderRadius(8),{pointerEvents:"none",transform:"translate(calc(".concat(jt,"), ").concat(An.dropPreviewY,")"),width:"calc(100% - ".concat(jt,")"),height:An.dropPreviewHeight,opacity:An.dropPreviewOpacity,outline:"1px dashed ".concat(An.statusColor),outlineOffset:-1}]}),Kt=(0,u.memo)((function(){var e,n,t,i=h(Wt),a=h(ir),l=h(rr),c=(0,u.useRef)(null);(0,Sn.j)(c,i,(function(i){var o;return o={},(0,r.Z)(o,Dn.dropPreviewY,(null!==(e=null===i||void 0===i?void 0:i.y)&&void 0!==e?e:0)+"px"),(0,r.Z)(o,Dn.dropPreviewHeight,(null!==(n=null===i||void 0===i?void 0:i.height)&&void 0!==n?n:0)+"px"),(0,r.Z)(o,Dn.dropPreviewDepth,null!==(t=null===i||void 0===i?void 0:i.depth.toString())&&void 0!==t?t:"0"),o})),(0,Sn.j)(c,l,(function(e){return(0,r.Z)({},Dn.dropPreviewOpacity,e?"1":"0")})),(0,Sn.j)(c,a,(function(e){return(0,r.Z)({},Dn.statusColor,e?Tn.TV.accentPrimaryDefault:Tn.TV.accentNegativeDefault)}));var s=(0,Bt.T)();return(0,o.tZ)(bn.G,{style:{transition:s?void 0:"transform 140ms, width 140ms, height 140ms, opacity 140ms ease-out 60ms"},innerRef:c,css:Xt.root})})),Vt=(0,m.cn)(null,(function(e,n,t){if(null!==t){var r=!0,i=!1,o=void 0;try{for(var u,a=e(j)[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l=(0,y.Z)(u.value,2),c=l[0],s=l[1];if(!(t.y<s.y)&&!(t.y>s.y+s.height))return n(Ht,c),s}}catch(f){i=!0,o=f}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}n(Ht,-1)}})),Qt=$e.Type.Object({type:$e.Type.Literal("nodes"),width:$e.Type.Number(),height:$e.Type.Number(),nodes:$e.Type.Array($e.Type.Object({path:$e.Type.String(),type:$e.Type.Enum(w.Tv)}))});function Yt(){var e=v(Vt),n=v(Ht),t=(0,u.useRef)(null),r=(0,u.useRef)(null),i=(0,u.useRef)(null),o=g(zt),a=v(Qe),l=v(ze),c=v(ir),s=(0,u.useRef)(null),f=g(ve),d=g(X),h=v(z),m=v(Ze),E=p(ie),T=(0,y.Z)((0,At.L)((function(){return{accept:[w.Tv.File,w.Tv.Directory,_t.FILE],canDrop:function(){return!0},hover:function(n,u){var a=i.current;if(a){r.current&&function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{scrollZoneSize:{w:50,h:50},scrollVelocity:{x:50,y:50},scrollUpdateThrottle:100},r=t.scrollZoneSize,i=t.scrollVelocity,o=t.scrollUpdateThrottle,u=Lt()((function(){var t=n.getClientOffset();if(!t)return[0,0];var o=t.x,u=t.y,a=e.getBoundingClientRect(),l=a.x,c=a.y,s=a.width,f=a.height,d=Math.min(s/2,r.w),p=Math.min(f/2,r.h),h=[[c,c+p],[c+f-p,c+f]],v=function(e,n){var t=(0,y.Z)(n,2),r=t[0],i=t[1];return qt()(e,r[0],r[1])?(e-r[1])/(r[1]-r[0]):qt()(e,i[0],i[1])?(e-i[0])/(i[1]-i[0]):0};return[v(o,[[l,l+d],[l+s-d,l+s]])*i.x,v(u,h)*i.y]}),o,{trailing:!1})();if(u){var a=(0,y.Z)(u,2),l=a[0],c=a[1];if(0!==l||0!==c){var s=e.scrollLeft,f=e.scrollTop,d=e.scrollWidth,p=e.scrollHeight,h=e.clientWidth,v=e.clientHeight;requestAnimationFrame((function(){e.scrollTop=Mt(0,d-h,s+l),e.scrollTop=Mt(0,p-v,f+c)}))}}}(r.current,u);var l=u.getClientOffset();if(l){var p,h=e({x:l.x-a.x,y:l.y-a.y+o()});h?"file"===h.row.type||"upload"===h.row.type?t.current=(0,x.Il)(h.row.path)||S.Ql:"dir"===h.row.type?t.current=h.row.path:t.current=h.row.dir:t.current=d();var v="nodes"!==n.type||(0,x.RQ)(n.nodes).every((function(e){return qe(e,null!==(p=t.current)&&void 0!==p?p:d())}));if(c(v),"dir"===(null===h||void 0===h?void 0:h.row.type)){var g=h.row.path;if(s.current){if(s.current.dir===g)return;clearTimeout(s.current.timer),s.current=null}if(v){var E=setTimeout((function(){var e;(null===(e=f().get(g))||void 0===e?void 0:e.expanded)||m(g)}),200);s.current={dir:g,timer:E}}}else s.current&&(clearTimeout(s.current.timer),s.current=null)}}},drop:function(e,n){var r,i=null!==(r=t.current)&&void 0!==r?r:d();if("nodes"===e.type)return l({to:i,nodes:e.nodes}),void(t.current=null);e.dirContent.then((function(e){a({parentPath:i===S.Ql?void 0:i,files:e.filter(Boolean)})})),t.current=null},collect:function(e){return{isOver:e.isOver()}}}}),[]),2),b=T[0].isOver,R=T[1],Z=v(rr);(0,u.useEffect)((function(){if(Z(b),b){var e,o=null===(e=r.current)||void 0===e?void 0:e.getBoundingClientRect();return i.current=o?{x:o.x,y:o.y}:null,void(o&&h({width:o.width,height:o.height}))}s.current&&(clearTimeout(s.current.timer),s.current=null),t.current=null,n(null)}),[Z,b,n,h]);var C=v(zt);return(0,u.useEffect)((function(){var e=r.current;if(e){var n=Lt()((function(){C(e.scrollTop)}),200);return e.addEventListener("scroll",n),function(){n.cancel(),e.removeEventListener("scroll",n)}}}),[C]),{dropRef:E?void 0:R,containerRef:r}}var $t=(0,m.cn)(null,(function(e,n,t){n(Oe,(function(e){return(0,b.ZP)(e,(function(e){e.set(t.path,t.type)}))}));var r=[t];if(e(_e))return r;var i=!0,o=!1,u=void 0;try{for(var a,l=e(Oe)[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=(0,y.Z)(a.value,2),s=c[0],f=c[1];s!==t.path&&r.push({path:s,type:f})}}catch(d){o=!0,u=d}finally{try{i||null==l.return||l.return()}finally{if(o)throw u}}return r}));function Jt(e){var n=v(Ht),t=v($t),r=p(ie),i=(0,u.useRef)(null),o=(0,y.Z)((0,Ot.c)({type:e.type,item:function(){var n,r,o=t(e),u=null!==(r=null===(n=i.current)||void 0===n?void 0:n.getBoundingClientRect())&&void 0!==r?r:{width:160,height:32};return{nodes:o,type:"nodes",width:u.width,height:u.height}},collect:function(n){var t=n.getItem();return{isDragging:Boolean("nodes"===(null===t||void 0===t?void 0:t.type)&&t.nodes.some((function(n){return n.path===e.path})))}},end:function(){n(null)}}),3),a=o[0],l=o[1],c=o[2],s=a.isDragging;return(0,Ut.K)(c),{isDragging:s,dragRef:r?void 0:l,sizeRef:i}}var er=(0,wn.X)({root:[Tn.l0.position.absolute,{left:0,top:0,transform:"translate(".concat(An.dragPreviewX,", ").concat(An.dragPreviewY,")"),pointerEvents:"none"}],item:[Tn.l0.backgroundColor.backgroundHighest,Tn.l0.flex.row,Tn.l0.align.center,Tn.l0.shadow(3),On,{height:An.rowHeight,borderRadius:An.borderRadius}],icon:[Nn,{marginRight:An.iconTextGap}],text:[_n,Tn.l0.flex.growAndShrink(1),{color:An.statusColor}],count:[_n,Tn.l0.backgroundColor.accentPrimaryDimmest,Tn.l0.color.accentPrimaryStrongest,Tn.l0.fontWeight.medium,Tn.l0.position.absolute,Tn.l0.left("calc(50% - 4px)"),Tn.l0.top("calc(100% - 4px)"),Tn.l0.borderRadius("full"),Tn.l0.px(4),Tn.l0.center,{fontSize:An.fontSizeSmall}]}),nr=(0,u.memo)((function(e){var n=(0,u.useRef)(null),t=Wn(),i=h(tr);return(0,Sn.j)(n,i,(function(e){var n;return n={},(0,r.Z)(n,Dn.dragPreviewX,(e?e.x:0)+"px"),(0,r.Z)(n,Dn.dragPreviewY,(e?e.y:0)+"px"),n})),(0,Sn.j)(n,t.horizontalPadding,(function(e){return(0,r.Z)({},Dn.horizontalPadding,e+"px")})),(0,Sn.j)(n,t.fontSize,(function(e){return(0,r.Z)({},Dn.fontSize,e+"px")})),(0,Sn.j)(n,t.fontSizeSmall,(function(e){return(0,r.Z)({},Dn.fontSizeSmall,e+"px")})),(0,Sn.j)(n,t.iconSize,(function(e){return(0,r.Z)({},Dn.iconSize,e+"px")})),(0,Sn.j)(n,t.iconTextGap,(function(e){return(0,r.Z)({},Dn.iconTextGap,e+"px")})),(0,Sn.j)(n,t.borderRadius,(function(e){return(0,r.Z)({},Dn.borderRadius,e+"px")})),(0,Sn.j)(n,t.gutterWidth,(function(e){return(0,r.Z)({},Dn.gutterWidth,e+"px")})),(0,o.tZ)(bn.G,{innerRef:n,css:er.root,children:(0,o.BX)(bn.G,{css:er.item,style:{width:e.width,height:e.height},children:[(0,o.tZ)(bn.G,{css:er.icon,children:e.type===w.Tv.File?(0,o.tZ)(nt.Z,{path:e.path}):(0,o.tZ)(tt.Z,{})}),(0,o.tZ)(bn.G,{css:er.text,children:(0,x.UO)(e.path)}),e.count>1?(0,o.tZ)(bn.G,{css:er.count,children:e.count}):null]})})})),tr=(0,m.cn)(null),rr=((0,m.cn)((function(e){return null!==e(tr)})),(0,m.cn)(!1)),ir=(0,m.cn)(!1);function or(){var e=(0,Nt.f)((function(e){return{item:e.getItem(),isDragging:e.isDragging(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset()}})),n=e.isDragging,t=e.item,r=e.currentOffset,i=v(tr);if((0,u.useEffect)((function(){i(r?{x:r.x,y:r.y}:null)}),[i,r]),!n)return null;if(!tn.B4.Check(Qt,t))return null;var a=t.nodes,l=t.width,c=t.height,s=(0,y.Z)(a,1)[0];return s?(0,Gt.createPortal)((0,o.tZ)(nr,{type:s.type,path:s.path,count:a.length,width:l,height:c}),document.body):null}var ur=(0,wn.X)({root:[{marginLeft:"auto",paddingLeft:An.horizontalPadding}],svg:[{transform:"rotate(-90deg)",transformOrigin:"center center","& .inner-cirlce":{strokeDashoffset:An.strokeDashoffset}}]});function ar(e){var n=p(oe)/2,t=n/2,i=2*t*Math.PI,a=(0,u.useRef)(null);return(0,Sn.j)(a,e.progress,(function(e){return(0,r.Z)({},Dn.strokeDashoffset,(i-e*i).toString())})),(0,o.tZ)(bn.G,{innerRef:a,css:ur.root,children:(0,o.BX)("svg",{css:ur.svg,height:2*n,width:2*n,children:[(0,o.tZ)("circle",{fill:Tn.TV.backgroundHigher,r:n,cx:n,cy:n}),(0,o.tZ)("circle",{className:"inner-cirlce",stroke:Tn.TV.foregroundDimmest,fill:"transparent",strokeWidth:n,strokeDasharray:i+" "+i,r:t,cx:n,cy:n})]})})}var lr,cr,sr,fr=t(49760),dr=(lr={},(0,r.Z)(lr,fr.h.ADDED,"A"),(0,r.Z)(lr,fr.h.UNTRACKED,"A"),(0,r.Z)(lr,fr.h.MODIFIED,"M"),(0,r.Z)(lr,fr.h.DELETED,"D"),(0,r.Z)(lr,fr.h.RENAMED,"R"),(0,r.Z)(lr,fr.h.COPIED,"C"),lr),pr=(cr={},(0,r.Z)(cr,fr.h.ADDED,Tn.TV.greenDimmest),(0,r.Z)(cr,fr.h.UNTRACKED,Tn.TV.greenDimmest),(0,r.Z)(cr,fr.h.MODIFIED,Tn.TV.yellowDimmest),(0,r.Z)(cr,fr.h.DELETED,Tn.TV.redDimmest),(0,r.Z)(cr,fr.h.RENAMED,Tn.TV.tealDimmest),(0,r.Z)(cr,fr.h.COPIED,Tn.TV.limeDimmest),cr),hr=(sr={},(0,r.Z)(sr,fr.h.ADDED,Tn.TV.greenStrongest),(0,r.Z)(sr,fr.h.UNTRACKED,Tn.TV.greenStrongest),(0,r.Z)(sr,fr.h.MODIFIED,Tn.TV.yellowStrongest),(0,r.Z)(sr,fr.h.DELETED,Tn.TV.redStrongest),(0,r.Z)(sr,fr.h.RENAMED,Tn.TV.tealStrongest),(0,r.Z)(sr,fr.h.COPIED,Tn.TV.limeStrongest),sr);function vr(e){return e===fr.h.ADDED||e===fr.h.UNTRACKED||e===fr.h.MODIFIED||e===fr.h.DELETED||e===fr.h.RENAMED||e===fr.h.COPIED}var gr={color:An.statusColor,fontSize:An.fontSizeSmall,minWidth:An.dirStatusIconSize,height:An.dirStatusIconSize},yr=(0,wn.X)({fileIcon:[Tn.l0.fontWeight.bold,Tn.l0.px(2),Tn.l0.center,gr],directoryCountIcon:[Tn.l0.fontWeight.medium,Tn.l0.borderRadius(4),Tn.l0.px(2),Tn.l0.center,gr,{backgroundColor:An.statusBackgroundColor}]});function mr(e){return(0,o.tZ)(bn.G,{css:yr.fileIcon,children:(0,o.tZ)(bn.G,{children:e.text})})}function Er(e){return(0,o.tZ)(bn.G,{css:yr.directoryCountIcon,children:(0,o.tZ)(bn.G,{children:e.count})})}function Tr(e){return p((0,kn.Z)((function(){return(0,q.kv)(K,(function(n){return n?function(e,n){var t=null===e||void 0===e?void 0:e.get(n);if(!t)return null;var r=null;return t.worktree!==fr.h.UNMODIFIED?r=t.worktree:t.index!==fr.h.UNMODIFIED&&(r=t.index),r&&vr(r)?{color:hr[r],text:dr[r]}:null}(n,e):null}),Rn())}),[e]))}function wr(e){var n=(0,kn.Z)((function(){return(0,q.kv)(K,(function(n){return n?function(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l=(0,y.Z)(u.value,2),c=l[0],s=l[1],f=s.index,d=s.worktree;(0,I.yr)(n,c)&&t.push({path:c,index:f,worktree:d})}}catch(v){i=!0,o=v}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}if(0===t.length)return null;var p=t.every((function(e){return e.index===fr.h.ADDED||e.worktree===fr.h.UNTRACKED}))?fr.h.ADDED:fr.h.MODIFIED;if(!vr(p))return null;var h=t.length;return{color:hr[p],backgroundColor:pr[p],count:h}}(n,e):null}),Rn())}),[e]);return p(n)}function br(e){var n=(0,y.Z)(function(e){var n=g(te),t=(0,u.useState)(null),r=t[0],i=t[1],o=(0,x.Il)(e.path)||S.Ql,a=(0,x.UO)(e.path),l=v(V),c=v(W),s=(0,u.useState)(a),f=s[0],d=s[1],h=(0,u.useState)(!1),y=h[0],m=h[1],b=(0,kn.Z)((function(){return(0,q.kv)(ve,(function(e){var n;return null===(n=e.get(o))||void 0===n?void 0:n.children}))}),[o]),R=f!==a,Z=p(b),C=null;if(R&&f.includes("/"))C=Fn({fileName:f,parentPath:o});else if(R){var k;C=(0,Pn.z)({fileName:f,siblingNames:null!==(k=null===Z||void 0===Z?void 0:Z.map((function(e){return e.filename})))&&void 0!==k?k:[],parentPath:o})}var I=function(){var t=(0,E.Z)((function(t){var r,u,s,f,d,p,h;return(0,T.__generator)(this,(function(v){switch(v.label){case 0:return C?[2]:t&&t!==a?(r=n().fs,u=null,t.includes("/")?[4,Gn({fileName:t,parentPath:o,fs:r})]:[3,2]):[2];case 1:return u=v.sent(),[3,3];case 2:u=(0,Pn.z)({fileName:t,siblingNames:null!==(s=null===Z||void 0===Z?void 0:Z.map((function(e){return e.filename})))&&void 0!==s?s:[],parentPath:o}),v.label=3;case 3:return u?(i(u),[2]):(m(!0),f=o===S.Ql?null:o+"/",d=f?f+t:t,(p=(0,x.Il)(d)||S.Ql)===S.Ql?[3,6]:[4,r.stat(p)]);case 4:return v.sent().exists?[3,6]:[4,r.createDir(p)];case 5:v.sent(),v.label=6;case 6:return e.type!==w.Tv.Directory?[3,8]:[4,r.moveDir(e.path,d)];case 7:return h=v.sent(),[3,10];case 8:return[4,r.moveFile(e.path,d)];case 9:h=v.sent(),v.label=10;case 10:return h.error?(i("Something went wrong"),m(!1),[2]):(l(null),c(d),[2])}}))}));return function(e){return t.apply(this,arguments)}}();return[{canRename:Boolean(f)&&R&&!C,value:f,renaming:y,error:r||C,siblings:Z},{setValue:d,rename:I,cancel:function(){l(null),c(e.path)}}]}({path:e.path,type:e.fileType}),2),t=n[0],r=n[1],i=r.setValue,a=r.rename,l=r.cancel,c=(0,u.useRef)(null),s=(0,u.useRef)(t.value);return(0,u.useEffect)((function(){if(c.current){var e=s.current;if(e){var n=e.lastIndexOf(".");-1===n&&(n=e.length),c.current.focus(),c.current.setSelectionRange(0,n)}}}),[]),(0,o.tZ)(Ct,{siblings:t.siblings?t.siblings.filter((function(n){return n.filename!==(0,x.UO)(e.path)})):[],type:"rename",inputRef:c,loading:t.renaming,error:t.error,value:t.value,fileType:e.fileType,onBlur:function(e){t.canRename?a(e.currentTarget.value):t.error||l()},onChange:function(e){i(e.currentTarget.value)},onKeyDown:function(e){"Escape"!==e.key?"Enter"===e.key&&(t.canRename?a(e.currentTarget.value):t.error||l()):l()},onSuggestion:function(e){i(e),a(e)}})}var Sr=t(70804),xr=[Tn.l0.position.absolute,Tn.l0.top(0),Tn.l0.left(0),{width:"calc(100% - ".concat(An.rowLeftIndent,")"),height:An.rowHeight,transform:"translateY(".concat(An.rowY,")"),marginLeft:An.rowLeftIndent}],Rr=(0,wn.X)({divider:(0,i.Z)(xr).concat([On,Tn.l0.flex.growAndShrink(1),Tn.l0.justify.center]),dividerInner:[{borderTop:"1px dashed",borderColor:Tn.TV.outlineDimmest,height:"70%",justifyContent:"end"}],dividerText:[Tn.l0.truncate,Tn.l0.color.foregroundDimmer,{fontSize:An.fontSizeSmall}],error:(0,i.Z)(xr).concat([Tn.l0.rowWithGap(4),Tn.l0.align.center,On]),emptyDir:(0,i.Z)(xr).concat([On,Tn.l0.color.foregroundDimmest,Tn.l0.justify.center,{paddingLeft:An.iconSize,paddingRight:An.horizontalPadding}]),row:(0,i.Z)(xr).concat([Tn.l0.flex.growAndShrink(1),Tn.l0.flex.row,Tn.l0.align.center,at.gU.nofill,{backgroundColor:An.nodeBackgroundColor,borderRadius:An.borderRadius,cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px "+Tn.TV.accentPrimaryDefault,zIndex:1},"@media (hover: hover)":(0,r.Z)({},Dn.contextMenuButtonDisplay,"none"),"&:hover, &:active, &:focus":(0,r.Z)({},Dn.contextMenuButtonDisplay,"flex"),transitionDuration:"0ms"}]),rowContent:[Tn.l0.flex.row,Tn.l0.align.center,Tn.l0.flex.growAndShrink(1),On],uploadRow:(0,i.Z)(xr).concat([Tn.l0.flex.growAndShrink(1),Tn.l0.align.center,Tn.l0.flex.row,Tn.l0.align.center,On,{backgroundColor:An.nodeBackgroundColor,borderRadius:An.borderRadius}]),createRow:(0,i.Z)(xr).concat([Tn.l0.justify.center]),icon:[Nn,{marginRight:An.iconTextGap}],fileInput:[Tn.l0.flex.row,Tn.l0.align.center],text:[_n,Tn.l0.flex.growAndShrink(1),{color:An.statusColor}],contextMenuButton:[Tn.l0.reset.button,Tn.l0.height("100%"),Tn.l0.center,Tn.l0.cursor.pointer,at.gU.filled,Nn,{display:An.contextMenuButtonDisplay,borderRadius:"0 ".concat(An.borderRadius," ").concat(An.borderRadius," 0"),transitionDuration:"0ms"}]});function Zr(e){var n=function(e){var n=(0,kn.Z)((function(){var n;return(0,m.cn)((function(t){return null!==(n=t(M).get(e))&&void 0!==n?n:null}))}),[e]);return p(n)}(e.path),t=p(de);return(null===n||void 0===n?void 0:n.length)?(0,o.tZ)(ot.Z,{size:t,activeUsers:n}):null}function Cr(e){var n,t=(n=e.path,p((0,kn.Z)((function(){return(0,m.cn)((function(e){var t=[],r=!0,o=!1,u=void 0;try{for(var a,l=e(M)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c,s=(0,y.Z)(a.value,2),f=s[0],d=s[1];if(!(0,I.yr)(n,f))return;(c=t).push.apply(c,(0,i.Z)(d))}}catch(p){o=!0,u=p}finally{try{r||null==l.return||l.return()}finally{if(o)throw u}}return t.length?t:null}))}),[n])));return(null===t||void 0===t?void 0:t.length)?(0,o.tZ)(ot.Z,{activeUsers:t}):null}function kr(e){return(0,o.tZ)(bn.G,{title:"menu",tag:"button",css:Rr.contextMenuButton,onClick:e.onClick,children:(0,o.tZ)(Sr.Z,{})})}function Ir(e,n){var t=function(e){return h((0,kn.Z)((function(){return(0,q.kv)(Oe,(function(n){return n.has(e)}))}),[e]))}(n);(0,Sn.j)(e,t,(function(e){return(0,r.Z)({},Dn.nodeBackgroundColor,e?Tn.TV.backgroundHigher:"transparent")})),(0,u.useEffect)((function(){var n=function(n){e.current&&e.current.setAttribute("aria-selected",n?"true":"false")};return n(t.current),t.subscribe(n)}),[e,t,n])}var Dr=(0,u.memo)((function(e){var n=(0,u.useRef)(null),t=Qn(e.index),i=Xn(e.path),a=jn(e.path),l=function(e){var n=(0,u.useState)(e),t=n[0],r=n[1];return(0,u.useEffect)((function(){if(e){var n=setTimeout((function(){return r(!0)}),500);return function(){clearTimeout(n)}}r(!1)}),[e]),t}(a),c=$n(),s=p(X),f=Kn(e.path),d=function(e){var n=v(Mn);return(0,kn.Z)((function(){return function(t){n({event:t,path:e})}}),[n,e])}(e.path),h=(0,y.Z)(Yn({path:e.path,index:e.index}),2),g=h[0],m=h[1],E=e.path===s&&a,T=E?k:(0,x.UO)(e.path),b=Jt({path:e.path,type:w.Tv.Directory}),S=b.dragRef,R=b.sizeRef,Z=b.isDragging;Ir(n,e.path);var C,I,D,A=wr(e.path),O=p(re);return(0,o.BX)(bn.G,{style:(0,et.Z)((0,Jn.Z)({},null===t||void 0===t?void 0:t.style),(D={},(0,r.Z)(D,Dn.statusColor,null!==(C=null===A||void 0===A?void 0:A.color)&&void 0!==C?C:Tn.TV.foregroundDimmer),(0,r.Z)(D,Dn.statusBackgroundColor,null===A||void 0===A?void 0:A.backgroundColor),(0,r.Z)(D,"opacity",Z?.1:void 0),D)),tabIndex:f,role:"treeitem","aria-label":T,dataCy:"filetree-entity","aria-expanded":i,"aria-level":(null!==(I=null===t||void 0===t?void 0:t.depth)&&void 0!==I?I:0)+1,css:Rr.row,onFocus:function(){return m(e.path)},innerRef:(0,ct.l)(n,g,R,e.pending?void 0:S),onContextMenu:O?function(n){O(n,{path:e.path,type:w.Tv.Directory})}:void 0,onKeyDown:e.pending?void 0:function(n){"Enter"===n.key&&c(e.path)},onClick:e.pending?void 0:function(e){e.currentTarget===e.target&&d(e)},children:[(0,o.BX)(bn.G,{title:e.path,css:Rr.rowContent,onClick:e.pending?void 0:d,children:[(0,o.tZ)(bn.G,{css:Rr.icon,children:E||l&&!i?(0,o.tZ)(it.Z,{}):(0,o.tZ)(o.HY,{children:i?(0,o.tZ)(rt.Z,{}):(0,o.tZ)(tt.Z,{})})}),(0,o.tZ)(bn.G,{css:Rr.text,children:T}),A?(0,o.tZ)(Er,{count:A.count}):null,i?null:(0,o.tZ)(Cr,{path:e.path})]}),O?(0,o.tZ)(kr,{onClick:function(n){O(n,{path:e.path,type:w.Tv.Directory})}}):null]})})),Ar=(0,u.memo)((function(e){var n=(0,u.useRef)(null),t=Qn(e.index),i=function(e){var n=g(te),t=v(Pe),r=v(W);return(0,kn.Z)((function(){return{onClick:function(i){var o=n(),u=o.onFileSelect,a=o.multiselectModifierKey,l=a?qn(i,a):void 0;t({node:{path:e,type:w.Tv.File},mode:l}),r(e),l||u({path:e,event:i,type:"click"})},onDoubleClick:function(t){var r=n().onFileDoubleClick;null===r||void 0===r||r(t,e)}}}),[e,n,r,t])}(e.path),a=i.onClick,l=i.onDoubleClick,c=Kn(e.path),s=$n(),f=(0,y.Z)(Yn({path:e.path,index:e.index}),2),d=f[0],h=f[1],m=(0,x.UO)(e.path),E=Jt({path:e.path,type:w.Tv.File}),T=E.dragRef,b=E.sizeRef,S=E.isDragging;Ir(n,e.path);var R,Z,C,k=Tr(e.path),I=p(re);return(0,o.BX)(bn.G,{style:(0,et.Z)((0,Jn.Z)({},null===t||void 0===t?void 0:t.style),(C={},(0,r.Z)(C,Dn.statusColor,null!==(R=null===k||void 0===k?void 0:k.color)&&void 0!==R?R:Tn.TV.foregroundDimmer),(0,r.Z)(C,"opacity",S?.1:void 0),C)),tabIndex:c,dataCy:"filetree-entity",css:Rr.row,onFocus:function(){return h(e.path)},innerRef:(0,ct.l)(n,d,b,e.pending?void 0:T),role:"treeitem","aria-label":m,"aria-level":(null!==(Z=null===t||void 0===t?void 0:t.depth)&&void 0!==Z?Z:0)+1,onDoubleClick:e.pending?void 0:l,onContextMenu:I?function(n){I(n,{path:e.path,type:w.Tv.File})}:void 0,onKeyDown:e.pending?void 0:function(n){"Enter"===n.key&&s(e.path)},onClick:e.pending?void 0:function(e){e.currentTarget===e.target&&a(e)},children:[(0,o.BX)(bn.G,{title:e.path,css:Rr.rowContent,onClick:e.pending?void 0:a,children:[(0,o.tZ)(bn.G,{css:Rr.icon,children:(0,o.tZ)(nt.Z,{path:e.path})}),(0,o.tZ)(bn.G,{css:Rr.text,children:m}),k?(0,o.tZ)(mr,{text:k.text}):null,(0,o.tZ)(Zr,{path:e.path})]}),I?(0,o.tZ)(kr,{onClick:function(n){I(n,{path:e.path,type:w.Tv.File})}}):null]})})),Or=(0,u.memo)((function(e){var n=Qn(e.index);return(0,o.tZ)(bn.G,{css:Rr.divider,style:null===n||void 0===n?void 0:n.style,role:"treeitem",children:(0,o.tZ)(bn.G,{css:Rr.dividerInner,children:(0,o.tZ)(bn.G,{css:Rr.dividerText,children:e.label})})})})),Nr=(0,u.memo)((function(e){var n=Qn(e.index);return(0,o.BX)(bn.G,{css:Rr.error,style:null===n||void 0===n?void 0:n.style,role:"treeitem",children:[(0,o.tZ)(ut.Z,{}),(0,o.tZ)(lt.xv,{multiline:!1,children:e.message})]})})),_r=(0,u.memo)((function(e){var n=Qn(e.index);return(0,o.tZ)(bn.G,{css:Rr.emptyDir,style:null===n||void 0===n?void 0:n.style,role:"treeitem",children:(0,o.tZ)(bn.G,{css:Rr.text,children:C})})})),Pr=(0,u.memo)((function(e){var n=Qn(e.index);return(0,o.tZ)(bn.G,{css:Rr.createRow,style:null===n||void 0===n?void 0:n.style,role:"treeitem",children:(0,o.tZ)(It,{dir:e.dir})})})),Lr=(0,u.memo)((function(e){var n=Qn(e.index),t=(0,x.UO)(e.path);return(0,o.tZ)(bn.G,{style:null===n||void 0===n?void 0:n.style,css:Rr.createRow,role:"treeitem","aria-label":t,children:(0,o.tZ)(br,{path:e.path,fileType:e.fileType})})})),Ur=(0,u.memo)((function(e){var n=Qn(e.index),t=(0,x.UO)(e.path);return(0,o.BX)(bn.G,{style:null===n||void 0===n?void 0:n.style,css:Rr.uploadRow,role:"treeitem","aria-label":t,children:[(0,o.tZ)(bn.G,{css:Rr.icon,children:(0,o.tZ)(nt.Z,{path:e.path})}),(0,o.tZ)(bn.G,{css:Rr.text,children:t}),(0,o.tZ)(ar,{progress:e.progress})]})})),Gr=(0,u.memo)((function(e){var n=Hn(e.index);return n?"error"===n.type?(0,o.tZ)(Nr,{index:e.index,message:n.message}):"divider"===n.type?(0,o.tZ)(Or,{index:e.index,label:n.label}):"emptyDir"===n.type?(0,o.tZ)(_r,{index:e.index}):"create"===n.type?(0,o.tZ)(Pr,{index:e.index,dir:n.dir}):"upload"===n.type?(0,o.tZ)(Ur,{index:e.index,path:n.path,progress:n.progress}):n.rename?(0,o.tZ)(Lr,{index:e.index,path:n.path,fileType:"file"===n.type?w.Tv.File:w.Tv.Directory}):"file"===n.type?(0,o.tZ)(Ar,{index:e.index,path:n.path,pending:Boolean(n.pending)}):(0,o.tZ)(Dr,{index:e.index,path:n.path,pending:Boolean(n.pending)}):null})),Br=[An.horizontalPadding,An.rowLeftIndent,An.iconSize,An.iconTextGap].join(" + "),Fr=(0,wn.X)({root:[Tn.l0.overflow("hidden"),Tn.l0.height(0),{pointerEvents:"none"}],file:[{paddingLeft:"calc(".concat(Br,")"),paddingRight:An.horizontalPadding}]}),qr=(0,u.memo)((function(){var e=p(ke);return e?(0,o.tZ)(bn.G,{css:Fr.root,children:e.map((function(e){var n=e.type,t=e.text,i=e.depth,u=(0,r.Z)({},Dn.rowLeftIndent,"calc(".concat(i," * ").concat(An.gutterWidth,")")),a=n+i;return"divider"===n?(0,o.tZ)(bn.G,{style:u,css:Rr.dividerInner,children:(0,o.tZ)(lt.xv,{css:Rr.dividerInner,multiline:!1,children:t.toUpperCase()})},a):(0,o.tZ)(bn.G,{css:Fr.file,style:u,children:"create"===n?(0,o.tZ)(Dt,{create:function(){}}):(0,o.tZ)(bn.G,{css:Rr.text,children:t.toUpperCase()})},a)}))}):null})),Mr=(0,wn.X)({content:[Tn.l0.p(2),Tn.l0.position.relative,{overflowY:"auto",height:"100%",minHeight:An.minHeight}],scroll:[{position:"relative",height:An.scrollHeight}],root:[Tn.l0.rowWithGap(0),Tn.l0.align.center],gutter:[Tn.l0.position.absolute,Tn.l0.top(0),Tn.l0.left(0),Tn.l0.reset.button,Tn.l0.align.end,Tn.l0.cursor.pointer,{width:An.gutterWidth,"& > div":[Tn.l0.height("100%"),Tn.l0.width(1),{marginRight:"25%",opacity:.2,backgroundColor:Tn.TV.foregroundDimmest}],"&:hover > div":{backgroundColor:Tn.TV.accentPrimaryDefault,opacity:1}}]});var zr=(0,u.memo)((function(e){var n=zn(),t=Wn();(0,Sn.j)(e.scrollRef,t.fontSize,(function(e){var n;return n={},(0,r.Z)(n,Dn.fontSize,e+"px"),(0,r.Z)(n,Dn.dirStatusIconSize,e+"px"),n})),(0,Sn.j)(e.scrollRef,t.fontSizeSmall,(function(e){return(0,r.Z)({},Dn.fontSizeSmall,e+"px")})),(0,Sn.j)(e.scrollRef,t.iconSize,(function(e){return(0,r.Z)({},Dn.iconSize,e+"px")})),(0,Sn.j)(e.scrollRef,t.iconTextGap,(function(e){return(0,r.Z)({},Dn.iconTextGap,e+"px")})),(0,Sn.j)(e.scrollRef,t.horizontalPadding,(function(e){return(0,r.Z)({},Dn.horizontalPadding,e+"px")})),(0,Sn.j)(e.scrollRef,t.borderRadius,(function(e){return(0,r.Z)({},Dn.borderRadius,e+"px")})),(0,Sn.j)(e.scrollRef,t.scrollHeight,(function(e){return(0,r.Z)({},Dn.scrollHeight,e+"px")})),(0,Sn.j)(e.scrollRef,t.gutterWidth,(function(e){return(0,r.Z)({},Dn.gutterWidth,e+"px")})),(0,Sn.j)(e.scrollRef,t.minHeight,(function(e){return(0,r.Z)({},Dn.minHeight,e+"px")}));var a=v(we),l=Yt(),c=l.dropRef,s=l.containerRef,f=v(Le),d=p(re),h=p(X);return function(){var e,n=zn(),t=v(Fe),r=null===(e=p(Ne))||void 0===e?void 0:e.path,i=(0,Ye.Z)(r);(0,u.useEffect)((function(){i.current=r}),[r,i]),(0,u.useEffect)((function(){i.current&&(t(i.current),i.current=void 0)}),[n,t,i])}(),(0,o.BX)(bn.G,{css:Mr.content,innerRef:(0,ct.l)(e.scrollRef,c,s),onKeyDown:a,onContextMenu:d?function(e){e.target===e.currentTarget&&d(e,{type:w.Tv.Directory,path:h})}:void 0,onClick:function(e){e.target===e.currentTarget&&f()},children:[(0,o.tZ)(qr,{}),(0,o.BX)(bn.G,{css:Mr.scroll,role:"tree",children:[(0,i.Z)(n.values()).map((function(e){var n=e.key,t=e.index;return(0,o.tZ)(Gr,{index:t},n)})),(0,o.tZ)(Wr,{}),(0,o.tZ)(Kt,{}),(0,o.tZ)(or,{})]})]})})),Hr=(0,u.memo)((function(){var e=Vn().scrollRef;return mn(),function(){var e=p(pn),n=h(ve),t=v(hn);(0,u.useEffect)((function(){if(e){var r,i,o=null,u=null!==(r=window.requestIdleCallback)&&void 0!==r?r:window.requestAnimationFrame,a=null!==(i=window.cancelIdleCallback)&&void 0!==i?i:window.cancelAnimationFrame,l=nn()((function(){o&&a(o),o=u(t)}),1e3),c=n.subscribe(l);return document.addEventListener("visibilitychange",t),document.addEventListener("beforeunload",t),function(){l.cancel(),o&&a(o),document.removeEventListener("visibilitychange",t),document.removeEventListener("beforeunload",t),c(),t()}}}),[e,n,t])}(),(0,o.tZ)(zr,{scrollRef:e})})),Wr=(0,u.memo)((function(){var e=p(J),n=v(xe);return(0,o.tZ)(o.HY,{children:e.map((function(e){return(0,o.tZ)(bn.G,{tag:"button",onClick:function(){return n(e.dir)},css:Mr.gutter,style:{height:e.height,transform:"translate(calc(".concat(e.depth," * ").concat(An.gutterWidth,"), ").concat(e.y,"px)")},children:(0,o.tZ)(bn.G,{})},"gutter"+e.dir+e.depth+e.y)}))})}));function jr(e){return En(e)}function Xr(e){return(0,o.tZ)(f,{store:e.store,children:(0,o.tZ)(Hr,{})})}},13902:function(e,n,t){t.d(n,{FH:function(){return d},MY:function(){return T},WS:function(){return v},WU:function(){return s},em:function(){return g},fN:function(){return E},j3:function(){return h},mJ:function(){return p},mV:function(){return f},tz:function(){return y}});var r=t(2272),i=t(18171),o=t(92153),u=t(91398),a=t(56581),l=t(29203),c=(0,u.cn)(new Map),s=(0,u.cn)(null,(function(e,n,t){var r=t.messageId,i=t.abortController,u=(0,o.ZP)(e(c),(function(e){e.set(r,i)}));n(c,u)})),f=(0,u.cn)(null,(function(e,n,t){var r=t.messageId,i=(0,o.ZP)(e(c),(function(e){e.delete(r)}));n(c,i)})),d=(0,u.cn)(null,(function(e,n,t){var r,i=t.messageId;null===(r=e(c).get(i))||void 0===r||r.abort(),n(f,{messageId:i})})),p=(0,u.cn)(null,(function(e,n){var t=(0,o.ZP)(e(c),(function(e){var n=!0,t=!1,i=void 0;try{for(var o,u=e.entries()[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var a=(0,r.Z)(o.value,2);a[0];a[1].abort()}}catch(l){t=!0,i=l}finally{try{n||null==u.return||u.return()}finally{if(t)throw i}}e.clear()}));n(c,t)})),h=function(){return(0,l.c1)(c).size>0},v=function(e){return(0,l.c1)((0,i.Z)((function(){return(0,a.kv)(c,(function(n){return Boolean(e&&n.has(e.id))}))}),[e]))},g=function(){return(0,l.$X)(p)},y=function(){return(0,l.$X)(d)},m=(0,u.cn)(new Set),E=(0,u.cn)(null,(function(e,n,t){var r=t.message,i=r.id,u=r.loading,a=(0,o.ZP)(e(m),(function(e){u?e.add(i):e.delete(i)}));n(m,a)})),T=function(){return(0,l.c1)(m).size>0}},40207:function(e,n,t){t.d(n,{Cd:function(){return g},KI:function(){return p},Og:function(){return h},Oy:function(){return v},RN:function(){return c},YY:function(){return f},d$:function(){return l},nE:function(){return a},wK:function(){return d}});var r=t(72006),i=t(91398),o=t(92153),u=t(29203),a=(0,i.cn)(!1),l=function(){return(0,u.c1)(a)},c=function(){return(0,u.wM)(a)},s=(0,i.cn)({}),f=(0,i.cn)(null,(function(e,n,t){var i=t.id,u=t.debugInfo,a=e(s),l=(0,o.ZP)(a,(function(e){e[i]||(e[i]={}),e[i]=(0,r.Z)({},e[i],u)}));n(s,l)})),d=function(e){var n=e.messageId;return(0,u.c1)(s)[n]},p=(0,i.cn)(""),h=function(){return(0,u.c1)(p)},v=(0,i.cn)(""),g=function(){return(0,u.c1)(v)}},52364:function(e,n,t){t.d(n,{$C:function(){return F},Cd:function(){return h.Cd},EO:function(){return oe},Gd:function(){return te},J:function(){return re},Jc:function(){return G},Og:function(){return h.Og},SX:function(){return ee},Xq:function(){return M},ZT:function(){return Y},gp:function(){return X},jx:function(){return L},nB:function(){return K},oq:function(){return _},ql:function(){return ne},z_:function(){return B},zu:function(){return q}});var r=t(88733),i=t(57135),o=t(72006),u=t(4405),a=t(96583),l=t(43182),c=t(91398),s=t(85234),f=t.n(s),d=t(64918),p=t(29457),h=t(40207),v=t(54761),g=t(13291),y=t(39691),m=t(625),E=t(69365),T=t(92153),w=t(13902),b=t(5293),S=t(50959),x=t(82325),R=t(29203),Z=t(63026),C=t(96028),k=t(47648),I=t(30929),D=t(11043),A=t(46486),O=t(52783),N=(0,c.cn)(0),_=function(){return(0,R.wM)(N)},P=(0,c.cn)(0),L=function(){return(0,R.wM)(P)},U=(0,c.cn)(""),G=function(){return(0,R.wM)(U)},B=function(){return(0,R.Dm)(U)},F=function(){return(0,R.$X)(U)},q=function(){return(0,R.wM)(v.qw)},M=function(){return(0,R.Dm)(v.qw)},z=(0,c.cn)(new Set),H=(0,c.cn)(null,(function(e,n,t){var r=(0,T.ZP)(e(z),(function(e){e.add(t)}));n(z,r)})),W=(0,c.cn)(null,(function(e,n,t){var r=(0,T.ZP)(e(z),(function(e){e.delete(t)}));n(z,r)})),j=(0,c.cn)((function(e){return e(z).size>0})),X=function(){return(0,R.c1)(j)},K=function(){return(0,R.Dm)(j)};function V(e){return{user:e.attribution,message:e.text}}var Q=(0,c.cn)(null,function(){var e=(0,i.Z)((function(e,n){var t;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:if(n(w.mJ),n(v.qw,[]),n(I.r),!(t=e(b.tV)))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.createNewSession()];case 2:return r.sent(),[3,4];case 3:return r.sent(),l.Tb(new Error("Unable to initialize Ghostwriter Chat session")),[2];case 4:return[2]}}))}));return function(n,t){return e.apply(this,arguments)}}()),Y=function(){return(0,R.$X)(Q)},$=(0,c.cn)(null,function(){var e=(0,i.Z)((function(e,n,t){var i,l,c,s,f,T,S,x,R,Z,C,k,I,D,A,O,N,_,P,L,U,G,B,F,q,M,z,H,W,j,X,K,Q,Y,$,J,ee,ne,te,re,oe,ue;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:i=t.chatInput,l=t.responseId,c=t.timesRegenerated,s=t.aiUsername,f=i.chatMessage,T=i.workspaceContext,S=i.messages,x=i.shouldUseAdvancedModelOverride,R=e(y.yH),Z=("undefined"!==typeof x?x:e(y.EP).useAdvancedModel)&&R,C=f.type,k=f.codeReference,I=T.fileContext,D=T.mostRecentFile,A=e(g.qy),O=e(y.aK),N=e(y.gL),_=e(b.tV),"undefined"!==typeof(P=e(ie))&&(f.action=P),(0,m.j)(m.U3.GHOSTWRITER_CHAT_MESSAGE_SENT,{type:C,model:O,isAdvancedModel:Z}),L={id:l,type:C,codeReference:k,text:"",loading:!0,author:{username:s,image:"/public/images/ghostwriter/blurple-circle.svg"},attribution:"Assistant",model:O,useAdvancedModel:Z,timesRegenerated:c},U=new AbortController,n(w.WU,{messageId:l,abortController:U}),a.label=1;case 1:if(a.trys.push([1,14,15,16]),n(E.Et,!0),G=function(e){var n=function(e){return!e.loading&&!e.error};return e.filter((function(t,r){return!(r<e.length-1&&!n(e[r+1]))&&n(e[r])&&"feedback"!==e[r].type})).map(V)}(S),B=performance.now(),F=void 0,!(0,d.uL)(O))throw new Error("Invalid chat model");if(!_||!N)throw new Error("Invalid Ghostwriter Chat client");M={chatHistory:G,message:f,model:O,useAdvancedModel:Z,replId:N,sessionId:A,context:q={fileContext:I,mostRecentFile:D}},z={abortSignal:U.signal},H=_.sendMessage({body:M,options:z}),W=void 0,j="",X=!1,K=!1,a.label=2;case 2:a.trys.push([2,7,8,13]),Y=(0,r.Z)(H),a.label=3;case 3:return[4,Y.next()];case 4:if(!(X=!($=a.sent()).done))return[3,6];if(J=$.value,(ee=J).intentStreamChunk&&(W=ee.intentStreamChunk.intent),ee.debugStreamChunk&&(n(h.KI,ee.debugStreamChunk.fullPrompt),n(h.YY,{id:l,debugInfo:{fullPrompt:ee.debugStreamChunk.fullPrompt}}),n(h.YY,{id:l,debugInfo:{workspaceContext:q}})),F||(F=performance.now()-B,p.kg.time("ghostwriter chat time to first stream",F,{replid:N,chatId:A,chatModel:O,messageId:l,isAdvancedModel:Z}),n(h.YY,{id:l,debugInfo:{timeToFirstStream:F}})),!ee.responseStreamChunk)return[3,5];ne=ee.responseStreamChunk,te=ne.stopReason,ne.stopReason&&(n(h.Oy,ne.stopReason),n(h.YY,{id:l,debugInfo:{stopReason:ne.stopReason}}),te=ne.stopReason),j+=ne.data,L=(0,u.Z)((0,o.Z)({},L),{loading:!1,text:j,intent:W,inferenceId:ee.responseId,useAdvancedModel:Z,stopReason:te}),n(v.Mk,{message:L}),a.label=5;case 5:return X=!1,[3,3];case 6:return[3,13];case 7:return re=a.sent(),K=!0,Q=re,[3,13];case 8:return a.trys.push([8,,11,12]),X&&null!=Y.return?[4,Y.return()]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,12];case 11:if(K)throw Q;return[7];case 12:return[7];case 13:return n(ie,void 0),[3,16];case 14:return oe=a.sent(),n(E.Et,!1),"AbortError"===oe.name?(n(v.Mk,{message:(0,u.Z)((0,o.Z)({},L),{aborted:!0})}),[2]):(n(v.b9,{messageId:l,error:oe.message}),p.kg.error("ghostwriter chat client response error",{replid:N,chatId:A,chatModel:O,messageId:l,originalError:null!==(ue=null===oe||void 0===oe?void 0:oe.message)&&void 0!==ue?ue:oe}),[3,16]);case 15:return n(w.mV,{messageId:l}),[7];case 16:return[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),J=(0,c.cn)(null,function(){var e=(0,i.Z)((function(e,n,t,r){var i,o,u,l,c,s,d,p,h,m,E,T,w,b,S;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return i=t.text,o=t.type,u=t.codeReference,l=(null===i||void 0===i?void 0:i.trim())||"",c=e(v.qw),(s=e(y.db))?(O.B4.Check(A.cZ,t)?n(Z.W,t.codeReference.filePath):O.B4.Check(A.FL,t)?n(C.k8,t.codeReference.filePath):O.B4.Check(A.Mx,t)&&n(k.ev,t.codeReference.filePath),0===e(v.qw).length&&n(g.xk,Date.now()),d=f()(),p=f()(),n(H,d),h={id:d,type:o,codeReference:u,text:l,author:{username:s.username,image:s.image},attribution:"Human"},n(v.TC,{message:h}),m=e(y.EP).useAdvancedModel,E={id:p,type:o,codeReference:u,loading:!0,text:"Please wait while I think through your request\u2026",author:{username:r,image:"/public/images/ghostwriter/blurple-circle.svg"},attribution:"Assistant",useAdvancedModel:m},n(v.OV,{message:E}),[4,e(y.Iu).promise]):[2];case 1:return a.sent(),T=e(D.Z1),[4,e(D.r6)(T)];case 2:w=a.sent(),b={fileContext:w.ghostwriterFileContext.fileContext,mostRecentFile:w.mostRecentFile},S={type:o,text:l,codeReference:u},a.label=3;case 3:return a.trys.push([3,,5,6]),[4,n($,{chatInput:{chatMessage:S,workspaceContext:b,messages:c},responseId:p,aiUsername:r})];case 4:return a.sent(),[3,6];case 5:return n(W,d),[7];case 6:return[2]}}))}));return function(n,t,r,i){return e.apply(this,arguments)}}()),ee=(0,c.cn)(null,function(){var e=(0,i.Z)((function(e,n,t){var r,i,o,u,l,c,s,f,d,h,g,m,E,T,w,b,S,x;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return r=t.responseId,i=t.action,o=t.shouldUseAdvancedModelOverride,u=t.aiUsername,l=e(v.qw),c=l.findIndex((function(e){return e.id===r})),(s=-1!==c&&"Assistant"===l[c].attribution)?(f=l.slice(0,c),(d=f.pop())?(n(H,d.id),h=(l[c].timesRegenerated||0)+1,g=o||e(y.EP).useAdvancedModel,m=d.text,E=d.type,T=d.codeReference,w={id:r,type:E,codeReference:T,loading:!0,text:"Please wait while I think through your request\u2026",author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},attribution:"Assistant",timesRegenerated:h,useAdvancedModel:g},n(v.Mk,{message:w}),[4,e(y.Iu).promise]):(p.kg.error("GW Chat error no human message before response message"),[2])):(p.kg.error("GW Chat error regenerate assistant message",{responseId:r,isResponseAssistantMessage:s}),[2]);case 1:return a.sent(),[4,e(D.r6)()];case 2:b=a.sent(),S={fileContext:b.ghostwriterFileContext.fileContext,mostRecentFile:b.mostRecentFile},x={type:E,text:m,codeReference:T,action:i},n(ie,i),a.label=3;case 3:return a.trys.push([3,,5,6]),[4,n($,{chatInput:{chatMessage:x,messages:f,workspaceContext:S,shouldUseAdvancedModelOverride:o},responseId:r,timesRegenerated:h,aiUsername:u})];case 4:return a.sent(),[3,6];case 5:return n(W,d.id),[7];case 6:return[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),ne=function(){var e=(0,R.Uu)();return(0,x.lV)((0,S.useCallback)(function(){var e=(0,i.Z)((function(e,n,t){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return[4,n(J,t.chatMessage,"AI")];case 1:return[2,e.sent()]}}))}));return function(n,t,r){return e.apply(this,arguments)}}(),[]),{store:e})},te=function(){var e=(0,R.Uu)();return(0,x.lV)((0,S.useCallback)(function(){var e=(0,i.Z)((function(e,n,t){var r,i,o;return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return r=t.responseId,i=t.action,o=t.shouldUseAdvancedModelOverride,[4,n(ee,{responseId:r,action:i,shouldUseAdvancedModelOverride:o,aiUsername:"AI"})];case 1:return[2,e.sent()]}}))}));return function(n,t,r){return e.apply(this,arguments)}}(),[]),{store:e})},re=function(){var e=(0,w.j3)(),n=(0,w.MY)();return X()&&e&&!n},ie=(0,c.cn)(void 0),oe=function(){return(0,R.wM)(ie)}},63026:function(e,n,t){t.d(n,{W:function(){return u},j:function(){return l}});var r=t(29203),i=t(54761),o=t(91398),u=(0,o.cn)(null,(function(e,n,t){var r=e(i.qw).filter((function(e){var n;return!("explainCode"===e.type&&(null===(n=e.codeReference)||void 0===n?void 0:n.filePath)===t)}));n(i.qw,r)})),a=(0,o.cn)((function(e){return e(i.qw).filter((function(e){return"Assistant"===e.attribution&&"explainCode"===e.type}))})),l=function(e){return(0,r.c1)(a).find((function(n){return n.codeReference&&n.codeReference.filePath===e}))}},96028:function(e,n,t){t.d(n,{eD:function(){return c},k8:function(){return u},oQ:function(){return l}});var r=t(29203),i=t(54761),o=t(91398),u=(0,o.cn)(null,(function(e,n,t){var r=e(i.qw).filter((function(e){var n;return!("generateCode"===e.type&&(null===(n=e.codeReference)||void 0===n?void 0:n.filePath)===t)}));n(i.qw,r)})),a=(0,o.cn)((function(e){return e(i.qw).filter((function(e){return"Assistant"===e.attribution&&"generateCode"===e.type}))})),l=function(e){return(0,r.c1)(a).find((function(n){return n.codeReference&&n.codeReference.filePath===e}))},c=function(){return(0,r.$X)(u)}},47648:function(e,n,t){t.d(n,{Ef:function(){return c},ev:function(){return u},iH:function(){return l}});var r=t(29203),i=t(54761),o=t(91398),u=(0,o.cn)(null,(function(e,n,t){var r=e(i.qw).filter((function(e){var n;return!("transformCode"===e.type&&(null===(n=e.codeReference)||void 0===n?void 0:n.filePath)===t)}));n(i.qw,r)})),a=(0,o.cn)((function(e){return e(i.qw).filter((function(e){return"Assistant"===e.attribution&&"transformCode"===e.type}))})),l=function(e){return(0,r.c1)(a).find((function(n){return n.codeReference&&n.codeReference.filePath===e}))},c=function(){return(0,r.$X)(u)}},30929:function(e,n,t){t.d(n,{g:function(){return l},r:function(){return c}});var r=t(72338),i=t(29203),o=t(91398),u=t(50959),a=(0,o.cn)(new Set),l=function(e){var n=(0,i.c1)(a);(0,u.useEffect)((function(){if(e)return n.add(e),function(){n.delete(e)}}),[n,e])},c=(0,o.cn)(null,(function(e,n){var t=e(a),i=!0,o=!1,u=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){l.value.dispatch({effects:r.Q.of(null)})}}catch(s){o=!0,u=s}finally{try{i||null==c.return||c.return()}finally{if(o)throw u}}}))},54761:function(e,n,t){t.d(n,{Mk:function(){return p},OV:function(){return d},TC:function(){return f},b9:function(){return h},nS:function(){return g},qw:function(){return s}});var r=t(9970),i=t(91398),o=t(92153),u=t(13902),a=t(92674),l=t.n(a),c=t(29203),s=(0,i.cn)([]),f=(0,i.cn)(null,(function(e,n,t){var i=t.message,o=e(s);n(s,(0,r.Z)(o).concat([i]))})),d=(0,i.cn)(null,(function(e,n,t){var i=t.message,o=e(s);n(u.fN,{message:i}),n(s,(0,r.Z)(o).concat([i]))})),p=(0,i.cn)(null,(function(e,n,t){var r=t.message,i=r.id,a=e(s),l=(0,o.ZP)(a,(function(e){var n;for(n=e.length-1;n>=0&&a[n].id!==i;n--);n>=0&&(e[n]=r)}));n(u.fN,{message:r}),n(s,l)})),h=(0,i.cn)(null,(function(e,n,t){var r=t.messageId,i=t.error,u=e(s),a=(0,o.ZP)(u,(function(e){var n=e.find((function(e){return e.id===r}));n&&(n.loading&&(n.text="",n.loading=!1),n.error=i)}));n(s,a)})),v=(0,i.cn)(null,(function(e,n,t){var i=t.feedback,o=t.message,u=e(s),a={id:l()(),type:"feedback",text:i,feedbackProvidedMessage:{id:o.id,text:o.text},attribution:"Assistant",useAdvancedModel:o.useAdvancedModel,author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"}};n(s,(0,r.Z)(u).concat([a]))})),g=function(){return(0,c.$X)(v)}},69365:function(e,n,t){t.d(n,{Et:function(){return o},Z9:function(){return l},Z_:function(){return u},rM:function(){return c}});var r=t(29203),i=t(91398),o=(0,i.cn)(!1),u=function(){return(0,r.wM)(o)},a=(0,i.cn)(!1),l=function(){return(0,r.wM)(a)},c=function(){return(0,r.$X)(a)}},13291:function(e,n,t){t.d(n,{Cp:function(){return f},jC:function(){return c},qy:function(){return a},ub:function(){return l},xk:function(){return s}});var r=t(29203),i=t(91398),o=t(85234),u=t.n(o),a=(0,i.cn)(u()()),l=function(){return(0,r.c1)(a)},c=function(){return(0,r.$X)(a)},s=(0,i.cn)(null),f=function(){return(0,r.c1)(s)}},39691:function(e,n,t){t.d(n,{$e:function(){return R},EP:function(){return c},Iu:function(){return S},Lw:function(){return m},Ne:function(){return b},Rx:function(){return w},T9:function(){return s},aK:function(){return l},db:function(){return v},gL:function(){return f},iM:function(){return g},ll:function(){return T},yH:function(){return E}});var r=t(5894),i=t(91398),o=t(61871),u=t(29203),a=t(51631),l=(0,i.cn)(r.Fp),c=(0,i.cn)({useAdvancedModel:!0,setUseAdvancedModel:function(){}}),s=function(){return(0,u.c1)(c)},f=(0,i.cn)(null),d=(0,i.cn)(void 0),p=(0,i.cn)(!0),h=(0,i.cn)(void 0),v=(0,i.cn)((function(e){var n;return null===(n=e(d))||void 0===n?void 0:n.currentUser}));function g(e){return e.userSubscriptionType===a.HP.HackerPro||Boolean("UserPowerUpsTypes"===(null===e||void 0===e?void 0:e.userPowerUpsByType.__typename)&&e.userPowerUpsByType.ghostwriter.active)}var y=(0,i.cn)((function(e){var n=e(v);return Boolean(n&&g(n))})),m=function(){return(0,u.c1)(y)},E=(0,i.cn)(!1),T=function(){return(0,u.c1)(E)},w=function(){return(0,u.$X)(E)},b=function(){return{currentUserData:(0,u.c1)(d),currentUserLoading:(0,u.c1)(p),currentUserError:(0,u.c1)(h),chatModel:(0,u.c1)(l)}},S=(0,i.cn)((0,o.Z)()),x=(0,i.cn)(null,(function(e,n,t){var r=t.chatModel,i=t.replId,o=t.currentUserData,u=t.currentUserLoading,a=t.currentUserError,s=t.advancedModelUserPref;n(l,r),n(f,i),n(d,o),n(p,u),n(h,a),n(c,s),e(S).resolve(!0)})),R=function(){return(0,u.$X)(x)}},6009:function(e,n,t){t.d(n,{Kz:function(){return s},dp:function(){return h},u0:function(){return d}});var r=t(57135),i=t(96583),o=t(91398),u=t(4613),a=t(29457),l=t(29203),c=(0,o.cn)(""),s=function(){return(0,l.wM)(c)},f=(0,o.cn)(null),d=function(){return(0,l.wM)(f)},p=(0,o.cn)(null,function(){var e=(0,r.Z)((function(e,n){var t,r,o;return(0,i.__generator)(this,(function(i){return(t=e(f))&&(r=e(c),o=e(u.FF),a.kg.info("Ghostwriter Debugger error buffered",{debuggerBuffer:r,ghostwriterDebugError:t,inferredInterpreter:o})),n(c,""),n(f,null),[2]}))}));return function(n,t){return e.apply(this,arguments)}}()),h=function(){return(0,l.$X)(p)}},11043:function(e,n,t){t.d(n,{U0:function(){return p},Xr:function(){return v},Xy:function(){return g},Z1:function(){return f},r6:function(){return d},zU:function(){return h}});var r=t(57135),i=t(9970),o=t(96583),u=t(29203),a=t(5293),l=t(82325),c=t(91398),s=t(50959),f=(0,c.cn)([]),d=(0,c.cn)((function(e){return e(a.Vx).getGhostwriterFileContext})),p=function(){var e=(0,u.Uu)();return(0,l.lV)((0,s.useCallback)(function(){var e=(0,r.Z)((function(e,n){var t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return t=e(f),[4,e(d)(t)];case 1:return[2,n.sent()]}}))}));return function(n,t){return e.apply(this,arguments)}}(),[]),{store:e})};function h(){var e=(0,u.Uu)();return(0,l.lV)((0,s.useCallback)(function(){var e=(0,r.Z)((function(e,n,t){var r,u,a;return(0,o.__generator)(this,(function(o){return r=e(f),u=r.findIndex((function(e){return e.path===t.path})),a=(0,i.Z)(r),-1!==u?a[u]=t:a.push(t),n(f,a),[2]}))}));return function(n,t,r){return e.apply(this,arguments)}}(),[]),{store:e})}function v(){var e=(0,u.Uu)();return(0,l.lV)((0,s.useCallback)(function(){var e=(0,r.Z)((function(e,n){return(0,o.__generator)(this,(function(e){return n(f,[]),[2]}))}));return function(n,t){return e.apply(this,arguments)}}(),[]),{store:e})}function g(){return(0,u.c1)(f)}},5293:function(e,n,t){t.d(n,{$0:function(){return g},G6:function(){return f},M0:function(){return b},OT:function(){return p},PM:function(){return E},U4:function(){return v},Vx:function(){return c},f9:function(){return l},n3:function(){return m},tV:function(){return T}});var r,i=t(57135),o=t(96583),u=t(29203),a=t(91398),l={getGhostwriterFileContext:(0,i.Z)((function(){return(0,o.__generator)(this,(function(e){return[2,{ghostwriterFileContext:{fileContext:[],truncatedFiles:[],overflowingFiles:[]},mostRecentFile:null}]}))})),insertCodeButtonComponent:function(){return null},openGhostwriterPane:function(){},ghostwriterClient:null},c=(0,a.cn)(l),s=(0,a.cn)((function(e){return e(c).insertCodeButtonComponent})),f=function(){return(0,u.c1)(s)},d=(0,a.cn)((function(e){return e(c).openGhostwriterPane})),p=function(){return(0,u.c1)(d)},h=(0,a.cn)(null),v=function(){return(0,u.c1)(h)},g=function(){return(0,u.$X)(h)},y=(0,a.cn)(null),m=function(){return(0,u.c1)(y)},E=function(){return(0,u.$X)(y)},T=(0,a.cn)((function(e){return e(c).ghostwriterClient})),w=(0,a.cn)((function(e){var n;return null!==(r=null===(n=e(T))||void 0===n?void 0:n.isReady)&&void 0!==r&&r})),b=function(){return(0,u.c1)(w)}},32945:function(e,n,t){t.d(n,{w:function(){return y},l:function(){return m}});var r=t(57135),i=t(2272),o=t(96583),u=t(50959),a=t(10841),l=t(6009),c=t(29457),s=/(((\w+Error)|(Error)): (.*)\r\n((?:\s+at .*\r\n)+))|(\/home\/runner(.*):\d+\r\n[\s\S]*((\w+Error)|(Error)): (.*)\r\n)/g,f=/(Traceback.*\r\n)?( +File.*(\r\n.*){1,2})*\r\n.*((\wError:)|(Exception:)).*/g,d=["abort","error","exception","fail","fatal","panic","traceback"].map((function(e){return"[".concat(e[0].toLowerCase()).concat(e[0].toUpperCase(),"]").concat(e.slice(1))})).join("|"),p=new RegExp("(.*(".concat(d,")(.*\\r\\n)+?\\x1b\\[31m(.|\\r\\n)*?\\x1b\\[[0-9;]*m)|(.*\\x1b\\[31m.*?(").concat(d,")(.|\\r\\n)*?\\x1b\\[[0-9;]*m.*)"),"g"),h=/\x1b\[[0-9;]*[A-Za-z]/g;var v=t(4613);function g(e,n){if(!e)return null;var t=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown";return"nodejs"===n?null!==e.match(s):"python3"===n?null!==e.match(f):null!==e.match(p)}(e,n);return t?function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown",t=e.replace(h,""),r=null;return(r="nodejs"===n?t.match(s):"python3"===n?t.match(f):e.match(p))?r[r.length-1].replace(h,""):(c.kg.error("Ghostwriter Chat Debugger had no error - this should not have happened",{errorBuffer:e,interpreter:n}),"")}(e,n):null}function y(e){var n=e.runner,t=(0,v.R$)(),s=(0,u.useState)(a.Ah.IDLE),f=s[0],d=s[1],p=(0,i.Z)((0,l.u0)(),2),h=p[0],y=p[1],m=(0,l.dp)(),E=(0,i.Z)((0,l.Kz)(),2),T=E[0],w=E[1],b=(0,u.useCallback)(function(){var e=(0,r.Z)((function(e){return(0,o.__generator)(this,(function(n){return f!==a.Ah.RUNNING||w((function(n){return(n+e).slice(-2400)})),[2]}))}));return function(n){return e.apply(this,arguments)}}(),[f,w]),S=(0,u.useCallback)((function(e){e!==f&&(d(e),e!==a.Ah.RUNNING||m())}),[m,f]);return(0,u.useEffect)((function(){var e=setTimeout((function(){var e=g(T,t);e&&y(e)}),100);return function(){clearTimeout(e)}}),[T,t,y]),(0,u.useEffect)((function(){if(c.kg.info("Ghostwriter Debugger inferred interpreter",{interpreter:t}),"shellrunner"===n.mode){var e=[n.onOutput(b),n.onStateChanged(S)];return function(){e.forEach((function(e){return e()}))}}}),[t,n,b,S]),{parsedError:h,clearDebug:m}}function m(e){var n=(0,v.R$)(),t=(0,u.useState)(null),r=t[0],i=t[1],o=(0,u.useState)(""),a=o[0],l=o[1];return(0,u.useEffect)((function(){return e((function(e){l((function(n){return(n+e).slice(-2400)}))}))}),[e]),(0,u.useEffect)((function(){var e=setTimeout((function(){var e=g(a,n);i(e)}),100);return function(){clearTimeout(e)}}),[a,n]),{parsedError:r}}},4613:function(e,n,t){t.d(n,{B:function(){return p},FF:function(){return s},R$:function(){return h}});var r=t(57135),i=t(96583),o=t(29203),u=t(27562),a=t(45285),l=t(91398),c=t(50959),s=(0,l.cn)("unknown");function f(e){var n,t,r,i;if(e.error)return"unknown";var o,u,a,l="unknown";if((null===(n=e.config.interpreter)||void 0===n||null===(t=n.command)||void 0===t?void 0:t.args)&&(null===(o=e.config.interpreter)||void 0===o||null===(u=o.command)||void 0===u||u.args.forEach((function(e){/nodejs/.test(e)?l="nodejs":/python3/.test(e)&&(l="python3")})),"unknown"!==l))return l;if((null===(r=e.config.run)||void 0===r?void 0:r.args)&&(null===(a=e.config.run)||void 0===a||a.args.forEach((function(e){/vite/.test(e)?l="vite":/node|npm/.test(e)?l="nodejs":/python3/.test(e)&&(l="python3")})),"unknown"!==l))return l;if(null===(i=e.config.packager)||void 0===i?void 0:i.language){var c,s=null===(c=e.config.packager)||void 0===c?void 0:c.language;if(/nodejs/.test(s)?l="nodejs":/python3/.test(s)&&(l="python3"),"unknown"!==l)return l}return"unknown"}function d(e){var n="unknown";return/nodejs|typescript/.test(e)?n="nodejs":/python3/.test(e)&&(n="python3"),n}function p(){var e=(0,a.Z)().dotReplit,n=(0,u.Z)(),t=(0,o.$X)(s);(0,c.useEffect)((function(){function o(){return(o=(0,r.Z)((function(){var r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.getConfig()];case 1:r=i.sent();try{return o="unknown","unknown"===(o=f(r))&&(o=d(n)),t(o),[2,o]}catch(u){t("unknown")}return[2]}}))}))).apply(this,arguments)}return function(){o.apply(this,arguments)}(),function(){t("unknown")}}),[e,n,t])}function h(){return(0,o.c1)(s)}},79339:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(72006),i=t(74985),o=t(50959),u=t(47900),a=t(88167),l=t(78968),c=t(84358),s=t(18171),f=o.memo(u.ZP);function d(e){var n=e.source,t=e.sourcePos,o=e.fs,u=e.path,d=e.onCodeInsert,p=(0,a.l)(o,u),h=(0,c.Z)(n,100),v=(0,s.Z)((function(){return{img:p,a:function(e){return(0,i.tZ)(l.Z,(0,r.Z)({filePath:u},e))}}}),[p,u]);return(0,i.tZ)(f,{onCodeInsert:d,components:v,sourcePos:t,children:h})}},18196:function(e,n,t){t.d(n,{A:function(){return d},Z:function(){return f}});var r=t(74985),i=t(50959),o=t(87978),u=t(61284),a=t(39541),l=t(87076),c=t(63740),s=t(32104);function f(e){var n=e.fs,t=e.filePath,f=(0,i.useState)(null),p=f[0],h=f[1],v=(0,i.useState)(!0),g=v[0],y=v[1];return(0,i.useEffect)((function(){var e=n.watchFile(t,{onChange:function(e){h(e.toString("base64")),y(!1)},onError:function(){h(null),y(!1)},onMoveOrDelete:function(){h(null),y(!1)}});return function(){e(),y(!0),h(null)}}),[n,t]),g?(0,r.tZ)(s.Z,{}):p?(0,r.BX)(r.HY,{children:[(0,r.tZ)(d,{content:p,mime:(0,o.yC)(t)}),(0,r.tZ)(l.h,{alt:"Download",css:[a.l0.position.absolute,a.l0.bottom(8),a.l0.right(8),a.l0.p(16)],children:(0,r.tZ)("a",{href:"data:text/plain;base64,".concat(p),download:(0,o.UO)(t),css:[a.l0.color.foregroundDimmer],children:(0,r.tZ)(c.Z,{})})})]}):(0,r.tZ)(u.xv,{multiline:!1,children:"Failed to load media file"})}var d=function(e){var n=e.content,t=e.mime,i=void 0===t?"":t;if(i.startsWith("video/"))return(0,r.tZ)("video",{src:"data:".concat(i,";base64,").concat(n),css:{maxHeight:"100%",maxWidth:"100%"},controls:!0});if(i.startsWith("image/"))return(0,r.tZ)("img",{alt:"Preview",src:"data:".concat(i,";base64,").concat(n),css:{width:"80%",height:"80%",objectFit:"contain",imageRendering:"pixelated"}});if(i.startsWith("audio/")){var o=i;return"audio/wave"===o&&(o="audio/wav"),(0,r.tZ)("audio",{src:"data:".concat(o,";base64,").concat(n),css:{maxHeight:"100%",maxWidth:"100%"},controls:!0})}return"application/pdf"===i?(0,r.tZ)("object",{data:"data:".concat(i,";base64,").concat(n),type:"application/pdf",css:{width:"100%",height:"100%",flex:1},children:(0,r.tZ)("embed",{src:"data:".concat(i,";base64,").concat(n),type:"application/pdf",css:{width:"100%",height:"100%"}})}):(0,r.tZ)(u.xv,{multiline:!1,children:"File type not supported."})}},20426:function(e,n,t){t.d(n,{Z:function(){return S}});var r=t(74985),i=(t(50959),t(2041)),o=t(61284),u=t(45510),a=t(85368),l=t(90171),c=t(39541),s=t(82893),f=t.n(s),d=t(72006),p=t(43119),h=t(71440),v=t(24635);function g(){var e=(0,p.Z)(["\n  query NotAllowedModal {\n    currentUser {\n      id\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return g=function(){return e},e}var y={},m=(0,h.Ps)(g());var E=t(48330),T=t(66539),w=t(70719),b=(0,t(82568).X)({root:[c.l0.colWithGap(32)],header:[c.l0.rowWithGap(16),c.l0.align.center],body:[c.l0.colWithGap(16)],staffHelpers:[c.l0.colWithGap(8),c.l0.border({color:"var(--accent-negative-default)",width:1,style:"solid"}),c.l0.overflow("hidden")],buttons:[c.l0.rowWithGap(16),c.l0.justify.end]}),S=function(e){var n,t=e.isOpen,s=(0,l.useRouter)(),p=function(e){var n=(0,d.Z)({},y,e);return v.a(m,n)}({skip:!t}).data,h=(0,E.Z)(),g=null===p||void 0===p||null===(n=p.currentUser)||void 0===n?void 0:n.isStaff;return(0,r.tZ)(i.u,{preventClose:!0,isOpen:t,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(a.G,{css:b.root,children:[(0,r.tZ)(a.G,{css:b.header,children:(0,r.tZ)(o.h4,{css:{width:"fit-content"},level:2,variant:"headerDefault",children:"You can\u2019t run this Repl right now."})}),(0,r.BX)(a.G,{css:b.body,children:[(0,r.BX)(o.xv,{children:["It may be temporarily unavailable or it may have violated our"," ",(0,r.tZ)(f(),{legacyBehavior:!0,href:"/site/terms",children:"Terms of Service"}),"."]}),(0,r.tZ)(o.xv,{children:"If you are the owner of this Repl and believe you should be able to run it, you can try again later or contact support."}),g?(0,r.BX)(a.G,{css:b.staffHelpers,children:[(0,r.BX)(a.G,{css:c.l0.rowWithGap(8),children:[(0,r.tZ)(T.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.tZ)(w.Z,{})}),(0,r.tZ)(o.h4,{level:3,children:"Debug Info"})]}),(0,r.tZ)(a.G,{children:(0,r.BX)(o.xv,{children:["Repl ID ",h," is not allowed to run. This is most likely due to a policy takedown."]})}),(0,r.tZ)(a.G,{children:(0,r.BX)(o.xv,{multiline:!1,children:[(0,r.tZ)(f(),{legacyBehavior:!0,href:"https://app.datadoghq.com/logs?query=%40replid%3A".concat(h),children:"All datadog logs"})," ","\u2022"," ",(0,r.tZ)(f(),{legacyBehavior:!0,href:"https://app.datadoghq.com/logs?query=%40replid%3A".concat(h,"+taking+down"),children:"Takedown-specific logs"})]})})]}):null]}),(0,r.BX)(a.G,{css:b.buttons,children:[(0,r.tZ)(u.zx,{text:"Reload",onClick:function(){window.location.reload()}}),(0,r.tZ)(u.zx,{text:"Leave",onClick:function(){s.push("/home","~/")}})]})]})})}},78997:function(e,n,t){var r=t(74985),i=(t(50959),t(2041)),o=t(61284),u=t(45510),a=t(85368),l=t(90171),c=t(48667),s=t(39541),f=(0,t(82568).X)({root:[s.l0.colWithGap(16)],header:[s.l0.rowWithGap(16),s.l0.align.center],body:[s.l0.pr(32),s.l0.colWithGap(16)],buttons:[s.l0.rowWithGap(16),s.l0.justify.end]});n.Z=function(e){var n=e.isOpen,t=(0,l.useRouter)();return(0,r.tZ)(i.u,{preventClose:!0,isOpen:n,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(a.G,{css:f.root,children:[(0,r.BX)(a.G,{css:f.header,children:[(0,r.tZ)(c.Z,{size:24}),(0,r.tZ)(o.h4,{css:{width:"fit-content"},level:2,variant:"headerDefault",children:"Please Refresh"})]}),(0,r.tZ)(a.G,{css:f.body,children:(0,r.tZ)(o.xv,{children:"Your connection to this Repl has been temporarily interrupted. Usually this is because of a network issue. Please refresh the page to try again."})}),(0,r.BX)(a.G,{css:f.buttons,children:[(0,r.tZ)(u.zx,{text:"Refresh",onClick:function(){window.location.reload()}}),(0,r.tZ)(u.zx,{text:"Leave",onClick:function(){t.push("/home","~/")}})]})]})})}},33358:function(e,n,t){t.d(n,{Z:function(){return s}});var r,i=t(57389),o=t(74985),u=t(39541),a=t(66539),l=t(54873),c=(0,t(43312).iv)([u.l0.focusRing,u.l0.display.flex,u.l0.center,u.l0.borderRadius(4),u.l0.backgroundColor.backgroundRoot,u.l0.color.foregroundDefault,u.l0.cursor.pointer,u.l0.p(4),(r={transition:"background-color 0.2s",border:"none"},(0,i.Z)(r,u.wl.hover,[u.l0.backgroundColor.backgroundHigher]),(0,i.Z)(r,":focus",{outline:"none"}),r)]),s=function(e){var n=e.onClick;return(0,o.tZ)(a.u,{tooltip:"Clear",placement:"bottom-start",children:(0,o.tZ)("button",{"aria-label":"Clear",onClick:n,css:c,children:(0,o.tZ)(l.Z,{size:16})})})}},60447:function(e,n,t){t.d(n,{l:function(){return s}});var r,i=t(57389),o=t(74985),u=t(39541),a=t(66539),l=t(12260),c=(0,t(43312).iv)([u.l0.focusRing,u.l0.display.flex,u.l0.center,u.l0.borderRadius(4),u.l0.backgroundColor.backgroundRoot,u.l0.color.foregroundDefault,u.l0.cursor.pointer,u.l0.p(4),(r={transition:"background-color 0.2s",border:"none"},(0,i.Z)(r,u.wl.hover,[u.l0.backgroundColor.backgroundHigher]),(0,i.Z)(r,":focus",{outline:"none"}),r)]),s=function(e){var n=e.onClick;return(0,o.tZ)(a.u,{tooltip:"Search",placement:"bottom-start",children:(0,o.tZ)("button",{"aria-label":"Search",onClick:n,css:c,children:(0,o.tZ)(l.Z,{size:16})})})}},252:function(e,n,t){t.d(n,{R:function(){return c}});var r=t(74985),i=t(48306),o=t.n(i),u=t(39541),a=t(27522),l=t(50959);function c(e){var n=e.findNext,t=e.findPrevious,i=e.exit,c=(0,l.useRef)(null),s=(0,l.useState)(""),f=s[0],d=s[1];(0,l.useEffect)((function(){c.current&&c.current.focus()}),[]);return(0,r.BX)("div",{className:"jsx-cae03adee2975d4 search",children:[(0,r.tZ)("input",{ref:c,placeholder:"Find",value:f,onChange:function(e){return d(e.target.value)},onKeyDown:function(e){return function(e){"Escape"!==e.key?"Enter"===e.key&&(e.shiftKey?t(f):n(f)):i()}(e)},css:[u.l0.focusRing],className:"jsx-cae03adee2975d4"}),(0,r.tZ)(a.Z,{size:"small",onClick:function(){return n(f)},children:"Next"}),(0,r.tZ)(a.Z,{size:"small",onClick:function(){return t(f)},children:"Previous"}),(0,r.tZ)(a.Z,{size:"small",onClick:i,children:"Exit"}),(0,r.tZ)(o(),{id:"cae03adee2975d4",children:".search.jsx-cae03adee2975d4{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;height:30px}input.jsx-cae03adee2975d4{padding:4px var(--space-8)var(--space-4);background-color:var(--background-default);color:var(--foreground-default);height:24px;width:85px;border:none;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}input.jsx-cae03adee2975d4::-webkit-input-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4:-moz-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4::-moz-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4:-ms-input-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4::-ms-input-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4::placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4:focus{outline:none;border:var(--accent-primary-default)}input.jsx-cae03adee2975d4,.search button{margin:0 var(--space-4)}"})]})}},95085:function(e,n,t){t.d(n,{Z:function(){return z}});var r,i,o=t(2272),u=t(74985),a=t(43312),l=t(17074),c=t(94716),s=t(11619),f=t(42256),d=t(77511),p=t(13474),h=t(85368),v=t(39541),g=t(4143),y=t(32945),m=t(57389),E=t(66539),T=t(47880),w=(0,a.iv)([v.l0.focusRing,v.l0.display.flex,v.l0.center,v.l0.borderRadius(4),v.l0.backgroundColor.blurpleDefault,v.l0.color.foregroundDefault,v.l0.cursor.pointer,v.l0.p(4),(r={transition:"background-color 0.2s",border:"none"},(0,m.Z)(r,v.wl.hover,[v.l0.backgroundColor.blurpleStronger]),(0,m.Z)(r,":focus",{outline:"none"}),r)]),b=function(e){var n=e.onClick;return(0,u.tZ)(E.u,{tooltip:"Debug with Ghostwriter",placement:"bottom-start",children:(0,u.tZ)("button",{"aria-label":"Debug with Ghostwriter",onClick:n,css:w,children:(0,u.tZ)(T.Z,{size:16})})})},S=t(50959),x=t(53028),R=t(52364),Z=t(27495),C=t(33358),k=t(13630),I=t(70232),D=t(10841);function A(e,n){var t,r;switch(e){case i.Init:t="5%",r="Loading...";break;case i.BlockMigration:t="10%",r="Optimizing files";break;case i.Booting:r="Booting Repl",t="20%";break;case i.LoadingFiles:r="Loading files",t="".concat(Math.floor(20+70*n).toString(),"%");break;case i.Ready:r="Ready",t="100%";break;default:(0,I.Z)(e)}return{percentString:t,message:r}}!function(e){e.Init="Init",e.BlockMigration="BlockMigration",e.Booting="Booting",e.LoadingFiles="LoadingFiles",e.Ready="Ready"}(i||(i={}));var O=(0,a.F4)({"0%":{opacity:0,top:0},"100%":{opacity:1,top:"-25px"}});function N(e){var n=e.onBootStatus,t=e.initialRunState,r=(0,S.useState)({current:t===D.Ah.OFFLINE?i.Init:i.Ready,previous:null}),o=r[0],a=r[1],l=(0,S.useState)(0),c=l[0],s=l[1];(0,S.useEffect)((function(){var e=0,t=0,r=null,o=null,u=function(){e=0,t=0,r=null,o&&(clearInterval(o),o=null)},l=n((function(n){var l;switch(function(n){var i=n.stage,a=n.progress,l=n.total;if(o&&clearInterval(o),i!==k.api.BootStatus.Stage.PULL_FILES&&i!==k.api.BootStatus.Stage.LOAD_BLOCK||!l)return u(),void s(0);if(!(e>a)&&t!==a){var c=Date.now(),f=0;f=r?(a-t)/(c-r)*50:5e4,r=c,t=a,o=setInterval((function(){(e+=f)>l&&(e=l),e=Math.max(e,a),s(e/l)}),50)}}(n),n.stage){case k.api.BootStatus.Stage.ACQUIRING:l=i.Booting;break;case k.api.BootStatus.Stage.BLOCK_MIGRATION:l=i.BlockMigration;break;case k.api.BootStatus.Stage.PULL_FILES:case k.api.BootStatus.Stage.LOAD_BLOCK:l=i.LoadingFiles;break;case k.api.BootStatus.Stage.COMPLETE:l=i.Ready;break;default:return}a((function(e){return e.current===l?e:{current:l,previous:e.current}}))}));return function(){u(),l()}}),[n]);var f=o.previous?A(o.previous,1):null,d=A(o.current,c);return(0,u.BX)("div",{css:{position:"absolute",left:"25%",right:"25%",top:"45%",backgroundColor:"transparent",color:"white",transition:"all 1s 0.5s",opacity:o.current===i.Ready?0:1},children:[(0,u.BX)("div",{children:[f?(0,u.BX)("div",{css:{textAlign:"center",position:"absolute",width:"100%",top:"-100px",opacity:0,transition:"top 0.4s, opacity 0.4s"},children:[f.message,o.previous===i.LoadingFiles&&" 100%"]},f.message):null,(0,u.BX)("div",{css:{textAlign:"center",position:"absolute",width:"100%",top:"-25px",opacity:1,animationName:O.toString(),animationDuration:"0.6s"},children:[d.message,o.current===i.LoadingFiles&&" ".concat(d.percentString)]},d.message)]}),(0,u.tZ)("div",{css:{background:"none",border:"solid white 1px",borderRadius:"10px"},children:(0,u.tZ)("div",{css:{height:"5px",width:d.percentString,backgroundColor:"#fff",transition:"width cubic-bezier(0.28, 0.26, 0.33, 1) 2s"}})})]})}var _=t(60447),P=t(252),L=t(9348),U=t(99063);var G=(0,a.iv)([v.l0.flex.row,{opacity:"0",zIndex:100}]),B=(0,a.iv)([v.l0.flex.row,{zIndex:100}]),F=(0,a.iv)([v.l0.flex.row,v.l0.center,v.l0.justify.end,v.l0.position.absolute,v.l0.top(8),v.l0.right(8),v.l0.minHeight(30)]),q=function(e,n){var t=e.tracker,r=e.runner,i=e.debugClient,a=e.packager,v=e.onBootStatus,m=e.openPane,E=e.focusOnLoad,T=e.focusRef,w=e.openFile,b=e.listFiles,x=(0,o.Z)(function(e){var n=e.tracker,t=e.runner,r=e.debugClient,i=e.packager,u=e.openFile,a=e.listFiles,l=(0,o.Z)((0,L.Z)(u&&a?{openFile:u,listFiles:a}:void 0),2),c=l[0],s=l[1],f=(0,S.useState)(""),d=f[0],p=f[1],h=n||function(){};return(0,S.useEffect)((function(){if(!c)return t.onOutput((function(e){return p((function(n){return n+e}))}))}),[c,t,p]),(0,S.useEffect)((function(){if(!c&&i)return i.onOutput((function(e){return p((function(n){return n+e.replace(/\n/g,"\n\r")}))}))}),[c,i,p]),(0,S.useEffect)((function(){var e=function(e){if(!c)throw new Error("Expected xterm");c.write(e.replace(/\n/g,"\n\r"))};if(c&&i){var n=i.onOutput((function(n){e(n)})),t=i.onError((function(){return e("\x1b[31m\n\nReplit: Package operation failed.\x1b[00m")})),r=i.onStateChanged((function(n){n&&e("\n\nReplit: Updating package configuration\n\n")}));return function(){n(),t(),r()}}}),[c,i]),(0,S.useEffect)((function(){d&&c&&(h("user:run:output",{bufferedOutput:d}),c.write(d),p(""))}),[c,d]),(0,S.useEffect)((function(){if(c){var e=function(){t.getRunState()!==D.Ah.OFFLINE&&t.resizeTerminal(c.getSize())},n=[];n.push(c.onResize(e).dispose);var i=[];n.push(c.onData((function(e){var n=(0,U.I)(e);"running"!==(null===r||void 0===r?void 0:r.state.current)?t.getRunState()!==D.Ah.OFFLINE?t.sendInput(n):i.push(n):r.sendInput(n)})).dispose),n.push(t.onOutput((function(e){h("user:run:output",{output:e}),c.write(e)})));var o=!1;return n.push(t.onStateChanged((function(n){if(n!==D.Ah.OFFLINE){if(o||(e(),o=!0),i.length){var r=!0,u=!1,a=void 0;try{for(var l,c=i[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var s=l.value;t.sendInput(s)}}catch(f){u=!0,a=f}finally{try{r||null==c.return||c.return()}finally{if(u)throw a}}i=[]}}else o=!1}))),t.getRunState()!==D.Ah.OFFLINE&&(e(),o=!0),function(){n.forEach((function(e){return e()}))}}}),[c,t,r]),[c,s,p]}({tracker:t,runner:r,debugClient:i,packager:a,openFile:w,listFiles:b}),3),R=x[0],k=x[1],I=x[2],A=(0,o.Z)(S.useState(!1),2),O=A[0],B=A[1],q=(0,c.Z)(T);S.useEffect((function(){var e;null===(e=q.current)||void 0===e||e.call(q,R)}),[q,R]);var z=(0,c.Z)(E);S.useEffect((function(){R&&z.current&&R.focus()}),[R,z]);var H=(0,y.w)({runner:r}),W=H.parsedError,j=H.clearDebug,X=(0,d.T3)(),K=Boolean(W);S.useEffect((function(){return function(){j()}}),[j]);var V=(0,s.Z)().preferences.accessibleTerminal;S.useImperativeHandle(n,(function(){return{write:function(e){R?R.write(e):I((function(n){return n+e.replace(/\n/g,"\n\r")}))},clear:function(){R&&R.clear()},focus:function(){R&&R.focus()}}}));var Q=(0,g.Z)(p.y.Output);return(0,u.BX)(h.G,{css:[Z.EA.container],onKeyDown:function(e){"f"===e.key&&(0,f.j)(e)&&!e.shiftKey&&(B(!0),e.preventDefault())},innerRef:Q,children:[(0,u.BX)(h.G,{css:F,children:[(0,u.BX)(h.G,{css:G,className:"controls",children:[O&&R?(0,u.tZ)(P.R,{findPrevious:R.findPrevious,findNext:R.findNext,exit:function(){return B(!1)}}):(0,u.tZ)(_.l,{onClick:function(){return B(!0)}}),(0,u.tZ)(C.Z,{onClick:function(){R&&(R.clear(),R.focus(),j())}})]}),K&&m?(0,u.tZ)(M,{clearDebug:j,parsedError:W,openPane:m}):null]}),V?null:(0,u.tZ)(l.T,{children:'Enable "Accessible Terminal" in Workspace Settings to use a screen reader with the console.'}),(0,u.tZ)(h.G,{css:X?Z.EA.xterm:Z.EA.xtermWithBorderRadius,innerRef:k}),v?(0,u.tZ)(N,{initialRunState:r.getRunState(),onBootStatus:v}):null]})};function M(e){var n=e.clearDebug,t=e.parsedError,r=e.openPane,i=(0,R.ql)();return(0,u.tZ)(h.G,{css:B,children:(0,u.tZ)(b,{onClick:function(){t&&(r({type:"ghostwriterChat"}),i({chatMessage:{type:"debugger",errorType:"console",text:(0,x.Vh)(t,"debugger")}}),n())}})})}var z=S.forwardRef(q)},27495:function(e,n,t){t.d(n,{N2:function(){return A},St:function(){return k},EA:function(){return D}});var r=t(2272),i=t(74985),o=t(50959),u=t(43312),a=t(252),l=t(60447),c=t(33358),s=t(42256),f=t(17074),d=t(11619),p=t(82568),h=t(39541),v=t(85368),g=t(77511),y=t(72999),m=t(69921),E=t(625),T=t(9348),w=t(99063),b=t(90171),S=t(88161),x=t(12171),R=t(70232);function Z(e){var n=e.sendInput,t=e.paste,r=(0,b.useRouter)(),i=(0,g.Vg)(r);(0,o.useEffect)((function(){if(i){var e=function(e){(0,x.gN)(e,(function(e){var r,i,o,u=e.type;switch(u){case S.cF.SHELL_INSERT_INPUT:i=e.id,o=e.input,n(o)?(0,x.gU)(i):(0,x.pl)(i);break;case S.cF.SHELL_COMMAND:"unknown"===(r=e.command)||(0,R.Z)(r);break;case S.cF.SHELL_PASTE_TEXT:t(e.text)?(0,x.gU)(e.id):(0,x.pl)(e.id);break;default:(0,R.Z)(u)}}))};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}}),[i,n,t])}var C=t(49514);function k(e){var n,t=e.onShellKey,i=e.onOutput,u=e.container,a=e.initialPwd,l=(0,r.Z)((0,T.Z)(),2),c=l[0],s=l[1],f=(0,m.Z)({service:"shell",container:u}),d=(0,C.K)({channelId:null===f||void 0===f||null===(n=f.channel)||void 0===n?void 0:n.id}),p=o.useRef(!1),h="",v="",g="",b=o.useCallback((function(e){if(!f.channel||!c)return!1;var n=u.client();if(!f.channel||"open"!==f.channel.status||n.getConnectionState()!==y.em.CONNECTED)return!1;var t=(0,w.I)(e);return f.channel.send({input:t}),!0}),[c,f,u]);return Z({sendInput:b,paste:function(e){return!!c&&(c.paste(e),!0)}}),o.useEffect((function(){if(f.channel&&c&&"open"===f.channel.status){var e=c.onKey((function(e){var n=e.key,r=e.domEvent;if("\r"===n){(0,E.j)(E.U3.SHELL_COMMAND_EVALED,{context:h});var i=v;v.endsWith(h)&&h.length>0&&(i=v.slice(0,-h.length)),d("user:shell:output:clean",{output:i,command:g}),d("user:shell:exec",{command:h}),d("user:shell:output",{output:v}),g=h,h="",v=""}else h+=n;t&&t(r)})),n=u.client(),r=c.onData((function(e){b(e)}));f.channel.onCommand((function(e){e.hint?c.write("\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n")):e.output&&(c.write(e.output),null===i||void 0===i||i(e.output),v+=e.output)}));var o=function(){f.channel&&"open"===f.channel.status&&n.getConnectionState()===y.em.CONNECTED&&f.channel.send({resizeTerm:c.getSize()})};if(a&&!p.current){var l=a.replace(/"/g,'\\"');f.channel.send({input:'cd "'.concat(l,'"\n')}),p.current=!0}var s=c.onResize(o);return o(),function(){e.dispose(),r.dispose(),s.dispose()}}}),[f.channel,c,t,i,u,b,a]),[c,s,b]}var I=(0,u.iv)([h.l0.height("100%"),h.l0.overflow("hidden"),{"& .xterm":[h.l0.pl(8),h.l0.pt(8),h.l0.pb(4),h.l0.height("100%")]}]),D=(0,p.X)({container:[h.l0.coverContainer,{"&:focus-within .controls":{opacity:1}}],xterm:I,xtermWithBorderRadius:[I,{"& .xterm-viewport":[h.l0.borderRadius(0,0,8,8)]}]});function A(e){var n=e.shell,t=e.shellRef,u=e.className,p=(0,d.Z)().preferences.accessibleTerminal,y=(0,r.Z)(o.useState(!1),2),m=y[0],E=y[1],T=m&&n?(0,i.tZ)(a.R,{findPrevious:n.findPrevious,findNext:n.findNext,exit:function(){return E(!1)}}):(0,i.tZ)(l.l,{onClick:function(){return E(!0)}}),w=(0,g.T3)();return(0,i.BX)(v.G,{className:u,css:[D.container],onKeyDown:function(e){"f"===e.key&&(0,s.j)(e)&&(E(!0),e.preventDefault())},children:[!p&&(0,i.tZ)(f.T,{children:'Enable "Accessible Terminal" in Workspace Settings to use a screen reader with the shell.'}),(0,i.tZ)(v.G,{css:w?D.xterm:D.xtermWithBorderRadius,innerRef:t}),n?(0,i.BX)(v.G,{className:"controls",css:[h.l0.position.absolute,h.l0.flex.row,h.l0.top(8),h.l0.right(8),h.l0.height(30),h.l0.align.center,{opacity:0,zIndex:4}],children:[T,(0,i.tZ)(c.Z,{onClick:n.clear})]}):(0,i.tZ)("code",{css:[h.l0.color.foregroundDimmest,h.l0.coverContainer,h.l0.p(8)],children:"Loading..."})]})}},79686:function(e,n,t){t.d(n,{Z:function(){return M}});var r=t(57135),i=t(2272),o=t(96583),u=t(74985),a=t(48306),l=t.n(a),c=t(50959),s=t(43182),f=t(48468),d=t(625),p=t(34489),h=t(87861),v=t(63064),g=t(32104),y=t(2041),m=t(89025),E=t(82568),T=t(39541),w=t(85368),b=t(25198),S=t(45510),x=t(48667),R=t(88541),Z=t(48330),C=t(63763),k=t(97807),I=t(90171),D=t(72006),A=t(43119),O=t(71440),N=t(24635);function _(){var e=(0,A.Z)(["\n  query WorkspaceVncOutput($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        slug\n        owner {\n          ... on Team {\n            id\n            username\n          }\n          ... on User {\n            id\n            username\n          }\n        }\n      }\n    }\n  }\n"]);return _=function(){return e},e}var P={},L=(0,O.Ps)(_());var U,G=t(33594),B=t(47900);!function(e){e.Connecting="Connecting",e.Connected="Connected",e.Disconnected="Disconnected",e.Errored="Errored"}(U||(U={}));var F="VNC_PASSWORD";function q(e){var n,t=function(e){var n=(0,D.Z)({},P,e);return N.a(L,n)}({skip:e.skip,variables:{replId:(0,Z.Z)()}}).data,r="Repl"===(null===t||void 0===t?void 0:t.repl.__typename)?t.repl:null,i=null===r||void 0===r||null===(n=r.owner)||void 0===n?void 0:n.username;return r&&i?r.slug.length+i.length+2>63?null:function(e){var n=e.replSlug,t=e.username,r=(0,k.Z)()?C.js:C.ck,i=(0,C.mZ)(r);return"".concat(i,"//").concat(n,"--").concat(t,".").concat(r)}({username:i,replSlug:r.slug}):null}function M(e){var n=e.fs,a=e.container,E=(0,i.Z)(c.useState(null),2),T=E[0],w=E[1],b=(0,i.Z)(c.useState(void 0),2),S=b[0],x=b[1],D=(0,i.Z)(c.useState(!1),2),A=D[0],O=D[1],N=(0,i.Z)(c.useState(U.Connecting),2),_=N[0],P=N[1],L=(0,i.Z)(c.useState(null),2),G=L[0],B=L[1],M=(0,i.Z)(c.useState(!1),2),z=M[0],W=M[1],j=(0,i.Z)(c.useState(!1),2),X=j[0],K=j[1],V=(0,i.Z)(c.useState(null),2),Q=V[0],Y=V[1],$=c.useRef(0),J=(0,v.Z)(),ee=(0,R.P5)({controlName:"flag-vnc-error-status",logFlagToAnalytics:!1}),ne=(0,R.P5)({controlName:"flag-vnc-dash-url",logFlagToAnalytics:!1}),te=(0,I.useRouter)().pathname,re=q({skip:!(ne&&("/replEnvironmentDesktop"===te||"/replEnvironmentMobile"===te)&&!(0,k.Z)())});(0,d.j)(d.U3.VNC_OPENED),c.useEffect((function(){if(re){if(a.getConnectionState()!==h.em.CONNECTED)return a.onConnectionStateChanged((function(e){e===h.em.CONNECTED&&re&&Y(re)}));if(!re)return;Y(re)}}),[a,re]),c.useEffect((function(){if(!re){if(a.getConnectionState()!==h.em.CONNECTED)return a.onConnectionStateChanged((function(e){e===h.em.CONNECTED&&a.getVncUrl().then((function(e){return Y(e)}))}));a.getVncUrl().then((function(e){return Y(e)}))}}),[a,re]);var ie=(0,i.Z)(c.useState(null),2),oe=ie[0],ue=ie[1],ae=c.useRef((function(){return null}));c.useEffect((function(){ae.current()}),[oe]);var le=(0,f.Z)((function(e){return ue(e.width&&e.height?{width:e.width,height:e.height}:null)}),{type:"throttle",wait:100}),ce=c.useRef((function(e){}));c.useEffect((function(){ce.current(X)}),[X]),c.useEffect((function(){if(!T){var e=!1;return t.e(994).then(t.bind(t,30994)).then((function(n){e||w(n)})),function(){e=!0}}}),[T]),c.useEffect((function(){ee||_===U.Disconnected&&setTimeout((function(){J.current&&P(U.Connecting)}),Math.random()*(Math.pow(2,$.current)-1)*1e3)}),[_,J,ee]),c.useEffect((function(){if(ee&&_===U.Disconnected){var e=setTimeout((function(){P(U.Connecting)}),Math.random()*(Math.pow(2,$.current)-1)*1e3);return function(){clearTimeout(e)}}}),[_,J,ee]);var se=(0,Z.Z)();c.useEffect((function(){if(Q&&G&&T&&_===U.Connecting){$.current++;var e=T.default,t=a.getConnectionMetadata(),i={credentials:{username:null===t||void 0===t?void 0:t.token,password:S||""}};(0,d.j)(d.U3.VNC_CONNECTED);var u=new e(G,Q,i);u.scaleViewport=!0,u.resizeSession=!0;var l=function(){J.current&&($.current=0,P(U.Connected))},c=function(e){var n=e.detail.capabilities.audio;W(void 0!==window.MediaSource&&!!n)},f=function(e){if(ae.current=function(){return null},ce.current=function(e){},u.removeEventListener("securityfailure",h),u.removeEventListener("disconnect",f),u.removeEventListener("capabilities",c),u.removeEventListener("connect",l),J.current){if(ee&&!e.detail.clean){var n=a.getConnectionMetadata(),t=n?(0,C.he)(n.token):null;return(0,d.j)(d.U3.VNC_ERRORED,{vncUrl:Q,replId:se,cluster:null===t||void 0===t?void 0:t.cluster}),void P(U.Errored)}P(U.Disconnected)}},h=function(){if(J.current){var e=function(){O(!0)},t=function(){var t=(0,r.Z)((function(){var t,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,n.readFile(".env")];case 1:return t=o.sent(),J.current?t.error?(e(),[2]):(r=t.content.toString("utf8"),i=p.Z.parse(r),F in i?(x(i.VNC_PASSWORD),[2]):(e(),[2])):[2]}}))}));return function(){return t.apply(this,arguments)}}();t().catch((function(e){return s.Tb(e)}))}};return u.addEventListener("connect",l),u.addEventListener("capabilities",c),u.addEventListener("disconnect",f),u.addEventListener("securityfailure",h),ae.current=function(){return u._windowResize()},W(!1),K(!1),ce.current=function(n){n?((0,d.j)(d.U3.VNC_AUDIO_ENABLED),u.enableAudio(2,window.MediaSource.isTypeSupported("audio/webm;codecs=opus")?e.audioCodecs.OpusWebM:e.audioCodecs.MP3,32768)):u.disableAudio()},function(){J.current||(ae.current=function(){return null},ce.current=function(e){},u.removeEventListener("securityfailure",h),u.removeEventListener("disconnect",f),u.removeEventListener("capabilities",c),u.removeEventListener("connect",l),u.disconnect())}}}),[T,G,a,Q,n,S,_,J,ee,se]);var fe="vnc-output-".concat(_.toLowerCase());return(0,u.BX)("div",{className:"jsx-612fb0831fb3a82c vnc",children:[z?(0,u.BX)("label",{className:"jsx-612fb0831fb3a82c vnc-audio",children:["\ud83c\udfa7"," ",(0,u.tZ)("input",{type:"checkbox",checked:X,onChange:function(e){return K(e.target.checked)},className:"jsx-612fb0831fb3a82c"})]}):null,(0,u.tZ)("div",{ref:function(e){le(e),B(e)},"data-cy":fe,className:"jsx-612fb0831fb3a82c vnc-target"}),_===U.Connecting||_===U.Disconnected?(0,u.tZ)("div",{className:"jsx-612fb0831fb3a82c vnc-overlay",children:(0,u.tZ)(g.Z,{size:32})}):null,_===U.Errored?(0,u.tZ)(H,{vncUrl:Q,onRetry:function(){return P(U.Connecting)}}):null,(0,u.tZ)(y.u,{isOpen:A,onRequestClose:function(){return O(!1)},children:(0,u.tZ)(m.Z,{prompt:"Password",desc:"The output is password protected, please input it",placeholder:"password",type:"text",onCancel:function(){return O(!1)},onConfirm:function(e){x(e),O(!1)}})}),(0,u.tZ)(l(),{id:"612fb0831fb3a82c",children:".vnc.jsx-612fb0831fb3a82c{position:relative}.vnc.jsx-612fb0831fb3a82c,.vnc-target.jsx-612fb0831fb3a82c{height:100%;width:100%}.vnc-audio.jsx-612fb0831fb3a82c{position:absolute;bottom:0;right:0;padding:.2em}.vnc-overlay.jsx-612fb0831fb3a82c{top:0;position:absolute;height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background:rgba(0,0,0,.85);color:var(--white)}"})]})}var z=(0,E.X)({root:[T.l0.coverContainer,T.l0.center,T.l0.p(16)],inner:[T.l0.colWithGap(8),T.l0.width(250)],diagnosisContent:[T.l0.py(8)]});function H(e){var n=e.vncUrl,t=e.onRetry,r=null;if(n){var i=new URL("wss://10622591-6a32-44be-aa89-1421705f33ea.id.repl.co").hostname;r=(0,u.tZ)(G.Q,{headerContent:"Diagnosis",children:(0,u.tZ)(w.G,{css:[z.diagnosisContent],children:(0,u.tZ)(B.ZP,{children:"Open this link and check if you can visit this URL from your browser:\n[".concat(i,"](https://").concat(i,").\n\nIf you see a browser error, it's possible that your ISP have security settings blocking the URL. Please contact your ISP and ask them to unblock the URL above. Here are the support links for common ISPs:\n- [Xfinity](https://www.xfinity.com/support/articles/report-blocked-website)\n- [Spectrum.net](https://www.spectrum.net/support/forms/unblock_site)\n")})})})}return(0,u.tZ)(w.G,{css:z.root,children:(0,u.BX)(w.G,{css:z.inner,children:[(0,u.tZ)(b.E,{colorway:"warning",text:"There was an error connecting to the server"}),r,(0,u.tZ)(S.zx,{iconLeft:(0,u.tZ)(x.Z,{}),text:"Try again",onClick:t})]})})}},69834:function(e,n,t){t.d(n,{T:function(){return m},W:function(){return E}});var r=t(57135),i=t(2272),o=t(96583),u=t(91926),a=t(20575),l=t(4561),c=t(12583),s=t(12379),f=t(43119),d=t(71440);function p(){var e=(0,f.Z)(["\n  query LoadDefaultFile($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        language\n      }\n    }\n  }\n"]);return p=function(){return e},e}var h=(0,d.Ps)(p());var v=t(87978),g=".replit",y="replit.nix";function m(e,n){var t=n.startsWith("nix"),r=t?null:u.ZP.getMainFileName(n);if(r&&u.ZP.usesInterpreter(n)&&e.includes(r))return r;if(e.includes("Makefile"))return"Makefile";if(r&&e.includes(r))return r;if(!t&&e.includes(g))return".replit";var i=e.find(v.gK);return i||e.find((function(e){return(!t||![g,y].includes(e))&&!(0,a.C)(e)}))}function E(e){return T.apply(this,arguments)}function T(){return T=(0,r.Z)((function(e){var n,t,u,a,f,d,p,g,y,E,T,w,b;function S(){return x.apply(this,arguments)}function x(){return x=(0,r.Z)((function(){var e,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return(e=null===g||void 0===g?void 0:g.entrypoint)?(0,v.Il)(e)?[4,t.stat(e)]:[2,T.includes(e)?e:null]:[2,null];case 1:return[2,(n=r.sent()).exists&&n.type===l.Tv.File?e:null]}}))})),x.apply(this,arguments)}return(0,o.__generator)(this,(function(r){switch(r.label){case 0:if(n=e.dotReplit,t=e.fs,u=e.replId,!s.l)throw new Error("Expected apollo client");return[4,Promise.all([s.l.query({query:h,variables:{replId:u}}),t.readDir(c.Ql),n.getConfig()])];case 1:if(a=i.Z.apply(void 0,[r.sent(),3]),f=a[0].data,d=a[1],p=a[2],g=p.config,!d||d.error)throw new Error("Could not read files");return y=d.children,E=y.find((function(e){return e.type===l.Tv.File&&e.filename.toLowerCase().endsWith("readme.md")})),T=y.filter((function(e){return e.type===l.Tv.File})).map((function(e){return e.filename})),[4,S()];case 2:return(w=r.sent())?[2,{entrypoint:w,readmeFile:null===E||void 0===E?void 0:E.filename}]:(b="Repl"===f.repl.__typename?f.repl.language:"",[2,{entrypoint:m(T,b),readmeFile:null===E||void 0===E?void 0:E.filename}])}}))})),T.apply(this,arguments)}},86785:function(e,n,t){function r(e){var n=document.createElement("canvas"),t=n.getContext("2d");if(n.width=e.width,n.height=e.height,!t)throw new Error("failed to get canvas ctx");return{version:"1",width:e.width,height:e.height,palette:[[0,0,0,255],[255,255,255,255],[255,255,128,255],[255,128,255,255],[0,128,128,255],[128,0,255,255],[255,0,128,255],[0,255,255,255]],anims:{},frames:e.frames.map((function(r){var i=new window.ImageData(new Uint8ClampedArray(r.pixels),e.width,e.height);return t.putImageData(i,0,0),n.toDataURL()}))}}function i(e){return new Promise((function(n,t){var r=new window.Image;r.src=e,r.onload=function(){n(r)},r.onerror=t}))}function o(e){return new Promise((function(n,t){Promise.all(e.frames.map(i)).then((function(r){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var o=i.getContext("2d");if(o){var u=r.map((function(n){return o.drawImage(n,0,0),{pixels:Array.from(o.getImageData(0,0,e.width,e.height).data),width:e.width,height:e.height}}));n({frames:u,preview:e.frames[0],width:e.width,height:e.height})}else t(new Error("failed to get canvas ctx"))})).catch(t)}))}t.d(n,{C:function(){return r},u:function(){return o}})},25362:function(e,n,t){t.d(n,{z:function(){return u}});var r=t(20575),i=t(12583),o=t(73499);function u(e){var n=e.siblingNames,t=e.fileName,u=e.initialValue,a=e.parentPath;if(t.includes("/"))return"File names cannot include forward slashes";if("."===t||".."===t)return'File names cannot be "'.concat(t,'"');if(t.match(/^\s/)||t.match(/\s$/))return"File names cannot start or end with whitespace";if(u!==t&&n.includes(t))return"A file or folder with that name already exists";if(t.length>100)return"File names cannot be longer than 100 characters";var l=a===i.Ql?t:a+"/"+t;return l===o.w?"You can create environment variables with the Secrets tool! (.env files are deprecated)":(0,r.C)(l)?'"'.concat(l,'" is reserved'):null}},9348:function(e,n,t){t.d(n,{Z:function(){return z}});var r,i=t(57135),o=t(2272),u=t(96583),a=t(43182),l=t(94716),c=t(11619),s=t(60566),f=t(38598),d=t(13424),p=t(50959),h=t(48468),v=t(30826);var g=t.n(v)()((function(){if("undefined"!==typeof AudioContext){var e=(r||(r=new AudioContext),r),n=e.createBufferSource();e.decodeAudioData(function(e){for(var n=window.atob(e),t=n.length,r=new Uint8Array(t),i=0;i<t;i++)r[i]=n.charCodeAt(i);return r.buffer}("SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"),(function(t){n.buffer=t,n.connect(e.destination),n.start(0)}))}}),500,{leading:!0,trailing:!0}),y="replit-icons-font";function m(){if(!document.getElementById(y)){var e=document.createElement("style");e.id=y,e.type="text/css",e.appendChild(document.createTextNode("\n@font-face {\n  font-family: 'replit-icons';\n  font-style: normal;\n  font-weight: normal;\n  font-stretch: normal;\n  src: url(".concat("/public/fonts/replit-icons.woff",") format('woff'),\n    url(").concat("/public/fonts/replit-icons.ttf",") format('truetype');\n}"))),document.head.appendChild(e)}}var E=t(29457),T="BESbswy",w=3e3;function b(e){return S.apply(this,arguments)}function S(){return(S=(0,i.Z)((function(e){return(0,u.__generator)(this,(function(n){switch(n.label){case 0:return document.fonts?[4,R(document.fonts,e)]:[3,2];case 1:case 3:return n.sent(),[2];case 2:return[4,Promise.all([C("serif",e),C("sans-serif",e),C("monospace",e)])]}}))}))).apply(this,arguments)}function x(e){var n=e.family,t=e.style,r=void 0===t?"normal":t,i=e.weight,o=void 0===i?"normal":i;return"".concat(r," ").concat(o," 100px ").concat(n)}function R(e,n){return Z.apply(this,arguments)}function Z(){return(Z=(0,i.Z)((function(e,n){var t,r,i,o,a,l;return(0,u.__generator)(this,(function(u){return t=n.fontInfo,r=n.characters,i=void 0===r?T:r,o=n.timeout,a=void 0===o?w:o,l=x(t),[2,new Promise((function(n,r){var o=!1,u=E.kg.timeStart({family:t.family,style:t.style,weight:t.weight}),c=setTimeout((function(){o=!0,u("xterm font loading timed out"),n()}),a);e.load(l,i).then((function(){o||(u("xterm font loaded"),clearTimeout(c),n())})).catch((function(e){o||(clearTimeout(c),r(e))}))}))]}))}))).apply(this,arguments)}function C(e,n){return k.apply(this,arguments)}function k(){return(k=(0,i.Z)((function(e,n){var t,r,i,o,a,l,c,s,f;return(0,u.__generator)(this,(function(u){return t=n.fontInfo,r=n.characters,i=void 0===r?T:r,o=n.timeout,a=void 0===o?w:o,l=x(t),(c=document.createElement("span")).innerText=i,c.style.font="normal normal 100px ".concat(e),c.style.position="absolute",c.style.left="-9999px",c.style.top="-9999px",document.body.appendChild(c),s=c.offsetWidth,c.style.font=l,(f=function(){return s!==c.offsetWidth})()?[2]:[2,new Promise((function(e,n){var r=setInterval((function(){f()&&(clearInterval(r),clearTimeout(i),document.body.removeChild(c),e())}),50),i=setTimeout((function(){clearInterval(r),document.body.removeChild(c),f()?e():n(new Error("Font loading timed out "+t.family))}),a)}))]}))}))).apply(this,arguments)}function I(e){a.Tb(e)}var D='"ReplitHack"',A=400,O=700,N=String.fromCharCode(61095);function _(){return P.apply(this,arguments)}function P(){return(P=(0,i.Z)((function(){return(0,u.__generator)(this,(function(e){switch(e.label){case 0:return m(),[4,Promise.all([b({fontInfo:{family:"replit-icons"},characters:N}).catch(I),b({fontInfo:{family:D,weight:A.toString()}}).catch(I),b({fontInfo:{family:D,weight:A.toString(),style:"italic"}}).catch(I),b({fontInfo:{family:D,weight:O.toString()}}).catch(I),b({fontInfo:{family:D,weight:O.toString(),style:"italic"}}).catch(I)])];case 1:return e.sent(),[2]}}))}))).apply(this,arguments)}var L=t(60583),U=t(82001),G=t(250),B=t(34937),F=t(23220);function q(){return Promise.all([(0,f.Z)((function(){return t.e(9784).then(t.t.bind(t,95244,23))})),(0,f.Z)((function(){return t.e(8296).then(t.t.bind(t,20229,23))})),(0,f.Z)((function(){return t.e(4925).then(t.t.bind(t,24925,23))})),(0,f.Z)((function(){return t.e(4420).then(t.t.bind(t,14420,23))})),(0,f.Z)((function(){return t.e(3573).then(t.t.bind(t,23573,23))})),(0,f.Z)((function(){return t.e(8767).then(t.bind(t,58767))})),(0,f.Z)((function(){return t.e(4239).then(t.t.bind(t,74239,23))})),(0,f.Z)((function(){return t.e(9058).then(t.t.bind(t,69058,23))}))])}function M(){if(function(){if(!/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent))return!1;var e=window.navigator.userAgent.match(/Version\/(\d+)/);return null===e||e.length<2||parseInt(e[1],10)<16}())return!1;var e=document.createElement("canvas").getContext("webgl2");return Boolean(e)}function z(e){var n=(0,p.useState)(null),r=n[0],s=n[1],f=(0,p.useState)(null),v=f[0],y=f[1],m=(0,L.f)(),E=(0,c.Z)().preferences,T=E.fontSize,w=E.accessibleTerminal,b=(0,d.uV)(),S=(0,B.Z)(),x=null===e||void 0===e?void 0:e.openFile,R=null===e||void 0===e?void 0:e.listFiles,Z={screenReaderMode:w,fileLinking:(0,p.useMemo)((function(){return x&&R?{openFile:x,listFiles:R}:null}),[x,R]),terminalTheme:m,fontSize:T,scrollback:null===e||void 0===e?void 0:e.scrollback},C=(0,l.Z)(Z),k=(0,h.Z)((function(){!1!==(null===e||void 0===e?void 0:e.autoFit)&&(null===v||void 0===v||v.fit())}),{type:"debounce",wait:200}),I=(0,p.useRef)(null),N=(0,l.Z)(null===e||void 0===e?void 0:e.size),P=(0,U.Sy)();return(0,p.useLayoutEffect)((function(){if(r){var e=[];return function(){return n.apply(this,arguments)}().catch((function(e){e.message&&e.message.toLowerCase().includes("loading chunk")?a.$e((function(n){n.setExtra("message",e.message),n.setExtra("stack",e.stack),a.Tb(new Error("Loading chunk failed"))})):b({error:e,origin:"Xterm: init"})})),function(){e.forEach((function(e){return e()}))}}function n(){return n=(0,i.Z)((function(){var n,t,i,a,l,c,s,f,d,p,h,v,m,E,T,w,b,x,R,Z,L;function B(e,n){F.X.openExternalUrl(n)}return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return[4,Promise.all([q(),_()])];case 1:return i=o.Z.apply(void 0,[u.sent(),1]),a=(0,o.Z)(i[0],8),l=a[0].Terminal,c=a[1].FitAddon,s=a[2].SearchAddon,f=a[3].WebLinksAddon,d=a[4].Unicode11Addon,p=a[5].FileLinkAddon,h=a[6].CanvasAddon,v=a[7].WebglAddon,r?(E={allowProposedApi:!0,cursorBlink:!1,scrollback:null!==(m=C.current.scrollback)&&void 0!==m?m:1e3,tabStopWidth:4,fontFamily:"".concat(D,', replit-icons, Monaco, "Ubuntu Mono", Consolas, monospace'),fontSize:C.current.fontSize,lineHeight:1,fontWeight:A,fontWeightBold:O,drawBoldTextInBrightColors:!1,minimumContrastRatio:4.5,theme:C.current.terminalTheme,screenReaderMode:C.current.screenReaderMode},void 0!==(null===(n=N.current)||void 0===n?void 0:n.cols)&&(E.cols=N.current.cols),void 0!==(null===(t=N.current)||void 0===t?void 0:t.rows)&&(E.rows=N.current.rows),T=new l(E),C.current.fileLinking?(I.current=new p(C.current.fileLinking.openFile,C.current.fileLinking.listFiles),T.loadAddon(I.current)):I.current=null,w=new c,T.loadAddon(w),b=new f(S?B:void 0),T.loadAddon(b),x=new s,T.loadAddon(x),R=new d,T.loadAddon(R),T.unicode.activeVersion="11",T.onBell(g),T.open(r),e.push((function(){return T.dispose()})),function(){try{if(!M()){var e=new h;return void T.loadAddon(e)}var n=new v;T.loadAddon(n)}catch(r){var t=new h;T.loadAddon(t)}}(),Z=!1,L=null,T.attachCustomKeyEventHandler((function(e){var n=(0,G.IX)(e);if(n){var t=n;L&&(t=(0,G.cZ)(L,n));var r=P(t);switch(r.kind){case U.Xp.NoMatch:L=null;break;case U.Xp.WaitingForChord:return L=r.key,!1;case U.Xp.MatchFound:return L=null,!1}}return!!H(T,e)&&("shift"===e.key.toLowerCase()||"ctrl"===e.key.toLowerCase()||"alt"===e.key.toLowerCase()||"meta"===e.key.toLowerCase()||("tab"!==e.key.toLowerCase()||!Z)&&(Z="escape"===e.key.toLowerCase(),!0))})),y({onKey:T.onKey.bind(T),onData:T.onData.bind(T),onResize:T.onResize.bind(T),write:T.write.bind(T),fit:function(){var e=r.getBoundingClientRect(),n=e.width,t=e.height;n>0&&t>0&&w.fit()},focus:function(){return T.focus()},clear:function(){return T.clear()},findPrevious:function(e,n){return x.findPrevious(e,n)},findNext:function(e,n){return x.findNext(e,n)},getSize:function(){return{cols:T.cols,rows:T.rows}},paste:function(e){return T.paste(e)},_term:T}),k(r),[2]):[2]}}))})),n.apply(this,arguments)}}),[r,k,C,b,N,P,S]),function(e,n,r){var i=r.screenReaderMode,o=r.fileLinking,u=r.terminalTheme;(0,p.useEffect)((function(){e&&u&&(e.options.theme=u)}),[e,u]),(0,p.useEffect)((function(){e&&(e.options.screenReaderMode=i)}),[e,i]),(0,p.useEffect)((function(){if(e)if(o){if(!n.current){var r=!1;return t.e(8767).then(t.bind(t,58767)).then((function(t){var i=t.FileLinkAddon;r||(n.current=new i(o.openFile,o.listFiles),e.loadAddon(n.current))})),function(){r=!0}}n.current.update(o.openFile,o.listFiles),n.current.reactivate()}else n.current&&n.current.deactivate()}),[e,o,n])}(null===v||void 0===v?void 0:v._term,I,Z),(0,p.useEffect)((function(){var e=null===v||void 0===v?void 0:v._term;e&&T&&e.options.fontSize!==T&&(e.options.fontSize=T,e.refresh(0,e.rows-1),v.fit())}),[T,v]),[v,s]}function H(e,n){return!window.navigator.clipboard||("c"!==n.key.toLowerCase()||!n.ctrlKey||!n.shiftKey||("keyup"===n.type&&e.hasSelection()&&(0,s.Z)(e.getSelection()).catch((function(e){a.$e((function(n){n.setTag("xterm-clipboard",!0),n.setExtra("type","copy"),a.Tb(e)}))})),n.preventDefault(),n.stopPropagation(),!1))}},99063:function(e,n,t){t.d(n,{I:function(){return o}});var r="\x1b[200~",i="\x1b[201~";function o(e){return function(e){return e.startsWith(r)&&e.endsWith(i)}(e)?e.slice(r.length,e.length-i.length):e}},60583:function(e,n,t){t.d(n,{f:function(){return u}});var r=t(28737),i=t(45317),o=t(50959);function u(){var e=(0,r.F)().values;return(0,o.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.Sj.values;return{foreground:e.global.foregroundDefault,background:e.global.backgroundDefault,cursor:e.global.foregroundDefault,cursorAccent:e.global.backgroundHigher,selectionBackground:e.global.foregroundDefault,black:e.global.backgroundRoot,red:e.global.redStronger,green:e.global.accentPositiveDefault,yellow:e.global.yellowDefault,blue:e.global.blueStronger,magenta:e.global.magentaDefault,cyan:e.global.tealDefault,white:e.global.foregroundDefault,brightBlack:e.global.outlineDimmest,brightRed:e.global.redStrongest,brightGreen:e.global.accentPositiveStronger,brightYellow:e.global.yellowStronger,brightBlue:e.global.blueStrongest,brightMagenta:e.global.magentaStronger,brightCyan:e.global.tealStronger,brightWhite:e.global.foregroundDefault}}(e)}),[e])}},64918:function(e,n,t){t.d(n,{J1:function(){return c},ce:function(){return g},hf:function(){return p},uL:function(){return l},yL:function(){return d}});var r,i=t(9970),o=t(17403),u=t(52783),a=t(46486);function l(e){return u.B4.Check(o.Type.Union([a.LD,a.t3]),e)}function c(e){return u.B4.Check(a.vD,e)}!function(e){e.Response="response",e.Error="error",e.Debug="debug",e.Intent="intent",e.TokenUsage="tokenUsage"}(r||(r={}));var s={messageCharacters:2e3,responseTokens:1e3,fileContextCharacters:8e3,maxTotalTokens:4050},f={"codechat-bison":s,"text-davinci-003":s,"gpt-3.5-turbo":s,"gpt-3.5-turbo-0613":s,"gpt-3.5-turbo-0301":s,"gpt-3.5-turbo-16k-0613":{messageCharacters:5e3,responseTokens:4e3,fileContextCharacters:34e3,maxTotalTokens:16e3},"gpt-4":{messageCharacters:2e3,responseTokens:1e3,fileContextCharacters:12e3,maxTotalTokens:8e3},"gpt-4-32k":{messageCharacters:12e3,responseTokens:4e3,fileContextCharacters:48e3,maxTotalTokens:32e3}};function d(e){return f[e]}var p={model:"gpt-4",weeklyTokenLimit:621e3},h=a.LD.anyOf.map((function(e){return e.const})),v=a.t3.const,g=(0,i.Z)(h).concat([v])},34489:function(e,n,t){function r(e){var n=e.trim();return 0===n.length||n.startsWith("#")}function i(e,n){return e.split(n).length-1}function o(e){if(!e.includes("#"))return e;var n=e.split("#"),t=!1,r=[],o=!0,u=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value;(1===i(s,'"')||i(s,"'"))&&(t?(t=!1,r.push(s)):t=!0),(0===r.length||t)&&r.push(s)}}catch(f){u=!0,a=f}finally{try{o||null==c.return||c.return()}finally{if(u)throw a}}return r.join("#")}function u(e,n){var t=e.trim();if(0===t.length)return t;var r=t.length-1,i='"'===t[0]&&'"'===t[r],o="'"===t[0]&&"'"===t[r];return(o||i)&&(t=t.slice(1,-1)),i&&(t=(t=t.replace(/\\./g,(function(e){return"\\n"===e?"\n":"\\r"===e?"\r":e}))).replace(/\\([^$])/g,"$1")),o||(t=t.replace(/(\\)?(\$)(\()?\{?([A-Z0-9_]+)?\}?/g,(function(e){var t=e.match(/(\\)?(\$)(\()?\{?([A-Z0-9_]+)?\}?/);if(null===t)return e;if("\\"===t[1]||"("===t[2])return t[0].slice(1);var r=t[4];return""!==r?n[r]||"":e}))),t}t.d(n,{Z:function(){return l}});var a=t(2272);var l={parse:function(e){var n={},t=e.split(/\n|\r|\r\n/),i=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var f=c.value;if(!r(f)){var d=(f=o(f)).indexOf("="),p=f.indexOf(":");if(-1!==p||-1!==d){var h=d;-1!==p&&(p<d||-1===d)&&(h=p);var v=f.slice(0,h).replace(/^\s*(?:export\s+)?(.*?)\s*$/,"$1"),g=u(f.slice(h+1),n);n[v]=g}}}}catch(y){a=!0,l=y}finally{try{i||null==s.return||s.return()}finally{if(a)throw l}}return n},serialize:function(e){return Object.entries(e).reduce((function(e,n){var t=(0,a.Z)(n,2),r=t[0],i=t[1].replace(/\\([^$])/g,"\\\\$1").replace(/\$/g,"\\\\$$").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r");return e+="".concat(r,'="').concat(i,'"\n')}),"")}}},91046:function(e,n,t){t.d(n,{BP:function(){return o},BY:function(){return i},U4:function(){return r.U4},Vh:function(){return u},fF:function(){return r.fF},tr:function(){return r.tr}});var r=t(97836);function i(e){if(!e)throw new Error("Expected baseUrl");var n;try{n=new URL(e)}catch(t){throw new Error("baseUrl failed to parse as URL")}if("https:"!==n.protocol)throw new Error("baseUrl must use https");return n.href.replace(/\/$/,"")}function o(e){return u(e,"extension.json")}function u(e,n){var t=i(e);return new URL(n,t).href}},97836:function(e,n,t){t.d(n,{MU:function(){return Z},U4:function(){return S},fF:function(){return R},tr:function(){return x}});var r=t(2272),i=t(17403),o=t(52783),u=t(72963),a=t.n(u),l=t(14723),c=t(32508),s=t.n(c),f=t(14709),d=t.n(f),p=t(94099),h=i.Type.String({minLength:1,maxLength:64}),v=i.Type.Object({path:i.Type.String({minLength:1}),label:i.Type.String({minLength:1})}),g=i.Type.Object({image:(0,p.K5)(i.Type.String({minLength:1})),title:i.Type.String({minLength:1,maxLength:60}),body:i.Type.String({minLength:1,maxLength:512})}),y=i.Type.Object({glob:i.Type.String({minLength:1}),handler:i.Type.String({minLength:1}),name:(0,p.K5)(i.Type.String({minLength:1})),icon:(0,p.K5)(i.Type.String({minLength:1}))}),m=i.Type.Object({handler:i.Type.String({minLength:1}),name:(0,p.K5)(i.Type.String({minLength:1})),icon:(0,p.K5)(i.Type.String({minLength:1}))}),E=i.Type.Union(l.l.map((function(e){return i.Type.Literal(e)}))),T=i.Type.Object({name:E,reason:i.Type.String()}),w=i.Type.Object({page:i.Type.String()}),b=i.Type.Object({name:i.Type.String({minLength:1,maxLength:60}),description:i.Type.String({minLength:1,maxLength:255}),scopes:(0,p.K5)(i.Type.Array(T)),longDescription:(0,p.K5)(i.Type.String({minLength:1})),icon:(0,p.K5)(i.Type.String({minLength:1})),tags:(0,p.K5)(i.Type.Array(h,{maxItems:16})),coverImages:(0,p.K5)(i.Type.Array(v,{maxItems:16})),fileHandlers:(0,p.K5)(i.Type.Array(y,{maxItems:4})),tools:(0,p.K5)(i.Type.Array(m,{maxItems:4})),website:(0,p.K5)(i.Type.String()),authorEmail:(0,p.K5)(i.Type.String()),background:(0,p.K5)(w),features:(0,p.K5)(i.Type.Array(g,{minItems:1,maxItems:10}))});function S(e){var n=function(n,t,r){return{manifest:null,error:new p.Jg([{type:t,schema:b,path:n,value:e,message:r}])}};if(o.B4.Check(b,e)){if(e.website&&!s()(e.website))return n("website",o.B0.StringFormat,"website must be a valid url");if(e.authorEmail&&!d()(e.authorEmail))return n("authorEmail",o.B0.StringFormat,"authorEmail must be a valid email");var t,i,u=null!==(t=e.fileHandlers)&&void 0!==t?t:[],l=!0,c=!1,f=void 0;try{for(var h,v=u.entries()[Symbol.iterator]();!(l=(h=v.next()).done);l=!0){var g=(0,r.Z)(h.value,2),y=g[0],m=g[1];if(!a()(m.glob))return n("fileHandlers[".concat(y,"].glob"),o.B0.StringFormat,"glob must be a valid glob pattern")}}catch(U){c=!0,f=U}finally{try{l||null==v.return||v.return()}finally{if(c)throw f}}if(u&&u.length>1){var E=!0,T=!1,w=void 0;try{for(var S,x=u.entries()[Symbol.iterator]();!(E=(S=x.next()).done);E=!0){var R=(0,r.Z)(S.value,2),Z=R[0],C=R[1];if(!C.icon||!C.name)return n("fileHandlers[".concat(Z,"]"),o.B0.ObjectRequiredProperty,"When at least two fileHandlers are provided, they must all specify a name and icon")}}catch(U){T=!0,w=U}finally{try{E||null==x.return||x.return()}finally{if(T)throw w}}}var k=null!==(i=e.tools)&&void 0!==i?i:[];if(k&&k.length>1){var I=!0,D=!1,A=void 0;try{for(var O,N=k.entries()[Symbol.iterator]();!(I=(O=N.next()).done);I=!0){var _=(0,r.Z)(O.value,2),P=_[0],L=_[1];if(!L.icon||!L.name)return n("tool[".concat(P,"]"),o.B0.ObjectRequiredProperty,"When at least two tools are provided, they must all specify a name and icon")}}catch(U){D=!0,A=U}finally{try{I||null==N.return||N.return()}finally{if(D)throw A}}}return{manifest:e,error:null}}return{manifest:null,error:(0,p.ZA)(b,e)}}function x(e){var n=S(e);if(n.manifest)return n.manifest;throw n.error}function R(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:null!==(e=t.name)&&void 0!==e?e:"Unnamed Extension",description:null!==(n=t.description)&&void 0!==n?n:"(no description)"}}function Z(e,n){return!!e.scopes&&void 0!==e.scopes.find((function(e){return e.name===n}))}},14723:function(e,n,t){t.d(n,{k:function(){return r},l:function(){return i}});var r=[{key:"read",friendlyName:"Read files",description:"Read any file in your Repl"},{key:"write-exec",friendlyName:"Write & Execute",description:"Write to any file in your Repl and execute any code"},{key:"repldb:read",friendlyName:"ReplDB Read",description:"Read any key, or list all keys under any prefix in the repldb belonging to your Repl"},{key:"repldb:write",friendlyName:"ReplDB Write",description:"Write or delete any key in the repldb belonging to your Repl"},{key:"experimental-api",friendlyName:"Experimental APIs",description:"Use experimental APIs that may be unstable, change in behavior, or be removed entirely"}];var i=r.map((function(e){return e.key}))},22126:function(e,n,t){function r(e,n){return{ok:!1,error:e,errorExtras:n}}function i(e){return{ok:!0,value:e}}t.d(n,{Ok:function(){return i},U:function(){return r}});var o={Ok:i,Err:r};n.Z=o},59253:function(e,n,t){t.d(n,{MF:function(){return l},TI:function(){return a},lv:function(){return f},uC:function(){return c},yb:function(){return s}});var r=t(91926),i=t(12583),o=t(26289),u=t(92404);function a(e){var n=(0,u.nV)(e)[1];return!!n&&(n===i.oh||n===i.AS)}function l(e){return".env"===e.toString()||".breakpoints"===e.toString()||".cache"===e.toString()||(0,u.X2)((0,u.S1)(".cache"),e)}function c(e){return o.nh.includes(e.toString())}function s(e,n){return Boolean(n&&r.ZP.isLangFileBinary(n,e.toString()))}function f(e,n){if(!n)return!1;var t=(0,u.nV)(e).slice(1),r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value,s=!0,f=!1,d=void 0;try{for(var p,h=t[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){if(p.value.toString().match(c))return!0}}catch(v){f=!0,d=v}finally{try{s||null==h.return||h.return()}finally{if(f)throw d}}}}catch(v){i=!0,o=v}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return!1}},51446:function(e,n,t){t.d(n,{Y:function(){return o}});var r=t(57135),i=t(96583);function o(e){return u.apply(this,arguments)}function u(){return(u=(0,r.Z)((function(e){var n,t;return(0,i.__generator)(this,(function(r){return n=e.container,t=e.service,[2,new Promise((function(e){var r=n.openChannel({service:t},(function(n){var t=n.channel;return e([t,r]),r}))}))]}))}))).apply(this,arguments)}},22946:function(e,n,t){t.d(n,{Z:function(){return d}});var r,i=t(57135),o=t(2272),u=t(96583),a=t(13630),l=t(43182),c=t(27327),s=t(22126),f=t(51446);function d(e){var n=e.container,t=function(e){var n=h.get(e);return n||(n={packagerChannel:null,didCallOpenChannel:!1,closeChannel:null},h.set(e,n),n)},d=function(e){var i=t(e);if(i.didCallOpenChannel)throw new Error("Already called open channel");i.didCallOpenChannel=!0,i.closeChannel=n.openChannel({service:"packager3",name:e||"packager",action:a.api.OpenChannel.Action.ATTACH_OR_CREATE},(function(n){var t=n.channel;return t.onCommand((function(n){if(null!=n.state){var t=n.state===a.api.State.Running;p.emit(r.STATE_CHANGED,t,e)}else null!=n.output?p.emit(r.OUTPUT,n.output,e):null!=n.error&&p.emit(r.ERROR,n.error,e)})),e?t.request({packageSetPackagerRequest:{packagerId:e}}).then((function(){i.packagerChannel=t,p.emit(r.CHANNEL_OPENED,t,e)})):(i.packagerChannel=t,p.emit(r.CHANNEL_OPENED,t,e)),function(){i.packagerChannel=null}}))},p=(0,c.ZP)(),h=new Map;function v(e){return g.apply(this,arguments)}function g(){return g=(0,i.Z)((function(e){var t,r,i,a,l=arguments;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:0,[4,(0,f.Y)({container:n,service:"packager3"})];case 1:return r=o.Z.apply(void 0,[u.sent(),2]),i=r[0],a=r[1],e?[4,i.request({packageSetPackagerRequest:{packagerId:e}})]:[3,3];case 2:u.sent(),u.label=3;case 3:if("open"!==i.status){if(t>5)throw new Error("Failed to getAnonymousPackagerChannel");return[2,v(e,t+1)]}return[2,[i,a]]}}))})),g.apply(this,arguments)}function y(e){return m.apply(this,arguments)}function m(){return(m=(0,i.Z)((function(e){var n;return(0,u.__generator)(this,(function(i){return(n=t(e)).didCallOpenChannel||d(e),n.packagerChannel&&"open"===n.packagerChannel.status?[2,n.packagerChannel]:[2,new Promise((function(n){p.once(r.CHANNEL_OPENED,(function(t,r){r===e&&n(t)}))}))]}))}))).apply(this,arguments)}return{addPackages:function(e,n){return(0,i.Z)((function(){var t,r,i;return(0,u.__generator)(this,(function(o){switch(o.label){case 0:return[4,y(n)];case 1:return"open"!==(t=o.sent()).status?[2,!1]:(r=e.map((function(e){return{name:e.name,spec:e.version}})),[4,t.request({packageAdd:{pkgs:r}})]);case 2:return(i=o.sent()).channelClosed?[2,!1]:[2,Boolean(i.ok)]}}))}))()},removePackages:function(e,n){return(0,i.Z)((function(){var t,r,i;return(0,u.__generator)(this,(function(o){switch(o.label){case 0:return[4,y(n)];case 1:return"open"!==(t=o.sent()).status?[2,!1]:(r=e.map((function(e){return{name:e}})),[4,t.request({packageRemove:{pkgs:r}})]);case 2:return(i=o.sent()).channelClosed?[2,!1]:[2,Boolean(i.ok)]}}))}))()},searchPackages:function(e,n){return(0,i.Z)((function(){var t,r,i,a;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return[4,v(n)];case 1:return t=o.Z.apply(void 0,[u.sent(),2]),r=t[0],i=t[1],[4,r.request({packageSearch:{query:e}})];case 2:return(a=u.sent()).channelClosed?[2,[]]:(i(),"packageSearchResp"===a.body&&a.packageSearchResp?[2,a.packageSearchResp.results||[]]:(l.Tb(new Error("Unknown packager3 command ".concat(a.body,". ")+"Expected packageSearchResp. Received error: ".concat(a.error))),[2,[]]))}}))}))()},fetchPackageInfo:function(e,n){return(0,i.Z)((function(){var t,r,i,a;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return[4,v(n)];case 1:return t=o.Z.apply(void 0,[u.sent(),2]),r=t[0],i=t[1],[4,r.request({packageInfo:{pkg:{name:e}}})];case 2:return(a=u.sent()).channelClosed?[2,void 0]:(i(),"packageInfoResp"===a.body&&a.packageInfoResp?[2,a.packageInfoResp.pkg||void 0]:(l.Tb(new Error("Unknown packager3 command ".concat(a.body,". ")+"Expected packageInfoResp. Received error: ".concat(a.error))),[2,void 0]))}}))}))()},installPackages:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,i.Z)((function(){var t,r,i;return(0,u.__generator)(this,(function(o){switch(o.label){case 0:return[4,y(e)];case 1:return"open"!==(t=o.sent()).status?[2,(0,s.U)("ChannelClosed")]:[4,t.request({packageInstall:{useNewResponse:!0,disableGuess:n}})];case 2:return(r=o.sent()).error?[2,(0,s.U)(r.error)]:r.channelClosed?[2,(0,s.U)("ChannelClosed")]:(i=r.packageInstallResponse)?[2,(0,s.Ok)(i)]:[2,(0,s.U)("No package install response found")]}}))}))()},listSpecfile:function(e){return(0,i.Z)((function(){var n,t,r,i,a,c,s;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return[4,v(e)];case 1:return n=o.Z.apply(void 0,[u.sent(),2]),t=n[0],r=n[1],[4,t.request({packageListSpecfile:{}})];case 2:if((i=u.sent()).channelClosed)return[2,{packages:null,error:"channel closed"}];switch(r(),i.body){case"error":return[2,{packages:null,error:"list specfile failed: ".concat(i.error)}];case"packageListSpecfileResp":return(c=null===(a=i.packageListSpecfileResp)||void 0===a?void 0:a.pkgs)?[2,{packages:c,error:null}]:[2,{packages:null,error:"list specfile returned an empty response"}];default:return s="Unknown packager3 listSpecFile command ".concat(i.body,". ")+"Expected error or packageListSpecfileResp",l.Tb(new Error(s)),[2,{packages:null,error:s}]}return[2]}}))}))()},getPackagerIds:function(){return Array.from(h.keys())},clearPackager:function(e){var n=h.get(e);(null===n||void 0===n?void 0:n.closeChannel)&&n.closeChannel(),h.delete(e)},onOutput:function(e){return p.on(r.OUTPUT,e),function(){p.removeListener(r.OUTPUT,e)}},onError:function(e){return p.on(r.ERROR,e),function(){p.removeListener(r.ERROR,e)}},onStateChanged:function(e){return p.on(r.STATE_CHANGED,e),function(){p.removeListener(r.STATE_CHANGED,e)}}}}!function(e){e.OUTPUT="OUTPUT",e.ERROR="ERROR",e.STATE_CHANGED="STATE_CHANGED",e.CHANNEL_OPENED="CHANNEL_OPENED"}(r||(r={}))},62069:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(57135),i=t(96583),o=t(50968),u=t(88688);function a(e){var n=e.container,t=e.dotReplit,a=function(){return s.current?Promise.resolve(s.current):new Promise((function(e){var n=s.subscribe((function(t){t&&(n(),e(t))}))}))},l=(0,o.u)(null),c=(0,o.u)(null),s=(0,o.u)(null);return n.openChannel({service:"toolchain"},(function(e){var n=e.channel;s.set(n);var t=n.onCommand((function(e){e.toolchainChanged?l.current=e.toolchainChanged.configs:e.nixModulesChanged&&(c.current=e.nixModulesChanged.modules)}));return n.request({toolchainGetRequest:{}}).then((function(e){var n;l.current=(null===(n=e.toolchainGetResponse)||void 0===n?void 0:n.configs)||null})),n.request({nixModulesGetRequest:{}}).then((function(e){var n;c.current=(null===(n=e.nixModulesGetResponse)||void 0===n?void 0:n.modules)||null})),function(){t()}})),{configs:l,modules:c,getConfigs:function(){return l.current?Promise.resolve(l.current):new Promise((function(e){var n=l.subscribe((function(t){if(n(),null===t)throw new Error("Returned toolchain config should not be null");e(t)}))}))},getRegistry:function(){return(0,r.Z)((function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,a()];case 1:return[4,e.sent().request({nixModulesGetRegistryRequest:{}})];case 2:return[2,e.sent().nixModulesGetRegistryResponse||null]}}))}))()},addModule:function(e){return(0,r.Z)((function(){var n,r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return r=[],[4,t.getConfig()];case 1:if((o=i.sent()).error&&o.error!==u.Yt.NotFound)throw new Error("Failed to read .replit"+o.error);return-1!==(r=(null===(n=o.config)||void 0===n?void 0:n.modules)||[]).indexOf(e)?[3,3]:(r.push(e),[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(r)}])]);case 2:i.sent(),i.label=3;case 3:return[2]}}))}))()},removeModule:function(e){return(0,r.Z)((function(){var n,r,o,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return r=[],[4,t.getConfig()];case 1:if((o=i.sent()).error&&o.error!==u.Yt.NotFound)throw new Error("Failed to read .replit"+o.error);return r=(null===(n=o.config)||void 0===n?void 0:n.modules)||[],(a=r.filter((function(n){if(e===n)return!1;var t=n.match(/^(.+)\.nix$/);return(t&&t[1])!==e}))).length===r.length?[2]:[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(a)}])];case 2:return i.sent(),[2]}}))}))()},upgradeModule:function(e,n){return(0,r.Z)((function(){var r,o,a,l;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,t.getConfig()];case 1:if((o=i.sent()).error&&o.error!==u.Yt.NotFound)throw new Error("Failed to read .replit"+o.error);return a=(null===(r=o.config)||void 0===r?void 0:r.modules)||[],l=a.map((function(t){return e===t?n:t})),[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(l)}])];case 2:return i.sent(),[2]}}))}))()},buildModules:function(){return(0,r.Z)((function(){var e,n;return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return e=this,[4,a()];case 1:return n=t.sent(),[2,new Promise((function(t){var r=e.configs.subscribe((function(e){e&&(r(),t(void 0))}));n.send({nixModulesBuildRequest:{}})}))]}}))})).apply(this)}}}},94099:function(e,n,t){t.d(n,{Jg:function(){return v},K5:function(){return h},ZA:function(){return g}});var r=t(66091),i=t(5683),o=t(9970),u=t(83451),a=t(45347),l=t(17403),c=t(52783),s=t(98278),f=t.n(s),d=t(92087),p=t.n(d);l.FormatRegistry.Set("uuid",(function(e){return f()(e)})),l.FormatRegistry.Set("date-time",(function(e){return p()(e)}));var h=function(e){return l.Type.Optional(l.Type.Union([l.Type.Null(),e]))},v=function(e){"use strict";(0,i.Z)(t,e);var n=(0,a.Z)(t);function t(e){var i;return(0,r.Z)(this,t),(i=n.call(this)).name="Schema validation error",i.message=e.map((function(e){return"".concat(e.path,": ").concat(e.message)})).join("\n"),i.issues=e,i}return t}((0,u.Z)(Error));function g(e,n){var t=(0,o.Z)(c.B4.Errors(e,n));return new v(t)}}}]);
//# sourceMappingURL=6430-836acc45bada1f4c.js.map